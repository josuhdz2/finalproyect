"use strict";(self.webpackChunkproyecto_final=self.webpackChunkproyecto_final||[]).push([[179],{2011:(lt,Ee,F)=>{F.d(Ee,{Dh:()=>le,GT:()=>re,cc:()=>Ce,hO:()=>Be,on:()=>H,pX:()=>te,xv:()=>ae});var h=F(4650),Q=F(9260),k=F(2122);lt=F.hmd(lt);const ne=["ngOnDestroy"],te=(be,De,Fe,Ie={})=>new Proxy(be,{get:(ve,Ae)=>Fe.runOutsideAngular(()=>{var Ve;if(be[Ae])return!(null===(Ve=Ie?.spy)||void 0===Ve)&&Ve.get&&Ie.spy.get(Ae,be[Ae]),be[Ae];if(ne.indexOf(Ae)>-1)return()=>{};const Pe=De.toPromise().then(j=>{const _e=j&&j[Ae];return"function"==typeof _e?_e.bind(j):_e&&_e.then?_e.then(Ue=>Fe.run(()=>Ue)):Fe.run(()=>_e)});return new Proxy(()=>{},{get:(j,_e)=>Pe[_e],apply:(j,_e,Ue)=>Pe.then(We=>{var ct;const Je=We&&We(...Ue);return!(null===(ct=Ie?.spy)||void 0===ct)&&ct.apply&&Ie.spy.apply(Ae,Ue,Je),Je})})})}),re=(be,De)=>{De.forEach(Fe=>{Object.getOwnPropertyNames(Fe.prototype||Fe).forEach(Ie=>{Object.defineProperty(be.prototype,Ie,Object.getOwnPropertyDescriptor(Fe.prototype||Fe,Ie))})})};class he{constructor(De){return De}}const le=new h.OlP("angularfire2.app.options"),ae=new h.OlP("angularfire2.app.name");function H(be,De,Fe){const ve="object"==typeof Fe&&Fe||{};ve.name=ve.name||"string"==typeof Fe&&Fe||"[DEFAULT]";const Ve=Q.Z.apps.filter(Pe=>Pe&&Pe.name===ve.name)[0]||De.runOutsideAngular(()=>Q.Z.initializeApp(be,ve));try{JSON.stringify(be)!==JSON.stringify(Ve.options)&&G("error",`${Ve.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(Ve)}const G=(be,...De)=>{(0,h.X6Q)()&&typeof console<"u"&&console[be](...De)},K={provide:he,useFactory:H,deps:[le,h.R0b,[new h.FiY,ae]]};let Be=(()=>{class be{constructor(Fe){Q.Z.registerVersion("angularfire",k.q4.full,"core"),Q.Z.registerVersion("angularfire",k.q4.full,"app-compat"),Q.Z.registerVersion("angular",h.q4F.full,Fe.toString())}static initializeApp(Fe,Ie){return{ngModule:be,providers:[{provide:le,useValue:Fe},{provide:ae,useValue:Ie}]}}}return be.\u0275fac=function(Fe){return new(Fe||be)(h.LFG(h.Lbi))},be.\u0275mod=h.oAB({type:be}),be.\u0275inj=h.cJS({providers:[K]}),be})();function Ce(be,De,Fe,Ie,ve){const[,Ae,Ve]=globalThis.\u0275AngularfireInstanceCache.find(Pe=>Pe[0]===be)||[];if(Ae)return function Ge(be,De){try{return be.toString()===De.toString()}catch{return be===De}}(ve,Ve)||(fe("error",`${De} was already initialized on the ${Fe} Firebase App with different settings.${ot?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:ve,was:Ve})),Ae;{const Pe=Ie();return globalThis.\u0275AngularfireInstanceCache.push([be,Pe,ve]),Pe}}const ot=!!lt.hot,fe=(be,...De)=>{(0,h.X6Q)()&&typeof console<"u"&&console[be](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(lt,Ee,F)=>{F.d(Ee,{q4:()=>Ld,iC:()=>Fn,HU:()=>Ud,vb:()=>Wt,JM:()=>zf});var h=F(4650),Q=F(259),k=F(5861),ne=F(9681),te=F(2090),re=F(4859),he=F(1877),le=F(8766);const ae="@firebase/installations",H="0.6.4",G=1e4,K=`w:${H}`,Be="FIS_v2",Ce="https://firebaseinstallations.googleapis.com/v1",Ge=36e5,De=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Fe(b){return b instanceof te.ZR&&b.code.includes("request-failed")}function Ie({projectId:b}){return`${Ce}/projects/${b}/installations`}function ve(b){return{token:b.token,requestStatus:2,expiresIn:We(b.expiresIn),creationTime:Date.now()}}function Ae(b,T){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,k.Z)(function*(b,T){const V=(yield T.json()).error;return De.create("request-failed",{requestName:b,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Pe({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function _e(b){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function We(b){return Number(b.replace("s","000"))}function se(){return(se=(0,k.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:M}){const V=Ie(b),Y=Pe(b),X=T.getImmediate({optional:!0});if(X){const gt=yield X.getHeartbeatsHeader();gt&&Y.append("x-firebase-client",gt)}const rt={method:"POST",headers:Y,body:JSON.stringify({fid:M,authVersion:Be,appId:b.appId,sdkVersion:K})},ut=yield _e(()=>fetch(V,rt));if(ut.ok){const gt=yield ut.json();return{fid:gt.fid||M,registrationStatus:2,refreshToken:gt.refreshToken,authToken:ve(gt.authToken)}}throw yield Ae("Create Installation",ut)})).apply(this,arguments)}function de(b){return new Promise(T=>{setTimeout(T,b)})}const xe=/^[cdef][\w-]{21}$/,ke="";function je(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function Qe(b){return function ye(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return xe.test(M)?M:ke}catch{return ke}}function Ze(b){return`${b.appName}!${b.appId}`}const un=new Map;function wt(b,T){const M=Ze(b);xt(M,T),function jn(b,T){const M=function Cn(){return!_n&&"BroadcastChannel"in self&&(_n=new BroadcastChannel("[Firebase] FID Change"),_n.onmessage=b=>{xt(b.data.key,b.data.fid)}),_n}();M&&M.postMessage({key:b,fid:T}),function An(){0===un.size&&_n&&(_n.close(),_n=null)}()}(M,T)}function xt(b,T){const M=un.get(b);if(M)for(const V of M)V(T)}let _n=null;const Jr="firebase-installations-database",Rs=1,di="firebase-installations-store";let $r=null;function Ns(){return $r||($r=(0,le.X3)(Jr,Rs,{upgrade:(b,T)=>{0===T&&b.createObjectStore(di)}})),$r}function wn(b,T){return ei.apply(this,arguments)}function ei(){return(ei=(0,k.Z)(function*(b,T){const M=Ze(b),Y=(yield Ns()).transaction(di,"readwrite"),X=Y.objectStore(di),Te=yield X.get(M);return yield X.put(T,M),yield Y.done,(!Te||Te.fid!==T.fid)&&wt(b,T.fid),T})).apply(this,arguments)}function ft(b){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,k.Z)(function*(b){const T=Ze(b),V=(yield Ns()).transaction(di,"readwrite");yield V.objectStore(di).delete(T),yield V.done})).apply(this,arguments)}function xi(b,T){return xn.apply(this,arguments)}function xn(){return(xn=(0,k.Z)(function*(b,T){const M=Ze(b),Y=(yield Ns()).transaction(di,"readwrite"),X=Y.objectStore(di),Te=yield X.get(M),rt=T(Te);return void 0===rt?yield X.delete(M):yield X.put(rt,M),yield Y.done,rt&&(!Te||Te.fid!==rt.fid)&&wt(b,rt.fid),rt})).apply(this,arguments)}function Sr(b){return Os.apply(this,arguments)}function Os(){return Os=(0,k.Z)(function*(b){let T;const M=yield xi(b.appConfig,V=>{const Y=function Pt(b){return xr(b||{fid:je(),registrationStatus:0})}(V),X=function yt(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(De.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function St(b,T){return no.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:En(b)}:{installationEntry:T}}(b,Y);return T=X.registrationPromise,X.installationEntry});return M.fid===ke?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}}),Os.apply(this,arguments)}function no(){return no=(0,k.Z)(function*(b,T){try{const M=yield function Je(b,T){return se.apply(this,arguments)}(b,T);return wn(b.appConfig,M)}catch(M){throw Fe(M)&&409===M.customData.serverCode?yield ft(b.appConfig):yield wn(b.appConfig,{fid:T.fid,registrationStatus:0}),M}}),no.apply(this,arguments)}function En(b){return $n.apply(this,arguments)}function $n(){return($n=(0,k.Z)(function*(b){let T=yield Ar(b.appConfig);for(;1===T.registrationStatus;)yield de(100),T=yield Ar(b.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:V}=yield Sr(b);return V||M}return T})).apply(this,arguments)}function Ar(b){return xi(b,T=>{if(!T)throw De.create("installation-not-found");return xr(T)})}function xr(b){return function No(b){return 1===b.registrationStatus&&b.registrationTime+G<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Bi(){return(Bi=(0,k.Z)(function*({appConfig:b,heartbeatServiceProvider:T},M){const V=function Qt(b,{fid:T}){return`${Ie(b)}/${T}/authTokens:generate`}(b,M),Y=function j(b,{refreshToken:T}){const M=Pe(b);return M.append("Authorization",function ct(b){return`${Be} ${b}`}(T)),M}(b,M),X=T.getImmediate({optional:!0});if(X){const gt=yield X.getHeartbeatsHeader();gt&&Y.append("x-firebase-client",gt)}const rt={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:K,appId:b.appId}})},ut=yield _e(()=>fetch(V,rt));if(ut.ok)return ve(yield ut.json());throw yield Ae("Generate Auth Token",ut)})).apply(this,arguments)}function Hr(b){return ji.apply(this,arguments)}function ji(){return ji=(0,k.Z)(function*(b,T=!1){let M;const V=yield xi(b.appConfig,X=>{if(!jt(X))throw De.create("not-registered");const Te=X.authToken;if(!T&&function Mr(b){return 2===b.requestStatus&&!function $(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+Ge}(b)}(Te))return X;if(1===Te.requestStatus)return M=function He(b,T){return we.apply(this,arguments)}(b,T),X;{if(!navigator.onLine)throw De.create("app-offline");const rt=function U(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}(X);return M=function bt(b,T){return Nt.apply(this,arguments)}(b,rt),rt}});return M?yield M:V.authToken}),ji.apply(this,arguments)}function we(){return(we=(0,k.Z)(function*(b,T){let M=yield nt(b.appConfig);for(;1===M.authToken.requestStatus;)yield de(100),M=yield nt(b.appConfig);const V=M.authToken;return 0===V.requestStatus?Hr(b,T):V})).apply(this,arguments)}function nt(b){return xi(b,T=>{if(!jt(T))throw De.create("not-registered");return function z(b){return 1===b.requestStatus&&b.requestTime+G<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Nt(){return Nt=(0,k.Z)(function*(b,T){try{const M=yield function cn(b,T){return Bi.apply(this,arguments)}(b,T),V=Object.assign(Object.assign({},T),{authToken:M});return yield wn(b.appConfig,V),M}catch(M){if(!Fe(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield wn(b.appConfig,V)}else yield ft(b.appConfig);throw M}}),Nt.apply(this,arguments)}function jt(b){return void 0!==b&&2===b.registrationStatus}function ee(){return(ee=(0,k.Z)(function*(b){const T=b,{installationEntry:M,registrationPromise:V}=yield Sr(T);return V?V.catch(console.error):Hr(T).catch(console.error),M.fid})).apply(this,arguments)}function ze(){return ze=(0,k.Z)(function*(b,T=!1){const M=b;return yield function gn(b){return Mn.apply(this,arguments)}(M),(yield Hr(M,T)).token}),ze.apply(this,arguments)}function Mn(){return(Mn=(0,k.Z)(function*(b){const{registrationPromise:T}=yield Sr(b);T&&(yield T)})).apply(this,arguments)}function pu(b){return De.create("missing-app-config-values",{valueName:b})}const gu="installations",On=b=>{const T=b.getProvider("app").getImmediate(),M=function Al(b){if(!b||!b.options)throw pu("App Configuration");if(!b.name)throw pu("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!b.options[M])throw pu(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,ne._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},xl=b=>{const T=b.getProvider("app").getImmediate(),M=(0,ne._getProvider)(T,gu).getImmediate();return{getId:()=>function pe(b){return ee.apply(this,arguments)}(M),getToken:Y=>function Xe(b){return ze.apply(this,arguments)}(M,Y)}};(function Ml(){(0,ne._registerComponent)(new re.wA(gu,On,"PUBLIC")),(0,ne._registerComponent)(new re.wA("installations-internal",xl,"PRIVATE"))})(),(0,ne.registerVersion)(ae,H),(0,ne.registerVersion)(ae,H,"esm2017");const Xt="@firebase/remote-config",Rr=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ko{constructor(T,M,V,Y){this.client=T,this.storage=M,this.storageCache=V,this.logger=Y}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-M,Y=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var M=this;return(0,k.Z)(function*(){const[V,Y]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Y&&M.isCachedDataFresh(T.cacheMaxAgeMillis,V))return Y;T.eTag=Y&&Y.eTag;const X=yield M.client.fetch(T),Te=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Te.push(M.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Te),X})()}}function ao(b=navigator){return b.languages&&b.languages[0]||b.language}class ni{constructor(T,M,V,Y,X,Te){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=V,this.projectId=Y,this.apiKey=X,this.appId=Te}fetch(T){var M=this;return(0,k.Z)(function*(){const[V,Y]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,rt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ut={sdk_version:M.sdkVersion,app_instance_id:V,app_instance_id_token:Y,app_id:M.appId,language_code:ao()},gt={method:"POST",headers:rt,body:JSON.stringify(ut)},Ft=fetch(Te,gt),vt=new Promise((Pi,Hs)=>{T.signal.addEventListener(()=>{const Va=new Error("The operation was aborted.");Va.name="AbortError",Hs(Va)})});let qr;try{yield Promise.race([Ft,vt]),qr=yield Ft}catch(Pi){let Hs="fetch-client-network";throw"AbortError"===Pi?.name&&(Hs="fetch-timeout"),Rr.create(Hs,{originalErrorMessage:Pi?.message})}let Tn=qr.status;const Eo=qr.headers.get("ETag")||void 0;let er,mi;if(200===qr.status){let Pi;try{Pi=yield qr.json()}catch(Hs){throw Rr.create("fetch-client-parse",{originalErrorMessage:Hs?.message})}er=Pi.entries,mi=Pi.state}if("INSTANCE_STATE_UNSPECIFIED"===mi?Tn=500:"NO_CHANGE"===mi?Tn=304:("NO_TEMPLATE"===mi||"EMPTY_CONFIG"===mi)&&(er={}),304!==Tn&&200!==Tn)throw Rr.create("fetch-status",{httpStatus:Tn});return{status:Tn,eTag:Eo,config:er}})()}}class Zt{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,k.Z)(function*(){const V=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:V}){var Y=this;return(0,k.Z)(function*(){yield function fi(b,T){return new Promise((M,V)=>{const Y=Math.max(T-Date.now(),0),X=setTimeout(M,Y);b.addEventListener(()=>{clearTimeout(X),V(Rr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const X=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),X}catch(X){if(!function Rl(b){if(!(b instanceof te.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(X))throw X;const Te={throttleEndTimeMillis:Date.now()+(0,te.$s)(V),backoffCount:V+1};return yield Y.storage.setThrottleMetadata(Te),Y.attemptFetch(T,Te)}})()}}class _u{constructor(T,M,V,Y,X){this.app=T,this._client=M,this._storageCache=V,this._storage=Y,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function uo(b,T){const M=b.target.error||void 0;return Rr.create(T,{originalErrorMessage:M&&M?.message})}const pi="app_namespace_store";class ri{constructor(T,M,V,Y=function Wg(){return new Promise((b,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=V=>{T(uo(V,"storage-open"))},M.onsuccess=V=>{b(V.target.result)},M.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(pi,{keyPath:"compositeKey"})}}catch(M){T(Rr.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=T,this.appName=M,this.namespace=V,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,k.Z)(function*(){const V=yield M.openDbPromise;return new Promise((Y,X)=>{const rt=V.transaction([pi],"readonly").objectStore(pi),ut=M.createCompositeKey(T);try{const gt=rt.get(ut);gt.onerror=Ft=>{X(uo(Ft,"storage-get"))},gt.onsuccess=Ft=>{const vt=Ft.target.result;Y(vt?vt.value:void 0)}}catch(gt){X(Rr.create("storage-get",{originalErrorMessage:gt?.message}))}})})()}set(T,M){var V=this;return(0,k.Z)(function*(){const Y=yield V.openDbPromise;return new Promise((X,Te)=>{const ut=Y.transaction([pi],"readwrite").objectStore(pi),gt=V.createCompositeKey(T);try{const Ft=ut.put({compositeKey:gt,value:M});Ft.onerror=vt=>{Te(uo(vt,"storage-set"))},Ft.onsuccess=()=>{X()}}catch(Ft){Te(Rr.create("storage-set",{originalErrorMessage:Ft?.message}))}})})()}delete(T){var M=this;return(0,k.Z)(function*(){const V=yield M.openDbPromise;return new Promise((Y,X)=>{const rt=V.transaction([pi],"readwrite").objectStore(pi),ut=M.createCompositeKey(T);try{const gt=rt.delete(ut);gt.onerror=Ft=>{X(uo(Ft,"storage-delete"))},gt.onsuccess=()=>{Y()}}catch(gt){X(Rr.create("storage-delete",{originalErrorMessage:gt?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class ii{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const M=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),X=yield M;X&&(T.lastFetchStatus=X);const Te=yield V;Te&&(T.lastSuccessfulFetchTimestampMillis=Te);const rt=yield Y;rt&&(T.activeConfig=rt)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Nr(){return wd.apply(this,arguments)}function wd(){return(wd=(0,k.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}!function ns(){(0,ne._registerComponent)(new re.wA("remote-config",function b(T,{instanceIdentifier:M}){const V=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Rr.create("registration-window");if(!(0,te.hl)())throw Rr.create("indexed-db-unavailable");const{projectId:X,apiKey:Te,appId:rt}=V.options;if(!X)throw Rr.create("registration-project-id");if(!Te)throw Rr.create("registration-api-key");if(!rt)throw Rr.create("registration-app-id");const ut=new ri(rt,V.name,M=M||"firebase"),gt=new ii(ut),Ft=new he.Yd(Xt);Ft.logLevel=he.in.ERROR;const vt=new ni(Y,ne.SDK_VERSION,M,X,Te,rt),qr=new Zt(vt,ut),Tn=new ko(qr,ut,gt,Ft),Eo=new _u(V,Tn,gt,ut,Ft);return function io(b){const T=(0,te.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Eo),Eo},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(Xt,"0.4.4"),(0,ne.registerVersion)(Xt,"0.4.4","esm2017")}();const Ed="/firebase-messaging-sw.js",rs="/firebase-cloud-messaging-push-scope",lo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ya="https://fcmregistrations.googleapis.com/v1",Pl="google.c.a.c_id",Mf="google.c.a.c_l",Rf="google.c.a.ts",zg="google.c.a.e";var co=(()=>{return(b=co||(co={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",co;var b})();function Gi(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qg(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(M),Y=new Uint8Array(V.length);for(let X=0;X<V.length;++X)Y[X]=V.charCodeAt(X);return Y}const vu="fcm_token_details_db",Ol=5,gi="fcm_token_object_Store";function wu(){return wu=(0,k.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(vu))return null;let T=null;return(yield(0,le.X3)(vu,Ol,{upgrade:(V=(0,k.Z)(function*(Y,X,Te,rt){var ut;if(X<2||!Y.objectStoreNames.contains(gi))return;const gt=rt.objectStore(gi),Ft=yield gt.index("fcmSenderId").get(b);if(yield gt.clear(),Ft)if(2===X){const vt=Ft;if(!vt.auth||!vt.p256dh||!vt.endpoint)return;T={token:vt.fcmToken,createTime:null!==(ut=vt.createTime)&&void 0!==ut?ut:Date.now(),subscriptionOptions:{auth:vt.auth,p256dh:vt.p256dh,endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:"string"==typeof vt.vapidKey?vt.vapidKey:Gi(vt.vapidKey)}}}else if(3===X){const vt=Ft;T={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:Gi(vt.auth),p256dh:Gi(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:Gi(vt.vapidKey)}}}else if(4===X){const vt=Ft;T={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:Gi(vt.auth),p256dh:Gi(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:Gi(vt.vapidKey)}}}}),function(X,Te,rt,ut){return V.apply(this,arguments)})})).close(),yield(0,le.Lj)(vu),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),function Nf(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var V}),wu.apply(this,arguments)}const Eu="firebase-messaging-database",Zg=1,si="firebase-messaging-store";let Id=null;function ho(){return Id||(Id=(0,le.X3)(Eu,Zg,{upgrade:(b,T)=>{0===T&&b.createObjectStore(si)}})),Id}function va(b){return Uo.apply(this,arguments)}function Uo(){return Uo=(0,k.Z)(function*(b){const T=Fs(b),V=yield(yield ho()).transaction(si).objectStore(si).get(T);if(V)return V;{const Y=yield function kl(b){return wu.apply(this,arguments)}(b.appConfig.senderId);if(Y)return yield Bo(b,Y),Y}}),Uo.apply(this,arguments)}function Bo(b,T){return wa.apply(this,arguments)}function wa(){return(wa=(0,k.Z)(function*(b,T){const M=Fs(b),Y=(yield ho()).transaction(si,"readwrite");return yield Y.objectStore(si).put(T,M),yield Y.done,T})).apply(this,arguments)}function Iu(){return(Iu=(0,k.Z)(function*(b){const T=Fs(b),V=(yield ho()).transaction(si,"readwrite");yield V.objectStore(si).delete(T),yield V.done})).apply(this,arguments)}function Fs({appConfig:b}){return b.appId}const on=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Cu(b,T){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,k.Z)(function*(b,T){const M=yield Ll(b),V=hr(T),Y={method:"POST",headers:M,body:JSON.stringify(V)};let X;try{X=yield(yield fetch(Ia(b.appConfig),Y)).json()}catch(Te){throw on.create("token-subscribe-failed",{errorInfo:Te?.toString()})}if(X.error)throw on.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw on.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function bu(){return(bu=(0,k.Z)(function*(b,T){const M=yield Ll(b),V=hr(T.subscriptionOptions),Y={method:"PATCH",headers:M,body:JSON.stringify(V)};let X;try{X=yield(yield fetch(`${Ia(b.appConfig)}/${T.token}`,Y)).json()}catch(Te){throw on.create("token-update-failed",{errorInfo:Te?.toString()})}if(X.error)throw on.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw on.create("token-update-no-token");return X.token})).apply(this,arguments)}function Wi(b,T){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,k.Z)(function*(b,T){const V={method:"DELETE",headers:yield Ll(b)};try{const X=yield(yield fetch(`${Ia(b.appConfig)}/${T}`,V)).json();if(X.error)throw on.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(Y){throw on.create("token-unsubscribe-failed",{errorInfo:Y?.toString()})}})).apply(this,arguments)}function Ia({projectId:b}){return`${ya}/projects/${b}/registrations`}function Ll(b){return zi.apply(this,arguments)}function zi(){return(zi=(0,k.Z)(function*({appConfig:b,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function hr({p256dh:b,auth:T,endpoint:M,vapidKey:V}){const Y={web:{endpoint:M,auth:T,p256dh:b}};return V!==lo&&(Y.web.applicationPubKey=V),Y}const Vl=6048e5;function bd(){return bd=(0,k.Z)(function*(b){const T=yield function Bl(b,T){return jl.apply(this,arguments)}(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:Gi(T.getKey("auth")),p256dh:Gi(T.getKey("p256dh"))},V=yield va(b.firebaseDependencies);if(V){if(function $l(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}(V.subscriptionOptions,M))return Date.now()>=V.createTime+Vl?function Ca(b,T){return Mt.apply(this,arguments)}(b,{token:V.token,createTime:Date.now(),subscriptionOptions:M}):V.token;try{yield Wi(b.firebaseDependencies,V.token)}catch(Y){console.warn(Y)}return Tu(b.firebaseDependencies,M)}return Tu(b.firebaseDependencies,M)}),bd.apply(this,arguments)}function Du(){return Du=(0,k.Z)(function*(b){const T=yield va(b.firebaseDependencies);T&&(yield Wi(b.firebaseDependencies,T.token),yield function Fl(b){return Iu.apply(this,arguments)}(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),Du.apply(this,arguments)}function Mt(){return Mt=(0,k.Z)(function*(b,T){try{const M=yield function Rn(b,T){return bu.apply(this,arguments)}(b.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield Bo(b.firebaseDependencies,V),M}catch(M){throw yield function Mi(b){return Du.apply(this,arguments)}(b),M}}),Mt.apply(this,arguments)}function Tu(b,T){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,k.Z)(function*(b,T){const V={token:yield Cu(b,T),createTime:Date.now(),subscriptionOptions:T};return yield Bo(b,V),V.token})).apply(this,arguments)}function jl(){return(jl=(0,k.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qg(T)})})).apply(this,arguments)}function Dd(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Hl(b,T){if(!T.notification)return;b.notification={};const M=T.notification.title;M&&(b.notification.title=M);const V=T.notification.body;V&&(b.notification.body=V);const Y=T.notification.image;Y&&(b.notification.image=Y);const X=T.notification.icon;X&&(b.notification.icon=X)}(T,b),function kn(b,T){T.data&&(b.data=T.data)}(T,b),function Se(b,T){var M,V,Y,X,Te;if(!(T.fcmOptions||null!==(M=T.notification)&&void 0!==M&&M.click_action))return;b.fcmOptions={};const rt=null!==(Y=null===(V=T.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==Y?Y:null===(X=T.notification)||void 0===X?void 0:X.click_action;rt&&(b.fcmOptions.link=rt);const ut=null===(Te=T.fcmOptions)||void 0===Te?void 0:Te.analytics_label;ut&&(b.fcmOptions.analyticsLabel=ut)}(T,b),T}function Td(b,T){const M=[];for(let V=0;V<b.length;V++)M.push(b.charAt(V)),V<T.length&&M.push(T.charAt(V));return M.join("")}function Hn(b){return on.create("missing-app-config-values",{valueName:b})}Td("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Td("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Of{constructor(T,M,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Pf(b){if(!b||!b.options)throw Hn("App Configuration Object");if(!b.name)throw Hn("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const V of T)if(!M[V])throw Hn(V);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:M,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Ls(b){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,k.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Ed,{scope:rs}),b.swRegistration.update().catch(()=>{})}catch(T){throw on.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Au(){return(Au=(0,k.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield Ls(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw on.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function Sd(){return(Sd=(0,k.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=lo)})).apply(this,arguments)}function Xn(){return Xn=(0,k.Z)(function*(b,T){if(!navigator)throw on.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw on.create("permission-blocked");return yield function xu(b,T){return Sd.apply(this,arguments)}(b,T?.vapidKey),yield function Su(b,T){return Au.apply(this,arguments)}(b,T?.serviceWorkerRegistration),function fo(b){return bd.apply(this,arguments)}(b)}),Xn.apply(this,arguments)}function Gl(){return(Gl=(0,k.Z)(function*(b,T,M){const V=function po(b){switch(b){case co.NOTIFICATION_CLICKED:return"notification_open";case co.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:M[Pl],message_name:M[Mf],message_time:M[Rf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Mu(){return Mu=(0,k.Z)(function*(b,T){const M=T.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===co.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Dd(M)):b.onMessageHandler.next(Dd(M)));const V=M.data;(function Kt(b){return"object"==typeof b&&!!b&&Pl in b})(V)&&"1"===V[zg]&&(yield function Or(b,T,M){return Gl.apply(this,arguments)}(b,M.messageType,V))}),Mu.apply(this,arguments)}const Wl="@firebase/messaging",kf=b=>{const T=new Of(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function qi(b,T){return Mu.apply(this,arguments)}(T,M)),T},is=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:V=>function ba(b,T){return Xn.apply(this,arguments)}(T,V)}};function Ad(){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,k.Z)(function*(){try{yield(0,te.eu)()}catch{return!1}return typeof window<"u"&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ql(){(0,ne._registerComponent)(new re.wA("messaging",kf,"PUBLIC")),(0,ne._registerComponent)(new re.wA("messaging-internal",is,"PRIVATE")),(0,ne.registerVersion)(Wl,"0.12.4"),(0,ne.registerVersion)(Wl,"0.12.4","esm2017")}();const Md="analytics",Qg="firebase_id",Wr="origin",Vs=6e4,pn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yl="https://www.googletagmanager.com/gtag/js",Ir=new he.Yd("@firebase/analytics");function Lf(b){return Promise.all(b.map(T=>T.catch(M=>M)))}function go(){return(go=(0,k.Z)(function*(b,T,M,V,Y,X){const Te=V[Y];try{if(Te)yield T[Te];else{const ut=(yield Lf(M)).find(gt=>gt.measurementId===Y);ut&&(yield T[ut.appId])}}catch(rt){Ir.error(rt)}b("config",Y,X)})).apply(this,arguments)}function ss(){return(ss=(0,k.Z)(function*(b,T,M,V,Y){try{let X=[];if(Y&&Y.send_to){let Te=Y.send_to;Array.isArray(Te)||(Te=[Te]);const rt=yield Lf(M);for(const ut of Te){const gt=rt.find(vt=>vt.measurementId===ut),Ft=gt&&T[gt.appId];if(!Ft){X=[];break}X.push(Ft)}}0===X.length&&(X=Object.values(T)),yield Promise.all(X),b("event",V,Y||{})}catch(X){Ir.error(X)}})).apply(this,arguments)}const Cr=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Da=30,Uf=new class Zi{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Bf(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Ta(){return(Ta=(0,k.Z)(function*(b){var T;const{appId:M,apiKey:V}=b,Y={method:"GET",headers:Bf(V)},X=pn.replace("{app-id}",M),Te=yield fetch(X,Y);if(200!==Te.status&&304!==Te.status){let rt="";try{const ut=yield Te.json();null!==(T=ut.error)&&void 0!==T&&T.message&&(rt=ut.error.message)}catch{}throw Cr.create("config-fetch-failed",{httpStatus:Te.status,responseMessage:rt})}return Te.json()})).apply(this,arguments)}function Ho(){return(Ho=(0,k.Z)(function*(b,T=Uf,M){const{appId:V,apiKey:Y,measurementId:X}=b.options;if(!V)throw Cr.create("no-app-id");if(!Y){if(X)return{measurementId:X,appId:V};throw Cr.create("no-api-key")}const Te=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},rt=new Jl;return setTimeout((0,k.Z)(function*(){rt.abort()}),void 0!==M?M:Vs),as({appId:V,apiKey:Y,measurementId:X},Te,rt,T)})).apply(this,arguments)}function as(b,T,M){return Go.apply(this,arguments)}function Go(){return Go=(0,k.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:M},V,Y=Uf){var X;const{appId:Te,measurementId:rt}=b;try{yield function us(b,T){return new Promise((M,V)=>{const Y=Math.max(T-Date.now(),0),X=setTimeout(M,Y);b.addEventListener(()=>{clearTimeout(X),V(Cr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(V,T)}catch(ut){if(rt)return Ir.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${rt} provided in the "measurementId" field in the local Firebase config. [${ut?.message}]`),{appId:Te,measurementId:rt};throw ut}try{const ut=yield function Us(b){return Ta.apply(this,arguments)}(b);return Y.deleteThrottleMetadata(Te),ut}catch(ut){const gt=ut;if(!function Xl(b){if(!(b instanceof te.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(gt)){if(Y.deleteThrottleMetadata(Te),rt)return Ir.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${rt} provided in the "measurementId" field in the local Firebase config. [${gt?.message}]`),{appId:Te,measurementId:rt};throw ut}const Ft=503===Number(null===(X=gt?.customData)||void 0===X?void 0:X.httpStatus)?(0,te.$s)(M,Y.intervalMillis,Da):(0,te.$s)(M,Y.intervalMillis),vt={throttleEndTimeMillis:Date.now()+Ft,backoffCount:M+1};return Y.setThrottleMetadata(Te,vt),Ir.debug(`Calling attemptFetch again in ${Ft} millis`),as(b,vt,V,Y)}}),Go.apply(this,arguments)}class Jl{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let mo,cs;function ls(){return(ls=(0,k.Z)(function*(b,T,M,V,Y){if(Y&&Y.global)b("event",M,V);else{const X=yield T;b("event",M,Object.assign(Object.assign({},V),{send_to:X}))}})).apply(this,arguments)}function Ra(){return(Ra=(0,k.Z)(function*(){if(!(0,te.hl)())return Ir.warn(Cr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(b){return Ir.warn(Cr.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})).apply(this,arguments)}function Na(){return Na=(0,k.Z)(function*(b,T,M,V,Y,X,Te){var rt;const ut=function Jn(b){return Ho.apply(this,arguments)}(b);ut.then(Tn=>{M[Tn.measurementId]=Tn.appId,b.options.measurementId&&Tn.measurementId!==b.options.measurementId&&Ir.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Tn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Tn=>Ir.error(Tn)),T.push(ut);const gt=function Ma(){return Ra.apply(this,arguments)}().then(Tn=>{if(Tn)return V.getId()}),[Ft,vt]=yield Promise.all([ut,gt]);(function Vf(b){const T=window.document.getElementsByTagName("script");for(const M of Object.values(T))if(M.src&&M.src.includes(Yl)&&M.src.includes(b))return M;return null})(X)||function Xg(b,T){const M=document.createElement("script");M.src=`${Yl}?l=${b}&id=${T}`,M.async=!0,document.head.appendChild(M)}(X,Ft.measurementId),cs&&(Y("consent","default",cs),function zo(b){cs=b}(void 0)),Y("js",new Date);const qr=null!==(rt=Te?.config)&&void 0!==rt?rt:{};return qr[Wr]="firebase",qr.update=!0,null!=vt&&(qr[Qg]=vt),Y("config",Ft.measurementId,qr),mo&&(Y("set",mo),function nc(b){mo=b}(void 0)),Ft.measurementId}),Na.apply(this,arguments)}class Nd{constructor(T){this.app=T}_delete(){return delete Yi[this.app.options.appId],Promise.resolve()}}let Yi={},Pa=[];const Nu={};let rc,ds,_o="dataLayer",Bs="gtag",yo=!1;function ic(b,T,M){!function $f(){const b=[];if((0,te.ru)()&&b.push("This is a browser extension environment."),(0,te.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((V,Y)=>`(${Y+1}) ${V}`).join(" "),M=Cr.create("invalid-analytics-context",{errorInfo:T});Ir.warn(M.message)}}();const V=b.options.appId;if(!V)throw Cr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Cr.create("no-api-key");Ir.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Yi[V])throw Cr.create("already-exists",{id:V});if(!yo){!function Jg(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(_o);const{wrappedGtag:X,gtagCore:Te}=function $o(b,T,M,V,Y){let X=function(...Te){window[V].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(X=window[Y]),window[Y]=function jo(b,T,M,V){function X(){return X=(0,k.Z)(function*(Te,rt,ut){try{"event"===Te?yield function Ql(b,T,M,V,Y){return ss.apply(this,arguments)}(b,T,M,rt,ut):"config"===Te?yield function Rd(b,T,M,V,Y,X){return go.apply(this,arguments)}(b,T,M,V,rt,ut):"consent"===Te?b("consent","update",ut):b("set",rt)}catch(gt){Ir.error(gt)}}),X.apply(this,arguments)}return function Y(Te,rt,ut){return X.apply(this,arguments)}}(X,b,T,M),{gtagCore:X,wrappedGtag:window[Y]}}(Yi,Pa,Nu,_o,Bs);ds=X,rc=Te,yo=!0}return Yi[V]=function qo(b,T,M,V,Y,X,Te){return Na.apply(this,arguments)}(b,Pa,Nu,T,rc,_o,M),new Nd(b)}function sc(){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,k.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}const hs="@firebase/analytics";!function tm(){(0,ne._registerComponent)(new re.wA(Md,(T,{options:M})=>ic(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ne._registerComponent)(new re.wA("analytics-internal",function b(T){try{const M=T.getProvider(Md).getImmediate();return{logEvent:(V,Y,X)=>function vo(b,T,M,V){b=(0,te.m9)(b),function jf(b,T,M,V,Y){return ls.apply(this,arguments)}(ds,Yi[b.app.options.appId],T,M,V).catch(Y=>Ir.error(Y))}(M,V,Y,X)}}catch(M){throw Cr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ne.registerVersion)(hs,"0.9.4"),(0,ne.registerVersion)(hs,"0.9.4","esm2017")}();var ku=F(4408),Gf=F(7565);const Wf=new class Fd extends Gf.v{}(class Hf extends ku.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,M,V):(T.flush(this),0)}});var Yo=F(4986),oc=F(8505),Fa=F(9468),Gn=F(5363);const Ld=new h.GfV("7.5.0"),wo="__angularfire_symbol__analyticsIsSupportedValue",Vd="__angularfire_symbol__analyticsIsSupported",kr="__angularfire_symbol__remoteConfigIsSupportedValue",fs="__angularfire_symbol__remoteConfigIsSupported",ac="__angularfire_symbol__messagingIsSupportedValue",La="__angularfire_symbol__messagingIsSupported";function zf(b,T,M){if(T){if(1===T.length)return T[0];const X=T.filter(Te=>Te.app===M);if(1===X.length)return X[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[Vd]||(globalThis[Vd]=sc().then(b=>globalThis[wo]=b).catch(()=>globalThis[wo]=!1)),globalThis[La]||(globalThis[La]=Ad().then(b=>globalThis[ac]=b).catch(()=>globalThis[ac]=!1)),globalThis[fs]||(globalThis[fs]=Nr().then(b=>globalThis[kr]=b).catch(()=>globalThis[kr]=!1));const Wt=(b,T)=>{const M=T?[T]:(0,Q.C6)(),V=[];return M.forEach(Y=>{Y.container.getProvider(b).instances.forEach(Te=>{V.includes(Te)||V.push(Te)})}),V};function fr(){}class Ni{constructor(T,M=Wf){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,V){const Y=this.zone;return this.delegate.schedule(function(Te){Y.runGuarded(()=>{T.apply(this,[Te])})},M,V)}}class im{constructor(T){this.zone=T,this.task=null}call(T,M){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fr,{},fr,fr)),M.pipe((0,oc.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ud=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Ni(Zone.current)),this.insideAngular=M.run(()=>new Ni(Zone.current,Yo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(h.LFG(h.R0b))},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function ps(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Fn(b){return ps(),function dt(b){return function(M){return(M=M.lift(new im(b.ngZone))).pipe((0,Fa.R)(b.outsideAngular),(0,Gn.Q)(b.insideAngular))}}(ps())(b)}},2090:(lt,Ee,F)=>{F.d(Ee,{$s:()=>bt,BH:()=>Ae,DV:()=>$r,Dv:()=>$n,G6:()=>xe,GJ:()=>Rs,L:()=>ae,LL:()=>wt,Pz:()=>ve,Sg:()=>Ve,UG:()=>_e,UI:()=>wn,US:()=>re,Wj:()=>No,Wl:()=>jn,Yr:()=>ye,ZB:()=>K,ZR:()=>un,aH:()=>Ie,b$:()=>ct,cI:()=>xt,dS:()=>Bi,eu:()=>je,g5:()=>k,gK:()=>Ar,gQ:()=>Os,h$:()=>le,hl:()=>ke,hu:()=>Q,jU:()=>Ue,lb:()=>cn,m9:()=>Mr,ne:()=>Pt,p$:()=>G,pd:()=>Sr,r3:()=>di,ru:()=>We,tV:()=>H,uI:()=>j,ug:()=>Qt,vZ:()=>ei,w1:()=>se,w9:()=>Jr,xO:()=>xi,xb:()=>Ns,z$:()=>Pe,zI:()=>Qe,zd:()=>xn});const h={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Q=function($,U){if(!$)throw k(U)},k=function($){return new Error("Firebase Database ("+h.SDK_VERSION+") INTERNAL ASSERT FAILED: "+$)},ne=function($){const U=[];let z=0;for(let pe=0;pe<$.length;pe++){let ee=$.charCodeAt(pe);ee<128?U[z++]=ee:ee<2048?(U[z++]=ee>>6|192,U[z++]=63&ee|128):55296==(64512&ee)&&pe+1<$.length&&56320==(64512&$.charCodeAt(pe+1))?(ee=65536+((1023&ee)<<10)+(1023&$.charCodeAt(++pe)),U[z++]=ee>>18|240,U[z++]=ee>>12&63|128,U[z++]=ee>>6&63|128,U[z++]=63&ee|128):(U[z++]=ee>>12|224,U[z++]=ee>>6&63|128,U[z++]=63&ee|128)}return U},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,U){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[];for(let ee=0;ee<$.length;ee+=3){const Xe=$[ee],ze=ee+1<$.length,gn=ze?$[ee+1]:0,Mn=ee+2<$.length,Pn=Mn?$[ee+2]:0;let Gr=(15&gn)<<2|Pn>>6,$i=63&Pn;Mn||($i=64,ze||(Gr=64)),pe.push(z[Xe>>2],z[(3&Xe)<<4|gn>>4],z[Gr],z[$i])}return pe.join("")},encodeString($,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa($):this.encodeByteArray(ne($),U)},decodeString($,U){return this.HAS_NATIVE_SUPPORT&&!U?atob($):function($){const U=[];let z=0,pe=0;for(;z<$.length;){const ee=$[z++];if(ee<128)U[pe++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const Xe=$[z++];U[pe++]=String.fromCharCode((31&ee)<<6|63&Xe)}else if(ee>239&&ee<365){const Mn=((7&ee)<<18|(63&$[z++])<<12|(63&$[z++])<<6|63&$[z++])-65536;U[pe++]=String.fromCharCode(55296+(Mn>>10)),U[pe++]=String.fromCharCode(56320+(1023&Mn))}else{const Xe=$[z++],ze=$[z++];U[pe++]=String.fromCharCode((15&ee)<<12|(63&Xe)<<6|63&ze)}}return U.join("")}(this.decodeStringToByteArray($,U))},decodeStringToByteArray($,U){this.init_();const z=U?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[];for(let ee=0;ee<$.length;){const Xe=z[$.charAt(ee++)],gn=ee<$.length?z[$.charAt(ee)]:0;++ee;const Pn=ee<$.length?z[$.charAt(ee)]:64;++ee;const Ot=ee<$.length?z[$.charAt(ee)]:64;if(++ee,null==Xe||null==gn||null==Pn||null==Ot)throw new he;pe.push(Xe<<2|gn>>4),64!==Pn&&(pe.push(gn<<4&240|Pn>>2),64!==Ot&&pe.push(Pn<<6&192|Ot))}return pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class he extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const le=function($){const U=ne($);return re.encodeByteArray(U,!0)},ae=function($){return le($).replace(/\./g,"")},H=function($){try{return re.decodeString($,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function G($){return K(void 0,$)}function K($,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return U}for(const z in U)!U.hasOwnProperty(z)||!Be(z)||($[z]=K($[z],U[z]));return $}function Be($){return"__proto__"!==$}const be=()=>{try{return function Ce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=$&&H($[1]);return U&&JSON.parse(U)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},Ie=()=>{var $;return null===($=be())||void 0===$?void 0:$.config},ve=$=>{var U;return null===(U=be())||void 0===U?void 0:U[`_${$}`]};class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,z)=>{this.resolve=U,this.reject=z})}wrapCallback(U){return(z,pe)=>{z?this.reject(z):this.resolve(pe),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(z):U(z,pe))}}}function Ve($,U){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pe=U||"demo-project",ee=$.iat||0,Xe=$.sub||$.user_id;if(!Xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ze=Object.assign({iss:`https://securetoken.google.com/${pe}`,aud:pe,iat:ee,exp:ee+3600,auth_time:ee,sub:Xe,user_id:Xe,firebase:{sign_in_provider:"custom",identities:{}}},$);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(ze)),""].join(".")}function Pe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function j(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function _e(){var $;const U=null===($=be())||void 0===$?void 0:$.forceEnvironment;if("node"===U)return!0;if("browser"===U)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ue(){return"object"==typeof self&&self.self===self}function We(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function ct(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function se(){const $=Pe();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function ye(){return!0===h.NODE_CLIENT||!0===h.NODE_ADMIN}function xe(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ke(){try{return"object"==typeof indexedDB}catch{return!1}}function je(){return new Promise(($,U)=>{try{let z=!0;const pe="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(pe);ee.onsuccess=()=>{ee.result.close(),z||self.indexedDB.deleteDatabase(pe),$(!0)},ee.onupgradeneeded=()=>{z=!1},ee.onerror=()=>{var Xe;U((null===(Xe=ee.error)||void 0===Xe?void 0:Xe.message)||"")}}catch(z){U(z)}})}function Qe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class un extends Error{constructor(U,z,pe){super(z),this.code=U,this.customData=pe,this.name="FirebaseError",Object.setPrototypeOf(this,un.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wt.prototype.create)}}class wt{constructor(U,z,pe){this.service=U,this.serviceName=z,this.errors=pe}create(U,...z){const pe=z[0]||{},ee=`${this.service}/${U}`,Xe=this.errors[U],ze=Xe?function nn($,U){return $.replace(tt,(z,pe)=>{const ee=U[pe];return null!=ee?String(ee):`<${pe}?>`})}(Xe,pe):"Error";return new un(ee,`${this.serviceName}: ${ze} (${ee}).`,pe)}}const tt=/\{\$([^}]+)}/g;function xt($){return JSON.parse($)}function jn($){return JSON.stringify($)}const _n=function($){let U={},z={},pe={},ee="";try{const Xe=$.split(".");U=xt(H(Xe[0])||""),z=xt(H(Xe[1])||""),ee=Xe[2],pe=z.d||{},delete z.d}catch{}return{header:U,claims:z,data:pe,signature:ee}},Jr=function($){const z=_n($).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},Rs=function($){const U=_n($).claims;return"object"==typeof U&&!0===U.admin};function di($,U){return Object.prototype.hasOwnProperty.call($,U)}function $r($,U){if(Object.prototype.hasOwnProperty.call($,U))return $[U]}function Ns($){for(const U in $)if(Object.prototype.hasOwnProperty.call($,U))return!1;return!0}function wn($,U,z){const pe={};for(const ee in $)Object.prototype.hasOwnProperty.call($,ee)&&(pe[ee]=U.call(z,$[ee],ee,$));return pe}function ei($,U){if($===U)return!0;const z=Object.keys($),pe=Object.keys(U);for(const ee of z){if(!pe.includes(ee))return!1;const Xe=$[ee],ze=U[ee];if(ft(Xe)&&ft(ze)){if(!ei(Xe,ze))return!1}else if(Xe!==ze)return!1}for(const ee of pe)if(!z.includes(ee))return!1;return!0}function ft($){return null!==$&&"object"==typeof $}function xi($){const U=[];for(const[z,pe]of Object.entries($))Array.isArray(pe)?pe.forEach(ee=>{U.push(encodeURIComponent(z)+"="+encodeURIComponent(ee))}):U.push(encodeURIComponent(z)+"="+encodeURIComponent(pe));return U.length?"&"+U.join("&"):""}function xn($){const U={};return $.replace(/^\?/,"").split("&").forEach(pe=>{if(pe){const[ee,Xe]=pe.split("=");U[decodeURIComponent(ee)]=decodeURIComponent(Xe)}}),U}function Sr($){const U=$.indexOf("?");if(!U)return"";const z=$.indexOf("#",U);return $.substring(U,z>0?z:void 0)}class Os{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let U=1;U<this.blockSize;++U)this.pad_[U]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(U,z){z||(z=0);const pe=this.W_;if("string"==typeof U)for(let Ot=0;Ot<16;Ot++)pe[Ot]=U.charCodeAt(z)<<24|U.charCodeAt(z+1)<<16|U.charCodeAt(z+2)<<8|U.charCodeAt(z+3),z+=4;else for(let Ot=0;Ot<16;Ot++)pe[Ot]=U[z]<<24|U[z+1]<<16|U[z+2]<<8|U[z+3],z+=4;for(let Ot=16;Ot<80;Ot++){const Gr=pe[Ot-3]^pe[Ot-8]^pe[Ot-14]^pe[Ot-16];pe[Ot]=4294967295&(Gr<<1|Gr>>>31)}let Pn,ir,ee=this.chain_[0],Xe=this.chain_[1],ze=this.chain_[2],gn=this.chain_[3],Mn=this.chain_[4];for(let Ot=0;Ot<80;Ot++){Ot<40?Ot<20?(Pn=gn^Xe&(ze^gn),ir=1518500249):(Pn=Xe^ze^gn,ir=1859775393):Ot<60?(Pn=Xe&ze|gn&(Xe|ze),ir=2400959708):(Pn=Xe^ze^gn,ir=3395469782);const Gr=(ee<<5|ee>>>27)+Pn+Mn+ir+pe[Ot]&4294967295;Mn=gn,gn=ze,ze=4294967295&(Xe<<30|Xe>>>2),Xe=ee,ee=Gr}this.chain_[0]=this.chain_[0]+ee&4294967295,this.chain_[1]=this.chain_[1]+Xe&4294967295,this.chain_[2]=this.chain_[2]+ze&4294967295,this.chain_[3]=this.chain_[3]+gn&4294967295,this.chain_[4]=this.chain_[4]+Mn&4294967295}update(U,z){if(null==U)return;void 0===z&&(z=U.length);const pe=z-this.blockSize;let ee=0;const Xe=this.buf_;let ze=this.inbuf_;for(;ee<z;){if(0===ze)for(;ee<=pe;)this.compress_(U,ee),ee+=this.blockSize;if("string"==typeof U){for(;ee<z;)if(Xe[ze]=U.charCodeAt(ee),++ze,++ee,ze===this.blockSize){this.compress_(Xe),ze=0;break}}else for(;ee<z;)if(Xe[ze]=U[ee],++ze,++ee,ze===this.blockSize){this.compress_(Xe),ze=0;break}}this.inbuf_=ze,this.total_+=z}digest(){const U=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ee=this.blockSize-1;ee>=56;ee--)this.buf_[ee]=255&z,z/=256;this.compress_(this.buf_);let pe=0;for(let ee=0;ee<5;ee++)for(let Xe=24;Xe>=0;Xe-=8)U[pe]=this.chain_[ee]>>Xe&255,++pe;return U}}function Pt($,U){const z=new yt($,U);return z.subscribe.bind(z)}class yt{constructor(U,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{U(this)}).catch(pe=>{this.error(pe)})}next(U){this.forEachObserver(z=>{z.next(U)})}error(U){this.forEachObserver(z=>{z.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,z,pe){let ee;if(void 0===U&&void 0===z&&void 0===pe)throw new Error("Missing Observer.");ee=function no($,U){if("object"!=typeof $||null===$)return!1;for(const z of U)if(z in $&&"function"==typeof $[z])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:z,complete:pe},void 0===ee.next&&(ee.next=En),void 0===ee.error&&(ee.error=En),void 0===ee.complete&&(ee.complete=En);const Xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch{}}),this.observers.push(ee),Xe}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,U)}sendOne(U,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{z(this.observers[U])}catch(pe){typeof console<"u"&&console.error&&console.error(pe)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function En(){}const $n=function($,U,z,pe){let ee;if(pe<U?ee="at least "+U:pe>z&&(ee=0===z?"none":"no more than "+z),ee)throw new Error($+" failed: Was called with "+pe+(1===pe?" argument.":" arguments.")+" Expects "+ee+".")};function Ar($,U){return`${$} failed: ${U} argument `}function No($,U,z,pe){if((!pe||z)&&"function"!=typeof z)throw new Error(Ar($,U)+"must be a valid function.")}function cn($,U,z,pe){if((!pe||z)&&("object"!=typeof z||null===z))throw new Error(Ar($,U)+"must be a valid context object.")}const Bi=function($){const U=[];let z=0;for(let pe=0;pe<$.length;pe++){let ee=$.charCodeAt(pe);if(ee>=55296&&ee<=56319){const Xe=ee-55296;pe++,Q(pe<$.length,"Surrogate pair missing trail surrogate."),ee=65536+(Xe<<10)+($.charCodeAt(pe)-56320)}ee<128?U[z++]=ee:ee<2048?(U[z++]=ee>>6|192,U[z++]=63&ee|128):ee<65536?(U[z++]=ee>>12|224,U[z++]=ee>>6&63|128,U[z++]=63&ee|128):(U[z++]=ee>>18|240,U[z++]=ee>>12&63|128,U[z++]=ee>>6&63|128,U[z++]=63&ee|128)}return U},Qt=function($){let U=0;for(let z=0;z<$.length;z++){const pe=$.charCodeAt(z);pe<128?U++:pe<2048?U+=2:pe>=55296&&pe<=56319?(U+=4,z++):U+=3}return U},ji=1e3,He=2,we=144e5,nt=.5;function bt($,U=ji,z=He){const pe=U*Math.pow(z,$),ee=Math.round(nt*pe*(Math.random()-.5)*2);return Math.min(we,pe+ee)}function Mr($){return $&&$._delegate?$._delegate:$}},4856:(lt,Ee,F)=>{var h=F(4650);let Q=null;function k(){return Q}class te{}const re=new h.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function le(){return(0,h.LFG)(H)}()},providedIn:"platform"}),n})();const ae=new h.OlP("Location Initialized");let H=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){G()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){G()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function K(){return new H((0,h.LFG)(re))}()},providedIn:"platform"}),n})();function G(){return!!window.history.pushState}function Be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ce(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ge(n){return n&&"?"!==n[0]?"?"+n:n}let ot=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(be)},providedIn:"root"}),n})();const fe=new h.OlP("appBaseHref");let be=(()=>{class n extends ot{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ge(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ge(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ge(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he),h.LFG(fe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),De=(()=>{class n extends ot{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ge(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ge(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he),h.LFG(fe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ve(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ce(Ae(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ge(r))}normalize(t){return n.stripTrailingSlash(function ve(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ae(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ge,n.joinWithSlash=Be,n.stripTrailingSlash=Ce,n.\u0275fac=function(t){return new(t||n)(h.LFG(ot))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ie(){return new Fe((0,h.LFG)(ot))}()},providedIn:"root"}),n})();function Ae(n){return n.replace(/\/index.html$/,"")}class Hi{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Hi(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),io(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{io(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function io(n,e){n.context.$implicit=e.item}let so=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ma,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ht("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ht("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ma{constructor(){this.$implicit=null,this.ngIf=null}}function Ht(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let vu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const gi="server";function Eu(n){return n===gi}let ho=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new va((0,h.LFG)(re),window)}),n})();class va{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Bo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Uo(this.window.history)||Uo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Uo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ss extends te{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class jo extends ss{static makeCurrent(){!function ne(n){Q||(Q=n)}(new jo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Vf(){return $o=$o||document.querySelector("base"),$o?$o.getAttribute("href"):null}();return null==t?null:function Cr(n){os=os||document.createElement("a"),os.setAttribute("href",n);const e=os.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$o=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function mu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let os,$o=null;const Da=new h.OlP("TRANSITION_ID"),Zi=[{provide:h.ip1,useFactory:function Zy(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Da,re,h.zs3],multi:!0}];let Bf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Us=new h.OlP("EventManagerPlugins");let Ta=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Us),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Jn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ho=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let a=i.get(t)??0;return a+=r,a>0?i.set(t,a):i.delete(t),a}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),as=(()=>{class n extends Ho{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(a=>a.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const a=this.styleRef.get(r);a?a.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Go={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},us=/%COMP%/g,Sa=new h.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Aa(n,e){return e.flat(100).map(t=>t.replace(us,n))}function xa(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Wo=(()=>{class n{constructor(t,r,i,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.rendererByCompId=new Map,this.defaultRenderer=new zr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Ra?i.applyToHost(t):i instanceof Ma&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const l=this.eventManager,f=this.sharedStylesHost,_=this.removeStylesOnCompDestory;switch(r.encapsulation){case h.ifc.Emulated:a=new Ra(l,f,r,this.appId,_);break;case h.ifc.ShadowDom:return new nc(l,f,t,r);default:a=new Ma(l,f,r,_)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ta),h.LFG(as),h.LFG(h.AFp),h.LFG(Sa))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class zr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Go[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(zo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(zo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Go[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Go[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xa(r)):this.eventManager.addEventListener(e,t,xa(r))}}function zo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class nc extends zr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Aa(i.id,i.styles);for(const l of a){const f=document.createElement("style");f.textContent=l,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ma extends zr{constructor(e,t,r,i,a=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Aa(a,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ra extends Ma{constructor(e,t,r,i,a){const l=i+"-"+r.id;super(e,t,r,a,l),this.contentAttr=function Ki(n){return"_ngcontent-%COMP%".replace(us,n)}(l),this.hostAttr=function ec(n){return"_nghost-%COMP%".replace(us,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let qo=(()=>{class n extends Jn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Na=["alt","control","meta","shift"],Nd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Pa=(()=>{class n extends Jn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),Na.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),l+=w+".")}),l+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let i=Nd[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Na.forEach(l=>{l!==i&&(0,Yi[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Pu=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function yo(){jo.makeCurrent()},multi:!0},{provide:re,useFactory:function $f(){return(0,h.RDi)(document),document},deps:[]}]),Pd=new h.OlP(""),sc=[{provide:h.rWj,useClass:class Uf{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Zo=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Oa(){return new h.qLn},deps:[]},{provide:Us,useClass:qo,multi:!0,deps:[re,h.R0b,h.Lbi]},{provide:Us,useClass:Pa,multi:!0,deps:[re]},{provide:Wo,useClass:Wo,deps:[Ta,as,h.AFp,Sa]},{provide:h.FYo,useExisting:Wo},{provide:Ho,useExisting:as},{provide:as,useClass:as,deps:[re]},{provide:Ta,useClass:Ta,deps:[Us,h.R0b]},{provide:class Fl{},useClass:Bf,deps:[]},[]];let ka=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Da,useExisting:h.AFp},Zi]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Pd,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Zo,...sc],imports:[vu,h.hGG]}),n})(),vo=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Od(){return new vo((0,h.LFG)(re))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Wt=F(8996),fr=F(9751);const{isArray:Ni}=Array,{getPrototypeOf:im,prototype:Ud,keys:ps}=Object;function Fu(n){if(1===n.length){const e=n[0];if(Ni(e))return{args:e,keys:null};if(function gs(n){return n&&"object"==typeof n&&im(n)===Ud}(e)){const t=ps(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Lu=F(8421),$s=F(7669),Fn=F(5403),dt=F(4004);const{isArray:Vu}=Array;function b(n){return(0,dt.U)(e=>function Bd(n,e){return Vu(e)?n(...e):n(e)}(n,e))}function T(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let V=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Y=(()=>{class n extends V{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const X=new h.OlP("NgValueAccessor"),ut={provide:X,useExisting:(0,h.Gpc)(()=>vt),multi:!0},Ft=new h.OlP("CompositionEventMode");let vt=(()=>{class n extends V{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function gt(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Ft,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[h._Bn([ut]),h.qOj]}),n})();const qr=!1,er=new h.OlP("NgValidators"),mi=new h.OlP("NgAsyncValidators");function cc(n){return null!=n}function $d(n){const e=(0,h.QGY)(n)?(0,Wt.D)(n):n;if(qr&&!(0,h.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new h.vHH(-1101,t)}return e}function Xy(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Jy(n,e){return e.map(t=>t(n))}function ev(n){return n.map(e=>function Kf(n){return!n.validate}(e)?e:t=>e.validate(t))}function am(n){return null!=n?function tv(n){if(!n)return null;const e=n.filter(cc);return 0==e.length?null:function(t){return Xy(Jy(t,e))}}(ev(n)):null}function Hd(n){return null!=n?function nv(n){if(!n)return null;const e=n.filter(cc);return 0==e.length?null:function(t){return function M(...n){const e=(0,$s.jO)(n),{args:t,keys:r}=Fu(n),i=new fr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let _=l,w=l;for(let D=0;D<l;D++){let x=!1;(0,Lu.Xf)(t[D]).subscribe((0,Fn.x)(a,P=>{x||(x=!0,w--),f[D]=P},()=>_--,void 0,()=>{(!_||!x)&&(w||a.next(r?T(r,f):f),a.complete())}))}});return e?i.pipe(b(e)):i}(Jy(t,e).map($d)).pipe((0,dt.U)(Xy))}}(ev(n)):null}function um(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Wd(n){return n?Array.isArray(n)?n:[n]:[]}function dc(n,e){return Array.isArray(n)?n.includes(e):n===e}function zd(n,e){const t=Wd(e);return Wd(n).forEach(i=>{dc(t,i)||t.push(i)}),t}function ms(n,e){return Wd(e).filter(t=>!dc(n,t))}class lm{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=am(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Hd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class oi extends lm{get formDirective(){return null}get path(){return null}}class Qo extends lm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class hc{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Qf=(()=>{class n extends hc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Qo,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),Xf=(()=>{class n extends hc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(oi,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();function Xo(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const Jf=!1,Ua="VALID",Bu="INVALID",Jo="PENDING",Ba="DISABLED";function ja(n){return(ju(n)?n.validators:n)||null}function fc(n,e){return(ju(e)?e.asyncValidators:n)||null}function ju(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Qd{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ua}get invalid(){return this.status===Bu}get pending(){return this.status==Jo}get disabled(){return this.status===Ba}get enabled(){return this.status!==Ba}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(zd(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(zd(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ms(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ms(e,this._rawAsyncValidators))}hasValidator(e){return dc(this._rawValidators,e)}hasAsyncValidator(e){return dc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Jo,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ba,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ua,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ua||this.status===Jo)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ba:Ua}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Jo,this._hasOwnPendingAsyncValidator=!0;const t=$d(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Ba:this.errors?Bu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jo)?Jo:this._anyControlsHaveStatus(Bu)?Bu:Ua}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ju(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function uv(n){return Array.isArray(n)?am(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function ep(n){return Array.isArray(n)?Hd(n):n||null}(this._rawAsyncValidators)}}class pc extends Qd{constructor(e,t,r){super(ja(t),fc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function $a(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,Jf?function Yd(n,e){return`Must supply a value for form control ${Xo(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function tp(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,Jf?function pm(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new h.vHH(1001,Jf?function av(n,e){return`Cannot find form control ${Xo(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const ea=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Xd}),Xd="always";function ta(n,e,t=Xd){Hu(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function cv(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&np(n,e)})}(n,e),function _s(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function vm(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&np(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ym(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function $u(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Hu(n,e){const t=function Yf(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(um(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Gd(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(um(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();$u(e._rawValidators,i),$u(e._rawAsyncValidators,i)}function np(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const _i={provide:oi,useExisting:(0,h.Gpc)(()=>Ha)},ys=(()=>Promise.resolve())();let Ha=(()=>{class n extends oi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new pc({},am(t),Hd(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ys.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ta(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ys.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ys.then(()=>{const r=this._findContainer(t.path),i=new pc({});(function rp(n,e){Hu(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ys.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ys.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function mc(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(er,10),h.Y36(mi,10),h.Y36(ea,8))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([_i]),h.qOj]}),n})();function rh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function na(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ih=class extends Qd{constructor(e=null,t,r){super(ja(t),fc(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ju(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=na(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){rh(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){rh(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){na(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},yi={provide:Qo,useExisting:(0,h.Gpc)(()=>_c)},sh=(()=>Promise.resolve())();let _c=(()=>{class n extends Qo{constructor(t,r,i,a,l,f){super(),this._changeDetectorRef=l,this.callSetDisabledState=f,this.control=new ih,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function nh(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===vt?t=a:function th(n){return Object.getPrototypeOf(n.constructor)===Y}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Wu(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ta(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){sh.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,h.D6c)(r);sh.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Jd(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(oi,9),h.Y36(er,10),h.Y36(mi,10),h.Y36(X,10),h.Y36(h.sBO,8),h.Y36(ea,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([yi]),h.qOj,h.TTD]}),n})(),bm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),ah=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),PE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[ah]}),n})(),gv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ea,useValue:t.callSetDisabledState??Xd}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[PE]}),n})();function mt(...n){const e=(0,$s.yG)(n);return(0,Wt.D)(n,e)}var Wa=F(7579);class ia extends Wa.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const pp=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ec=F(4671),mv=F(9672);function aT(...n){const e=(0,$s.yG)(n),t=(0,$s.jO)(n),{args:r,keys:i}=Fu(n);if(0===r.length)return(0,Wt.D)([],e);const a=new fr.y(function _v(n,e,t=Ec.y){return r=>{OE(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let _=0;_<i;_++)OE(e,()=>{const w=(0,Wt.D)(n[_],e);let D=!1;w.subscribe((0,Fn.x)(r,x=>{a[_]=x,D||(D=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>T(i,l):Ec.y));return t?a.pipe(b(t)):a}function OE(n,e,t){n?(0,mv.f)(t,n,e):e()}var Ic=F(8189);function Nm(...n){return function kE(){return(0,Ic.J)(1)}()((0,Wt.D)(n,(0,$s.yG)(n)))}function Qu(n){return new fr.y(e=>{(0,Lu.Xf)(n()).subscribe(e)})}var uT=F(9635),gp=F(576);function Xu(n,e){const t=(0,gp.m)(n)?n:()=>n,r=i=>i.error(t());return new fr.y(e?i=>e.schedule(r,0,i):r)}var Ju=F(515),Pm=F(727),br=F(4482);function za(){return(0,br.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Fn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class yv extends fr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,br.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pm.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Fn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pm.w0.EMPTY)}return e}refCount(){return za()(this)}}function gr(n,e){return(0,br.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,Fn.x)(r,_=>{i?.unsubscribe();let w=0;const D=a++;(0,Lu.Xf)(n(_,D)).subscribe(i=(0,Fn.x)(r,x=>r.next(e?e(_,x,D,w++):x),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function mp(n){return n<=0?()=>Ju.E:(0,br.e)((e,t)=>{let r=0;e.subscribe((0,Fn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Om(...n){const e=(0,$s.yG)(n);return(0,br.e)((t,r)=>{(e?Nm(n,t,e):Nm(n,t)).subscribe(r)})}function Ws(n,e){return(0,br.e)((t,r)=>{let i=0;t.subscribe((0,Fn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Dr=F(5577);function km(n){return(0,br.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function FE(n=lT){return(0,br.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function lT(){return new pp}function Io(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ws((i,a)=>n(i,a,r)):Ec.y,mp(1),t?km(e):FE(()=>new pp))}function Cc(n,e){return(0,gp.m)(e)?(0,Dr.z)(n,e,1):(0,Dr.z)(n,1)}var ui=F(8505);function el(n){return(0,br.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Fn.x)(t,void 0,void 0,l=>{a=(0,Lu.Xf)(n(l,el(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function ch(n,e){return(0,br.e)(function LE(n,e,t,r,i){return(a,l)=>{let f=t,_=e,w=0;a.subscribe((0,Fn.x)(l,D=>{const x=w++;_=f?n(_,D,x):(f=!0,D),r&&l.next(_)},i&&(()=>{f&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function vv(n){return n<=0?()=>Ju.E:(0,br.e)((e,t)=>{let r=[];e.subscribe((0,Fn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function dh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ws((i,a)=>n(i,a,r)):Ec.y,vv(1),t?km(e):FE(()=>new pp))}function bc(n){return(0,br.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const zt="primary",fh=Symbol("RouteTitle");class dT{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ph(n){return new dT(n)}function hT(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Co(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Fm(n[i],e[i]))return!1;return!0}function Fm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Lm(n){return Array.prototype.concat.apply([],n)}function UE(n){return n.length>0?n[n.length-1]:null}function mr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function tl(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Wt.D)(Promise.resolve(n)):mt(n)}const Vm=!1,fT={exact:function HE(n,e,t){if(!nl(n.segments,e.segments)||!Um(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!HE(n.children[r],e.children[r],t))return!1;return!0},subset:sa},jE={exact:function pT(n,e){return Co(n,e)},subset:function gh(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Fm(n[t],e[t]))},ignored:()=>!0};function $E(n,e,t){return fT[t.paths](n.root,e.root,t.matrixParams)&&jE[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function sa(n,e,t){return GE(n,e,e.segments,t)}function GE(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!nl(i,t)||e.hasChildren()||!Um(i,t,r))}if(n.segments.length===t.length){if(!nl(n.segments,t)||!Um(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!sa(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(nl(n.segments,i)&&Um(n.segments,i,r)&&n.children[zt])&&GE(n.children[zt],e,a,r)}}function Um(n,e,t){return e.every((r,i)=>jE[t](n[i].parameters,r.parameters))}class Dc{constructor(e=new Jt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ph(this.queryParams)),this._queryParamMap}toString(){return gT.serialize(this)}}class Jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,mr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jm(this)}}class mh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ph(this.parameters)),this._parameterMap}toString(){return Ev(this)}}function nl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let _p=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new Bm},providedIn:"root"}),n})();class Bm{parse(e){const t=new ET(e);return new Dc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Oi(e.root,!0)}`,r=function yT(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${yp(t)}=${yp(i)}`).join("&"):`${yp(t)}=${yp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function mT(n){return encodeURI(n)}(e.fragment)}`:""}`}}const gT=new Bm;function jm(n){return n.segments.map(e=>Ev(e)).join("/")}function Oi(n,e){if(!n.hasChildren())return jm(n);if(e){const t=n.children[zt]?Oi(n.children[zt],!1):"",r=[];return mr(n.children,(i,a)=>{a!==zt&&r.push(`${a}:${Oi(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function WE(n,e){let t=[];return mr(n.children,(r,i)=>{i===zt&&(t=t.concat(e(r,i)))}),mr(n.children,(r,i)=>{i!==zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===zt?[Oi(n.children[zt],!1)]:[`${i}:${Oi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${jm(n)}/${t[0]}`:`${jm(n)}/(${t.join("//")})`}}function zE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yp(n){return zE(n).replace(/%3B/gi,";")}function wv(n){return zE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $m(n){return decodeURIComponent(n)}function qE(n){return $m(n.replace(/\+/g,"%20"))}function Ev(n){return`${wv(n.path)}${function _T(n){return Object.keys(n).map(e=>`;${wv(e)}=${wv(n[e])}`).join("")}(n.parameters)}`}const vT=/^[^\/()?;=#]+/;function Lt(n){const e=n.match(vT);return e?e[0]:""}const ZE=/^[^=?&#]+/,YE=/^[^&#]+/;class ET{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new Jt(e,t)),r}parseSegment(){const e=Lt(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,Vm);return this.capture(e),new mh($m(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Lt(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Lt(this.remaining);i&&(r=i,this.capture(r))}e[$m(t)]=$m(r)}parseQueryParam(e){const t=function KE(n){const e=n.match(ZE);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function wT(n){const e=n.match(YE);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=qE(t),a=qE(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lt(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,Vm);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=zt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[zt]:new Jt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,Vm)}}function Hm(n){return n.segments.length>0?new Jt([],{[zt]:n}):n}function Gm(n){const e={};for(const r of Object.keys(n.children)){const a=Gm(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function QE(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new Jt(n.segments.concat(e.segments),e.children)}return n}(new Jt(n.segments,e))}function Tc(n){return n instanceof Dc}const Iv=!1;function Sc(n,e,t,r,i){if(0===t.length)return rl(e.root,e.root,e.root,r,i);const a=function CT(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new IT(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return mr(a.outlets,(_,w)=>{f[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new IT(t,e,r)}(t);return a.toRoot()?rl(e.root,e.root,new Jt([],{}),r,i):function l(_){const w=function JE(n,e,t,r){if(n.isAbsolute)return new wp(e.root,!0,0);if(-1===r)return new wp(t,t===e.root,0);return function DT(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new h.vHH(4005,Iv&&"Invalid number of '../'");i=r.segments.length}return new wp(r,!1,i-a)}(t,r+(vp(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),D=w.processChildren?_h(w.segmentGroup,w.index,a.commands):il(w.segmentGroup,w.index,a.commands);return rl(e.root,w.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function vp(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ac(n){return"object"==typeof n&&null!=n&&n.outlets}function rl(n,e,t,r,i){let l,a={};r&&mr(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(D=>`${D}`):`${_}`}),l=n===e?t:XE(n,e,t);const f=Hm(Gm(l));return new Dc(f,a,i)}function XE(n,e,t){const r={};return mr(n.children,(i,a)=>{r[a]=i===e?t:XE(i,e,t)}),new Jt(n.segments,r)}class IT{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&vp(r[0]))throw new h.vHH(4003,Iv&&"Root segment cannot have matrix parameters");const i=r.find(Ac);if(i&&i!==UE(r))throw new h.vHH(4004,Iv&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function il(n,e,t){if(n||(n=new Jt([],{})),0===n.segments.length&&n.hasChildren())return _h(n,e,t);const r=function eI(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(Ac(f))break;const _=`${f}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!tI(_,w,l))return a;r+=2}else{if(!tI(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Jt(n.segments.slice(0,r.pathIndex),{});return a.children[zt]=new Jt(n.segments.slice(r.pathIndex),n.children),_h(a,0,i)}return r.match&&0===i.length?new Jt(n.segments,{}):r.match&&!n.hasChildren()?yh(n,e,t):r.match?_h(n,0,i):yh(n,e,t)}function _h(n,e,t){if(0===t.length)return new Jt(n.segments,{});{const r=function TT(n){return Ac(n[0])?n[0].outlets:{[zt]:n}}(t),i={};return!r[zt]&&n.children[zt]&&1===n.numberOfChildren&&0===n.children[zt].segments.length?_h(n.children[zt],e,t):(mr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=il(n.children[l],e,a))}),mr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Jt(n.segments,i))}}function yh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Ac(a)){const _=ST(a.outlets);return new Jt(r,_)}if(0===i&&vp(t[0])){r.push(new mh(n.segments[e].path,Dv(t[0]))),i++;continue}const l=Ac(a)?a.outlets[zt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&vp(f)?(r.push(new mh(l,Dv(f))),i+=2):(r.push(new mh(l,{})),i++)}return new Jt(r,{})}function ST(n){const e={};return mr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=yh(new Jt([],{}),0,t))}),e}function Dv(n){const e={};return mr(n,(t,r)=>e[r]=`${t}`),e}function tI(n,e,t){return n==t.path&&Co(e,t.parameters)}const Ep="imperative";class oa{constructor(e,t){this.id=e,this.url=t}}class Tv extends oa{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xc extends oa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ip extends oa{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wm extends oa{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class zm extends oa{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nI extends oa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sv extends oa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gN extends oa{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Av extends oa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AT extends oa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mN{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vh{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rI{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xT{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iI{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class MT{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sI{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let xv=(()=>{class n{createUrlTree(t,r,i,a,l,f){return Sc(t||r.root,i,a,l,f)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Mv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(e){return xv.\u0275fac(e)},providedIn:"root"}),n})();class bp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Zm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Zm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Dp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Dp(e,this._root).map(t=>t.value)}}function Zm(n,e){if(n===e.value)return e;for(const t of e.children){const r=Zm(n,t);if(r)return r}return null}function Dp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Dp(n,t);if(r.length)return r.unshift(e),r}return[]}class bo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function sl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Rv extends bp{constructor(e,t){super(e),this.snapshot=t,Ov(this,e)}toString(){return this.snapshot.toString()}}function Km(n,e){const t=function RT(n,e){const l=new Tp([],{},{},"",{},zt,e,null,n.root,-1,{});return new Pv("",new bo(l,[]))}(n,e),r=new ia([new mh("",{})]),i=new ia({}),a=new ia({}),l=new ia({}),f=new ia(""),_=new Mc(r,i,l,f,a,zt,e,t.root);return _.snapshot=t.root,new Rv(new bo(_,[]),t)}class Mc{constructor(e,t,r,i,a,l,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.title=this.data?.pipe((0,dt.U)(w=>w[fh]))??mt(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dt.U)(e=>ph(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dt.U)(e=>ph(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Nv(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function NT(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Tp{get title(){return this.data?.[fh]}constructor(e,t,r,i,a,l,f,_,w,D,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=D,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ph(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ph(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Pv extends bp{constructor(e,t){super(t),this.url=e,Ov(this,t)}toString(){return oI(this._root)}}function Ov(n,e){e.value._routerState=n,e.children.forEach(t=>Ov(n,t))}function oI(n){const e=n.children.length>0?` { ${n.children.map(oI).join(", ")} } `:"";return`${n.value}${e}`}function ki(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Co(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Co(e.params,t.params)||n.params.next(t.params),function VE(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Co(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Co(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ym(n,e){const t=Co(n.params,e.params)&&function pN(n,e){return nl(n,e)&&n.every((t,r)=>Co(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ym(n.parent,e.parent))}function Qm(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function kv(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Qm(n,r,i);return Qm(n,r)})}(n,e,t);return new bo(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>Qm(n,f)),l}}const r=function aI(n){return new Mc(new ia(n.url),new ia(n.params),new ia(n.queryParams),new ia(n.fragment),new ia(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Qm(n,a));return new bo(r,i)}}const Fv="ngNavigationCancelingError";function uI(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Tc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=lI(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function lI(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Fv]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Lv(n){return cI(n)&&Tc(n.url)}function cI(n){return n&&n[Fv]}class OT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Rc,this.attachRef=null}}let Rc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new OT,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xm=!1;let Vv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=zt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(Rc),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,Xm);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,Xm);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,Xm);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,Xm);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,_=new kT(t,f,i.injector);if(r&&function FT(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(l);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(l,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class kT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Mc?this.route:e===Rc?this.childContexts:this.parent.get(e,t)}}let Uv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Vv],encapsulation:2}),n})();function Do(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function $v(n){const e=n.children&&n.children.map($v),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=Uv),t}function zs(n){return n.outlet||zt}function Sp(n,e){const t=n.filter(r=>zs(r)===e);return t.push(...n.filter(r=>zs(r)!==e)),t}function Nc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class vN{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ki(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=sl(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),mr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=sl(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=sl(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=sl(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new MT(a.value.snapshot))}),e.children.length&&this.forwardEvent(new xT(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(ki(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),ki(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=Nc(i.snapshot),_=f?.get(h._Vd)??null;l.attachRef=null,l.route=i,l.resolver=_,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class e_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Hv{constructor(e,t){this.component=e,this.route=t}}function hI(n,e,t){const r=n._root;return Eh(r,e?e._root:null,t,[r.value])}function Pc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function Eh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=sl(e);return n.children.forEach(l=>{(function Gv(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function qa(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!nl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!nl(n.url,e.url)||!Co(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ym(n,e)||!Co(n.queryParams,e.queryParams);default:return!Ym(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new e_(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Eh(n,e,a.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Hv(f.outlet.component,l))}else l&&ol(e,f,i),i.canActivateChecks.push(new e_(r)),Eh(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),mr(a,(l,f)=>ol(l,t.getContext(f),i)),i}function ol(n,e,t){const r=sl(n),i=n.value;mr(r,(a,l)=>{ol(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Hv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function al(n){return"function"==typeof n}function mI(n){return n instanceof pp||"EmptyError"===n?.name}const n_=Symbol("INITIAL_VALUE");function Ih(){return gr(n=>aT(n.map(e=>e.pipe(mp(1),Om(n_)))).pipe((0,dt.U)(e=>{for(const t of e)if(!0!==t){if(t===n_)return n_;if(!1===t||t instanceof Dc)return t}return!0}),Ws(e=>e!==n_),mp(1)))}function yI(n){return(0,uT.z)((0,ui.b)(e=>{if(Tc(e))throw uI(0,e)}),(0,dt.U)(e=>!0===e))}const qv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vI(n,e,t,r,i){const a=Zv(n,e,t);return a.matched?function YT(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?mt(i.map(l=>{const f=Pc(l,n);return tl(function $T(n){return n&&al(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Ih(),yI()):mt(!0)}(r=Do(e,r),e,t).pipe((0,dt.U)(l=>!0===l?a:{...qv})):mt(a)}function Zv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...qv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||hT)(t,n,e);if(!i)return{...qv};const a={};mr(i.posParams,(f,_)=>{a[_]=f.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function r_(n,e,t,r){if(t.length>0&&function EI(n,e,t){return t.some(r=>Kv(n,e,r)&&zs(r)!==zt)}(n,t,r)){const a=new Jt(e,function wI(n,e,t,r){const i={};i[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&zs(a)!==zt){const l=new Jt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[zs(a)]=l}return i}(n,e,r,new Jt(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function XT(n,e,t){return t.some(r=>Kv(n,e,r))}(n,t,r)){const a=new Jt(n.segments,function QT(n,e,t,r,i){const a={};for(const l of r)if(Kv(n,t,l)&&!i[zs(l)]){const f=new Jt([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[zs(l)]=f}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new Jt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Kv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Yv(n,e,t,r){return!!(zs(n)===r||r!==zt&&Kv(e,t,n))&&("**"===n.path||Zv(e,n,t).matched)}function JT(n,e,t){return 0===e.length&&!n.children[t]}const Oc=!1;class i_{constructor(e){this.segmentGroup=e||null}}class II{constructor(e){this.urlTree=e}}function kc(n){return Xu(new i_(n))}function CI(n){return Xu(new II(n))}class Fc{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=r_(this.urlTree.root,[],[],this.config).segmentGroup,t=new Jt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,zt).pipe((0,dt.U)(a=>this.createUrlTree(Gm(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(el(a=>{if(a instanceof II)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof i_?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,zt).pipe((0,dt.U)(i=>this.createUrlTree(Gm(i),e.queryParams,e.fragment))).pipe(el(i=>{throw i instanceof i_?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,Oc)}createUrlTree(e,t,r){const i=Hm(e);return new Dc(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,dt.U)(a=>new Jt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Wt.D)(i).pipe(Cc(a=>{const l=r.children[a],f=Sp(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,dt.U)(_=>({segment:_,outlet:a})))}),ch((a,l)=>(a[l.outlet]=l.segment,a),{}),dh())}expandSegment(e,t,r,i,a,l){return(0,Wt.D)(r).pipe(Cc(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(el(w=>{if(w instanceof i_)return mt(null);throw w}))),Io(f=>!!f),el((f,_)=>{if(mI(f))return JT(t,i,a)?mt(new Jt([],{})):kc(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return Yv(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):kc(t):kc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?CI(a):this.lineralizeSegments(r,a).pipe((0,Dr.z)(l=>{const f=new Jt(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:_,remainingSegments:w,positionalParamSegments:D}=Zv(t,i,a);if(!f)return kc(t);const x=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?CI(x):this.lineralizeSegments(i,x).pipe((0,Dr.z)(P=>this.expandSegment(e,t,r,P.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=Do(r,e),r.loadChildren?(r._loadedRoutes?mt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,dt.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new Jt(i,{})))):mt(new Jt(i,{}))):vI(t,r,i,e).pipe(gr(({matched:l,consumedSegments:f,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Dr.z)(D=>{const x=D.injector??e,P=D.routes,{segmentGroup:B,slicedSegments:Z}=r_(t,f,_,P),ce=new Jt(B.segments,B.children);if(0===Z.length&&ce.hasChildren())return this.expandChildren(x,P,ce).pipe((0,dt.U)(It=>new Jt(f,It)));if(0===P.length&&0===Z.length)return mt(new Jt(f,{}));const Me=zs(r)===a;return this.expandSegment(x,ce,P,Z,Me?zt:a,!0).pipe((0,dt.U)(Bt=>new Jt(f.concat(Bt.segments),Bt.children)))})):kc(t)))}getChildConfig(e,t,r){return t.children?mt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?mt({routes:t._loadedRoutes,injector:t._loadedInjector}):function zv(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?mt(!0):mt(i.map(l=>{const f=Pc(l,n);return tl(function BT(n){return n&&al(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Ih(),yI())}(e,t,r).pipe((0,Dr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,ui.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function xp(n){return Xu(lI(Oc,3))}())):mt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return mt(r);if(i.numberOfChildren>1||!i.children[zt])return e.redirectTo,Xu(new h.vHH(4e3,Oc));i=i.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Dc(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return mr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return mr(t.children,(f,_)=>{l[_]=this.createSegmentGroup(e,f,r,i)}),new Jt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,Oc);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Qv{}class Dh{constructor(e,t,r,i,a,l,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.urlSerializer=f}recognize(){const e=r_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,zt).pipe((0,dt.U)(t=>{if(null===t)return null;const r=new Tp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new bo(r,t),a=new Pv(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Nv(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Wt.D)(Object.keys(r.children)).pipe(Cc(i=>{const a=r.children[i],l=Sp(t,i);return this.processSegmentGroup(e,l,a,i)}),ch((i,a)=>i&&a?(i.push(...a),i):null),function cT(n,e=!1){return(0,br.e)((t,r)=>{let i=0;t.subscribe((0,Fn.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),km(null),dh(),(0,dt.U)(i=>{if(null===i)return null;const a=Lc(i);return function Th(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Wt.D)(t).pipe(Cc(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),Io(l=>!!l),el(l=>{if(mI(l))return JT(r,i,a)?mt([]):mt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!Yv(t,r,i,a))return mt(null);let l;if("**"===t.path){const f=i.length>0?UE(i).parameters:{},_=Xv(r)+i.length;l=mt({snapshot:new Tp(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Jv(t),zs(t),t.component??t._loadedComponent??null,t,Vc(r),_,ew(t)),consumedSegments:[],remainingSegments:[]})}else l=vI(r,t,i,e).pipe((0,dt.U)(({matched:f,consumedSegments:_,remainingSegments:w,parameters:D})=>{if(!f)return null;const x=Xv(r)+_.length;return{snapshot:new Tp(_,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Jv(t),zs(t),t.component??t._loadedComponent??null,t,Vc(r),x,ew(t)),consumedSegments:_,remainingSegments:w}}));return l.pipe(gr(f=>{if(null===f)return mt(null);const{snapshot:_,consumedSegments:w,remainingSegments:D}=f;e=t._injector??e;const x=t._loadedInjector??e,P=function Sh(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:B,slicedSegments:Z}=r_(r,w,D,P.filter(Me=>void 0===Me.redirectTo));if(0===Z.length&&B.hasChildren())return this.processChildren(x,P,B).pipe((0,dt.U)(Me=>null===Me?null:[new bo(_,Me)]));if(0===P.length&&0===Z.length)return mt([new bo(_,[])]);const ce=zs(t)===a;return this.processSegment(x,P,B,Z,ce?zt:a).pipe((0,dt.U)(Me=>null===Me?null:[new bo(_,Me)]))}))}}function Ah(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Lc(n){const e=[],t=new Set;for(const r of n){if(!Ah(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Lc(r.children);e.push(new bo(r.value,i))}return e.filter(r=>!t.has(r))}function Vc(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Xv(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Jv(n){return n.data||{}}function ew(n){return n.resolve||{}}function xI(n){return"string"==typeof n.title||null===n.title}function o_(n){return gr(e=>{const t=n(e);return t?(0,Wt.D)(t).pipe((0,dt.U)(()=>e)):mt(e)})}const Uc=new h.OlP("ROUTES");let Mp=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return mt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=tl(t.loadComponent()).pipe((0,dt.U)(RI),(0,ui.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),bc(()=>{this.componentLoaders.delete(t)})),i=new yv(r,()=>new Wa.x).pipe(za());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return mt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,dt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,D=!1;Array.isArray(f)?w=f:(_=f.create(t).injector,w=Lm(_.get(Uc,[],h.XFs.Self|h.XFs.Optional)));return{routes:w.map($v),injector:_}}),bc(()=>{this.childrenLoaders.delete(r)})),l=new yv(a,()=>new Wa.x).pipe(za());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return tl(t()).pipe((0,dt.U)(RI),(0,Dr.z)(r=>r instanceof h.YKP||Array.isArray(r)?mt(r):(0,Wt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function RI(n){return function tw(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let jc=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Wa.x,this.configLoader=(0,h.f3M)(Mp),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(_p),this.rootContexts=(0,h.f3M)(Rc),this.navigationId=0,this.afterPreactivation=()=>mt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new vh(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new mN(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new ia({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ep,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ws(r=>0!==r.id),(0,dt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),gr(r=>{let i=!1,a=!1;return mt(r).pipe((0,ui.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),gr(l=>{const f=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const D="";return this.events.next(new Wm(l.id,t.serializeUrl(r.rawUrl),D,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ju.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return a_(l.source)&&(t.browserUrlTree=l.extractedUrl),mt(l).pipe(gr(D=>{const x=this.transitions?.getValue();return this.events.next(new Tv(D.id,this.urlSerializer.serialize(D.extractedUrl),D.source,D.restoredState)),x!==this.transitions?.getValue()?Ju.E:Promise.resolve(D)}),function s_(n,e,t,r){return gr(i=>function vi(n,e,t,r,i){return new Fc(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,dt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,ui.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},r.urlAfterRedirects=D.urlAfterRedirects}),function bI(n,e,t,r,i){return(0,Dr.z)(a=>function bh(n,e,t,r,i,a,l="emptyOnly"){return new Dh(n,e,t,r,i,l,a).recognize().pipe(gr(f=>null===f?function Ch(n){return new fr.y(e=>e.error(n))}(new Qv):mt(f)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,dt.U)(l=>({...a,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,ui.b)(D=>{if(r.targetSnapshot=D.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!D.extras.skipLocationChange){const P=t.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);t.setBrowserUrl(P,D)}t.browserUrlTree=D.urlAfterRedirects}const x=new nI(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(x)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:D,extractedUrl:x,source:P,restoredState:B,extras:Z}=l,ce=new Tv(D,this.urlSerializer.serialize(x),P,B);this.events.next(ce);const Me=Km(x,this.rootComponentType).snapshot;return mt(r={...l,targetSnapshot:Me,urlAfterRedirects:x,extras:{...Z,skipLocationChange:!1,replaceUrl:!1}})}{const D="";return this.events.next(new Wm(l.id,t.serializeUrl(r.extractedUrl),D,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ju.E}}),(0,ui.b)(l=>{const f=new Sv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),(0,dt.U)(l=>r={...l,guards:hI(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function GT(n,e){return(0,Dr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?mt({...t,guardsResult:!0}):function WT(n,e,t,r){return(0,Wt.D)(n).pipe((0,Dr.z)(i=>function KT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?mt(a.map(f=>{const _=Nc(e)??i,w=Pc(f,_);return tl(function jT(n){return n&&al(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(Io())})).pipe(Ih()):mt(!0)}(i.component,i.route,t,e,r)),Io(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Dr.z)(f=>f&&function Ap(n){return"boolean"==typeof n}(f)?function zT(n,e,t,r){return(0,Wt.D)(e).pipe(Cc(i=>Nm(function ZT(n,e){return null!==n&&e&&e(new rI(n)),mt(!0)}(i.route.parent,r),function qT(n,e){return null!==n&&e&&e(new iI(n)),mt(!0)}(i.route,r),function Wv(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function fI(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Qu(()=>mt(l.guards.map(_=>{const w=Nc(l.node)??t,D=Pc(_,w);return tl(function gI(n){return n&&al(n.canActivateChild)}(D)?D.canActivateChild(r,n):w.runInContext(()=>D(r,n))).pipe(Io())})).pipe(Ih())));return mt(a).pipe(Ih())}(n,i.path,t),function _I(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const i=r.map(a=>Qu(()=>{const l=Nc(e)??t,f=Pc(a,l);return tl(function pI(n){return n&&al(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(Io())}));return mt(i).pipe(Ih())}(n,i.route,t))),Io(i=>!0!==i,!0))}(r,a,n,e):mt(f)),(0,dt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,l=>this.events.next(l)),(0,ui.b)(l=>{if(r.guardsResult=l.guardsResult,Tc(l.guardsResult))throw uI(0,l.guardsResult);const f=new gN(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),Ws(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),o_(l=>{if(l.guards.canActivateChecks.length)return mt(l).pipe((0,ui.b)(f=>{const _=new Av(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}),gr(f=>{let _=!1;return mt(f).pipe(function DI(n,e){return(0,Dr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return mt(t);let a=0;return(0,Wt.D)(i).pipe(Cc(l=>function TI(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!xI(i)&&(a[fh]=i.title),function SI(n,e,t,r){const i=function AI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return mt({});const a={};return(0,Wt.D)(i).pipe((0,Dr.z)(l=>function tS(n,e,t,r){const i=Nc(e)??r,a=Pc(n,i);return tl(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(Io(),(0,ui.b)(f=>{a[l]=f}))),vv(1),function hh(n){return(0,dt.U)(()=>n)}(a),el(l=>mI(l)?Ju.E:Xu(l)))}(a,n,e,r).pipe((0,dt.U)(l=>(n._resolvedData=l,n.data=Nv(n,t).resolve,i&&xI(i)&&(n.data[fh]=i.title),null)))}(l.route,r,n,e)),(0,ui.b)(()=>a++),vv(1),(0,Dr.z)(l=>a===i.length?mt(t):Ju.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,ui.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,ui.b)(f=>{const _=new AT(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}))}),o_(l=>{const f=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,ui.b)(D=>{_.component=D}),(0,dt.U)(()=>{})));for(const D of _.children)w.push(...f(D));return w};return aT(f(l.targetSnapshot.root)).pipe(km(),mp(1))}),o_(()=>this.afterPreactivation()),(0,dt.U)(l=>{const f=function PT(n,e,t){const r=Qm(n,e._root,t?t._root:void 0);return new Rv(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:f}}),(0,ui.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,dt.U)(r=>(new vN(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,ui.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new xc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),bc(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),el(l=>{if(a=!0,cI(l)){Lv(l)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new Ip(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(f),Lv(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||a_(r.source)};t.scheduleNavigation(_,Ep,null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new zm(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return Ju.E}))}))}cancelNavigationTransition(t,r,i){const a=new Ip(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function a_(n){return n!==Ep}let NI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===zt);return r}getResolvedTitleForRoute(t){return t.data[fh]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(nw)},providedIn:"root"}),n})(),nw=(()=>{class n extends NI{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(vo))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(OI)},providedIn:"root"}),n})();class PI{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let OI=(()=>{class n extends PI{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Rp=new h.OlP("",{providedIn:"root",factory:()=>({})});let kI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(sw)},providedIn:"root"}),n})(),sw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nS(n){throw n}function FI(n,e,t){return e.parse("/")}const LI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},VI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(Rp,{optional:!0})||{},this.errorHandler=this.options.errorHandler||nS,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||FI,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(kI),this.routeReuseStrategy=(0,h.f3M)(rw),this.urlCreationStrategy=(0,h.f3M)(Mv),this.titleStrategy=(0,h.f3M)(NI),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Lm((0,h.f3M)(Uc,{optional:!0})??[]),this.navigationTransitions=(0,h.f3M)(jc),this.urlSerializer=(0,h.f3M)(_p),this.location=(0,h.f3M)(Fe),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Dc,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Km(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ep,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map($v),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:_}=r,w=_?this.currentUrlTree.fragment:l;let D=null;switch(f){case"merge":D={...this.currentUrlTree.queryParams,...a};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}return null!==D&&(D=this.removeEmptyProps(D)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,D,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Tc(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,Ep,null,r)}navigate(t,r={skipLocationChange:!1}){return function rS(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...LI}:!1===r?{...VI}:r,Tc(t))return $E(this.currentUrlTree,t,i);const a=this.parseUrl(t);return $E(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,_,w,D;return l?(f=l.resolve,_=l.reject,w=l.promise):w=new Promise((x,P)=>{f=x,_=P}),D="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$c=(()=>{class n{constructor(t,r,i,a,l,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=f,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Wa.x;const _=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(w=>{w instanceof xc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(wi),h.Y36(Mc),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(ot))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&h.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&h.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class Np{}let UI=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ws(t=>t instanceof xc),Cc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,h.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(l,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,Wt.D)(i).pipe((0,Ic.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):mt(null);const a=i.pipe((0,Dr.z)(l=>null===l?mt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Wt.D)([a,l]).pipe((0,Ic.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wi),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(Np),h.LFG(Mp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const l_=new h.OlP("");let aw=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Tv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof sI&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new sI(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();var Qi=(()=>((Qi=Qi||{})[Qi.COMPLETE=0]="COMPLETE",Qi[Qi.FAILED=1]="FAILED",Qi[Qi.REDIRECTING=2]="REDIRECTING",Qi))();const Hc=!1;function ul(n,e){return{\u0275kind:n,\u0275providers:e}}const lw=new h.OlP("",{providedIn:"root",factory:()=>!1});function $I(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(wi),i=n.get(c_);1===n.get(HI)&&r.initialNavigation(),n.get(dw,null,h.XFs.Optional)?.setUpPreloading(),n.get(l_,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const c_=new h.OlP(Hc?"bootstrap done indicator":"",{factory:()=>new Wa.x}),HI=new h.OlP(Hc?"initial navigation":"",{providedIn:"root",factory:()=>1});function uS(){let n=[];return n=Hc?[{provide:h.Xts,multi:!0,useFactory:()=>{const e=(0,h.f3M)(wi);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function qm(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],ul(1,n)}const dw=new h.OlP(Hc?"router preloader":"");function lS(n){return ul(0,[{provide:dw,useExisting:UI},{provide:Np,useExisting:n}])}const Pp=!1,GI=new h.OlP(Pp?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),WI=[Fe,{provide:_p,useClass:Bm},wi,Rc,{provide:Mc,useFactory:function Za(n){return n.routerState.root},deps:[wi]},Mp,Pp?{provide:lw,useValue:!0}:[]];function zI(){return new h.PXZ("Router",wi)}let Gc=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[WI,Pp&&r?.enableTracing?uS().\u0275providers:[],{provide:Uc,multi:!0,useValue:t},{provide:GI,useFactory:pS,deps:[[wi,new h.FiY,new h.tp0]]},{provide:Rp,useValue:r||{}},r?.useHash?{provide:ot,useClass:De}:{provide:ot,useClass:be},{provide:l_,useFactory:()=>{const n=(0,h.f3M)(ho),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(Rp),r=(0,h.f3M)(jc),i=(0,h.f3M)(_p);return t.scrollOffset&&n.setOffset(t.scrollOffset),new aw(i,r,n,e,t)}},r?.preloadingStrategy?lS(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:zI},r?.initialNavigation?ZI(r):[],[{provide:gS,useFactory:$I},{provide:h.tb,multi:!0,useExisting:gS}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Uc,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(GI,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Uv]}),n})();function pS(n){if(Pp&&n)throw new h.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function ZI(n){return["disabled"===n.initialNavigation?ul(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(wi);return()=>{e.setUpLocationChangeListener()}}},{provide:HI,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ul(2,[{provide:HI,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(ae,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(wi),a=e.get(c_);(function BI(n,e){n.events.pipe(Ws(t=>t instanceof xc||t instanceof Ip||t instanceof zm||t instanceof Wm),(0,dt.U)(t=>t instanceof xc||t instanceof Wm?Qi.COMPLETE:t instanceof Ip&&(0===t.code||1===t.code)?Qi.REDIRECTING:Qi.FAILED),Ws(t=>t!==Qi.REDIRECTING),mp(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(jc).afterPreactivation=()=>(r(!0),a.closed?mt(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const gS=new h.OlP(Pp?"Router Initializer":"");var qs=F(9260),QI=F(4986),Ln=F(2122);function Zs(){return(0,br.e)((n,e)=>{let t,r=!1;n.subscribe((0,Fn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Ks(n,e=Ec.y){return n=n??To,(0,br.e)((t,r)=>{let i,a=!0;t.subscribe((0,Fn.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}function To(n,e){return n===e}var pt,Ei=F(2011),XI=(F(8971),F(3942)),ge=F(5861),So=F(9681),Ka=F(4859),Is=F(1877),O=F(2090),_S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ua={},d_=d_||{},Vt=_S||self;function Wc(){}function h_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Rh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Op="closure_uid_"+(1e9*Math.random()>>>0),f_=0;function eC(n,e,t){return n.call.apply(n.bind,arguments)}function tC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function li(n,e,t){return(li=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?eC:tC).apply(null,arguments)}function kp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Kr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function Ya(){this.s=this.s,this.o=this.o}Ya.prototype.s=!1,Ya.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function JI(n){Object.prototype.hasOwnProperty.call(n,Op)&&n[Op]||(n[Op]=++f_)}(this)},Ya.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function fw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function rC(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(h_(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Ii(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ii.prototype.h=function(){this.defaultPrevented=!0};var yS=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",Wc,e),Vt.removeEventListener("test",Wc,e)}catch{}return n}();function p_(n){return/^[\s\xa0]*$/.test(n)}var iC=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function pw(n,e){return n<e?-1:n>e?1:0}function g_(){var n=Vt.navigator;return n&&(n=n.userAgent)?n:""}function la(n){return-1!=g_().indexOf(n)}function gw(n){return gw[" "](n),n}gw[" "]=Wc;var Fp,n,wS=la("Opera"),Nh=la("Trident")||la("MSIE"),sC=la("Edge"),mw=sC||Nh,oC=la("Gecko")&&!(-1!=g_().toLowerCase().indexOf("webkit")&&!la("Edge"))&&!(la("Trident")||la("MSIE"))&&!la("Edge"),ES=-1!=g_().toLowerCase().indexOf("webkit")&&!la("Edge");function aC(){var n=Vt.document;return n?n.documentMode:void 0}e:{var m_="",__=(n=g_(),oC?/rv:([^\);]+)(\)|;)/.exec(n):sC?/Edge\/([\d\.]+)/.exec(n):Nh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ES?/WebKit\/(\S+)/.exec(n):wS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(__&&(m_=__?__[1]:""),Nh){var y_=aC();if(null!=y_&&y_>parseFloat(m_)){Fp=String(y_);break e}}Fp=m_}var uC={};var cC=Vt.document&&Nh&&(aC()||parseInt(Fp,10))||void 0;function Ph(n,e){if(Ii.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(oC){e:{try{gw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:dC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ph.X.h.call(this)}}Kr(Ph,Ii);var dC={2:"touch",3:"pen",4:"mouse"};Ph.prototype.h=function(){Ph.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ao="closure_listenable_"+(1e6*Math.random()|0),IS=0;function CS(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++IS,this.ba=this.ea=!1}function Qa(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function hC(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function w_(n){const e={};for(const t in n)e[t]=n[t];return e}const bS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yw(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<bS.length;a++)t=bS[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Lp(n){this.src=n,this.g={},this.h=0}function fC(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=hw(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Qa(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ct(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}Lp.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Ct(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new CS(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var vw="closure_lm_"+(1e6*Math.random()|0),ww={};function pC(n,e,t,r,i){if(r&&r.once)return Vp(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)pC(n,e[a],t,r,i);return null}return t=I_(t),n&&n[Ao]?n.N(e,t,Rh(r)?!!r.capture:!!r,i):zc(n,e,t,!1,r,i)}function zc(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Rh(i)?!!i.capture:!!i,f=E_(n);if(f||(n[vw]=f=new Lp(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function DS(){const e=gC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)yS||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(TS(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Vp(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Vp(n,e[a],t,r,i);return null}return t=I_(t),n&&n[Ao]?n.O(e,t,Rh(r)?!!r.capture:!!r,i):zc(n,e,t,!0,r,i)}function Up(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Up(n,e[a],t,r,i);else r=Rh(r)?!!r.capture:!!r,t=I_(t),n&&n[Ao]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ct(a=n.g[e],t,r,i))&&(Qa(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=E_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ct(e,t,r,i)),(t=-1<n?e[n]:null)&&Wn(t))}function Wn(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Ao])fC(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(TS(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=E_(e))?(fC(t,n),0==t.h&&(t.src=null,e[vw]=null)):Qa(n)}}}function TS(n){return n in ww?ww[n]:ww[n]="on"+n}function gC(n,e){if(n.ba)n=!0;else{e=new Ph(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Wn(n),n=t.call(r,e)}return n}function E_(n){return(n=n[vw])instanceof Lp?n:null}var Ew="__closure_events_fn_"+(1e9*Math.random()>>>0);function I_(n){return"function"==typeof n?n:(n[Ew]||(n[Ew]=function(e){return n.handleEvent(e)}),n[Ew])}function Lr(){Ya.call(this),this.i=new Lp(this),this.P=this,this.I=null}function Yr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ii(e,n);else if(e instanceof Ii)e.target=e.target||n;else{var i=e;yw(e=new Ii(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Bp(l,r,!0,e)&&i}if(i=Bp(l=e.g=n,r,!0,e)&&i,i=Bp(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Bp(l=e.g=t[a],r,!1,e)&&i}function Bp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var f=l.listener,_=l.ha||l.src;l.ea&&fC(n.i,l),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}Kr(Lr,Ya),Lr.prototype[Ao]=!0,Lr.prototype.removeEventListener=function(n,e,t,r){Up(this,n,e,t,r)},Lr.prototype.M=function(){if(Lr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Qa(t[r]);delete n.g[e],n.h--}}this.I=null},Lr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Lr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Iw=Vt.JSON.stringify;function SS(){var n=Cw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var kh,Oh=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new xS,n=>n.reset());class xS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function MS(n){Vt.setTimeout(()=>{throw n},0)}function mC(n,e){kh||function _C(){var n=Vt.Promise.resolve(void 0);kh=function(){n.then(RS)}}(),C_||(kh(),C_=!0),Cw.add(n,e)}var C_=!1,Cw=new class AS{constructor(){this.h=this.g=null}add(e,t){const r=Oh.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function RS(){for(var n;n=SS();){try{n.h.call(n.g)}catch(t){MS(t)}var e=Oh;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}C_=!1}function ll(n,e){Lr.call(this),this.h=n||1,this.g=e||Vt,this.j=li(this.lb,this),this.l=Date.now()}function qc(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function bw(n,e,t){if("function"==typeof n)t&&(n=li(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=li(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function yC(n){n.g=bw(()=>{n.g=null,n.i&&(n.i=!1,yC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Kr(ll,Lr),(pt=ll.prototype).ca=!1,pt.R=null,pt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Yr(this,"tick"),this.ca&&(qc(this),this.start()))}},pt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pt.M=function(){ll.X.M.call(this),qc(this),delete this.g};class NS extends Ya{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yC(this)}M(){super.M(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fh(n){Ya.call(this),this.h=n,this.g={}}Kr(Fh,Ya);var Dw=[];function Tw(n,e,t,r){Array.isArray(t)||(t&&(Dw[0]=t.toString()),t=Dw);for(var i=0;i<t.length;i++){var a=pC(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function vC(n){hC(n.g,function(e,t){this.g.hasOwnProperty(t)&&Wn(e)},n),n.g={}}function jp(){this.g=!0}function $p(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function CN(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Iw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Fh.prototype.M=function(){Fh.X.M.call(this),vC(this)},Fh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jp.prototype.Aa=function(){this.g=!1},jp.prototype.info=function(){};var Lh={},Sw=null;function Zc(){return Sw=Sw||new Lr}function wC(n){Ii.call(this,Lh.Pa,n)}function Hp(n){const e=Zc();Yr(e,new wC(e))}function Aw(n,e){Ii.call(this,Lh.STAT_EVENT,n),this.stat=e}function Vr(n){const e=Zc();Yr(e,new Aw(e,n))}function EC(n,e){Ii.call(this,Lh.Qa,n),this.size=e}function Gp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}Lh.Pa="serverreachability",Kr(wC,Ii),Lh.STAT_EVENT="statevent",Kr(Aw,Ii),Lh.Qa="timingevent",Kr(EC,Ii);var b_={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},IC={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function CC(){}function xw(){}CC.prototype.h=null;var Rw,Wp={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Mw(){Ii.call(this,"d")}function Kc(){Ii.call(this,"c")}function zp(){}function qp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Fh(this),this.O=kS,this.T=new ll(n=mw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Nw}function Nw(){this.i=null,this.g="",this.h=!1}Kr(Mw,Ii),Kr(Kc,Ii),Kr(zp,CC),zp.prototype.g=function(){return new XMLHttpRequest},zp.prototype.i=function(){return{}},Rw=new zp;var kS=45e3,D_={},T_={};function Zp(n,e,t){n.K=1,n.v=Jp(Xa(e)),n.s=t,n.P=!0,DC(n,null)}function DC(n,e){n.F=Date.now(),Kp(n),n.A=Xa(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Qc(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Nw,n.g=GC(n.l,t?e:null,!n.s),0<n.N&&(n.L=new NS(li(n.La,n,n.g),n.N)),Tw(n.S,n.g,"readystatechange",n.ib),e=n.H?w_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Hp(),function PS(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),_=0;_<f.length;_++){var w=f[_].split("=");if(1<w.length){var D=w[0];w=w[1];var x=D.split("_");l=2<=x.length&&"type"==x[1]?l+(D+"=")+w+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Pw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Ow(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=FS(n,t),i==T_){4==e&&(n.o=4,Vr(14),r=!1),$p(n.j,n.m,null,"[Incomplete Response]");break}if(i==D_){n.o=4,Vr(15),$p(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}$p(n.j,n.m,i,null),kw(n,i)}Pw(n)&&i!=T_&&i!=D_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),zw(e),e.K=!0,Vr(11))):($p(n.j,n.m,t,"[Invalid Chunked Response]"),cl(n),Yp(n))}function FS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?T_:(t=Number(e.substring(t,r)),isNaN(t)?D_:(r+=1)+t>e.length?T_:(e=e.substr(r,t),n.C=r+t,e))}function Kp(n){n.V=Date.now()+n.O,TC(n,n.O)}function TC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Gp(li(n.gb,n),e)}function Vh(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function Yp(n){0==n.l.G||n.I||U_(n.l,n)}function cl(n){Vh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,qc(n.T),vC(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function kw(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||jw(t.h,n)))if(!n.J&&jw(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;V_(t),sg(t)}Ww(t),Vr(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Gp(li(t.cb,t),6e3));if(1>=A_(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ed(t,11)}else if((n.J||t.g==n)&&V_(t),!p_(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const D=w[3];null!=D&&(t.ma=D,t.j.info("VER="+t.ma));const x=w[4];null!=x&&(t.Ca=x,t.j.info("SVER="+t.Ca));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.J=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const Z=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.h;a.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(x_(a,a.h),a.h=null))}if(r.D){const ce=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;ce&&(r.za=ce,zn(r.F,r.D,ce))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=$h(r,r.H?r.ka:null,r.V),l.J){M_(r.h,l);var f=l,_=r.J;_&&f.setTimeout(_),f.B&&(Vh(f),Kp(f)),r.g=l}else HC(r);0<t.i.length&&L_(t)}else"stop"!=w[0]&&"close"!=w[0]||ed(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?ed(t,7):F_(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}Hp()}catch{}}function SC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(h_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function VS(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(h_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function LS(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(h_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(pt=qp.prototype).setTimeout=function(n){this.O=n},pt.ib=function(n){n=n.target;const e=this.L;e&&3==Ja(n)?e.l():this.La(n)},pt.La=function(n){try{if(n==this.g)e:{const D=Ja(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>D)&&(3!=D||mw||this.g&&(this.h.h||this.g.fa()||BC(this.g)))){this.I||4!=D||7==e||Hp(),Vh(this);var t=this.g.aa();this.Y=t;t:if(Pw(this)){var r=BC(this.g);n="";var i=r.length,a=4==Ja(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){cl(this),Yp(this);var l="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function OS(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,D,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p_(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Vr(12),cl(this),Yp(this);break e}$p(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,kw(this,t)}this.P?(Ow(this,D,l),mw&&this.i&&3==D&&(Tw(this.S,this.T,"tick",this.hb),this.T.start())):($p(this.j,this.m,l,null),kw(this,l)),4==D&&cl(this),this.i&&!this.I&&(4==D?U_(this.l,this):(this.i=!1,Kp(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Vr(12)):(this.o=0,Vr(13)),cl(this),Yp(this)}}}catch{}},pt.hb=function(){if(this.g){var n=Ja(this.g),e=this.g.fa();this.C<e.length&&(Vh(this),Ow(this,n,e),this.i&&4!=n&&Kp(this))}},pt.cancel=function(){this.I=!0,cl(this)},pt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function IN(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Hp(),Vr(17)),cl(this),this.o=2,Yp(this)):TC(this,this.V-n)};var AC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Yc){this.h=void 0!==e?e:n.h,Qp(this,n.j),this.s=n.s,this.g=n.g,Xp(this,n.m),this.l=n.l,e=n.i;var t=new ng;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),xC(this,t),this.o=n.o}else n&&(t=String(n).match(AC))?(this.h=!!e,Qp(this,t[1]||"",!0),this.s=eg(t[2]||""),this.g=eg(t[3]||"",!0),Xp(this,t[4]),this.l=eg(t[5]||"",!0),xC(this,t[6]||"",!0),this.o=eg(t[7]||"")):(this.h=!!e,this.i=new ng(null,this.h))}function Xa(n){return new Yc(n)}function Qp(n,e,t){n.j=t?eg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Xp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function xC(n,e,t){e instanceof ng?(n.i=e,function $S(n,e){e&&!n.j&&(ca(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(RC(this,r),Qc(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=tg(e,Lw)),n.i=new ng(e,n.h))}function zn(n,e,t){n.i.set(e,t)}function Jp(n){return zn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function eg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function tg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,BS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function BS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Yc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(tg(e,S_,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(tg(e,S_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(tg(t,"/"==t.charAt(0)?MC:Fw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",tg(t,jS)),n.join("")};var S_=/[#\/\?@]/g,Fw=/[#\?:]/g,MC=/[#\?]/g,Lw=/[#\?@]/g,jS=/#/g;function ng(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ca(n){n.g||(n.g=new Map,n.h=0,n.i&&function US(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function RC(n,e){ca(n),e=Xc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Vw(n,e){return ca(n),e=Xc(n,e),n.g.has(e)}function Qc(n,e,t){RC(n,e),0<t.length&&(n.i=null,n.g.set(Xc(n,e),fw(t)),n.h+=t.length)}function Xc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Uw(n){this.l=n||Bw,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ga&&Vt.g.Ga()&&Vt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pt=ng.prototype).add=function(n,e){ca(this),this.i=null,n=Xc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},pt.forEach=function(n,e){ca(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},pt.oa=function(){ca(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},pt.W=function(n){ca(this);let e=[];if("string"==typeof n)Vw(this,n)&&(e=e.concat(this.g.get(Xc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},pt.set=function(n,e){return ca(this),this.i=null,Vw(this,n=Xc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},pt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},pt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var Bw=10;function NC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function A_(n){return n.h?1:n.g?n.g.size:0}function jw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function x_(n,e){n.g?n.g.add(e):n.h=e}function M_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $w(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return fw(n.i)}function R_(){}function PC(){this.g=new R_}function OC(n,e,t){const r=t||"";try{SC(n,function(i,a){let l=i;Rh(i)&&(l=Iw(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function N_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function rg(n){this.l=n.ac||null,this.j=n.jb||!1}function P_(n,e){Lr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=O_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Uw.prototype.cancel=function(){if(this.i=$w(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},R_.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},R_.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},Kr(rg,CC),rg.prototype.g=function(){return new P_(this.l,this.j)},rg.prototype.i=function(n){return function(){return n}}({}),Kr(P_,Lr);var O_=0;function GS(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Uh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ig(n)}function ig(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(pt=P_.prototype).open=function(n,e){if(this.readyState!=O_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ig(this)},pt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Vt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},pt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Uh(this)),this.readyState=O_},pt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ig(this)),this.g&&(this.readyState=3,ig(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Vt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;GS(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},pt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Uh(this):ig(this),3==this.readyState&&GS(this)}},pt.Va=function(n){this.g&&(this.response=this.responseText=n,Uh(this))},pt.Ua=function(n){this.g&&(this.response=n,Uh(this))},pt.ga=function(){this.g&&Uh(this)},pt.setRequestHeader=function(n,e){this.v.append(n,e)},pt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},pt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(P_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var WS=Vt.JSON.parse;function _r(n){Lr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=kC,this.K=this.L=!1}Kr(_r,Lr);var kC="",zS=/^https?$/i,qS=["POST","PUT"];function FC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,LC(n),k_(n)}function LC(n){n.D||(n.D=!0,Yr(n,"complete"),Yr(n,"error"))}function VC(n){if(n.h&&typeof d_<"u"&&(!n.C[1]||4!=Ja(n)||2!=n.aa()))if(n.v&&4==Ja(n))bw(n.Ha,0,n);else if(Yr(n,"readystatechange"),4==Ja(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(AC)[1]||null;if(!i&&Vt.self&&Vt.self.location){var a=Vt.self.location.protocol;i=a.substr(0,a.length-1)}r=!zS.test(i?i.toLowerCase():"")}t=r}if(t)Yr(n,"complete"),Yr(n,"success");else{n.m=6;try{var l=2<Ja(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",LC(n)}}finally{k_(n)}}}function k_(n,e){if(n.g){UC(n);const t=n.g,r=n.C[0]?Wc:null;n.g=null,n.C=null,e||Yr(n,"ready");try{t.onreadystatechange=r}catch{}}}function UC(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function Ja(n){return n.g?n.g.readyState:0}function BC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case kC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function jC(n){let e="";return hC(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Jc(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=jC(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):zn(n,e,t))}function Bh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Hw(n){this.Ca=0,this.i=[],this.j=new jp,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Bh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Bh("baseRetryDelayMs",5e3,n),this.bb=Bh("retryDelaySeedMs",1e4,n),this.$a=Bh("forwardChannelMaxRetries",2,n),this.ta=Bh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Uw(n&&n.concurrentRequestLimit),this.Fa=new PC,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function F_(n){if(Gw(n),3==n.G){var e=n.U++,t=Xa(n.F);zn(t,"SID",n.I),zn(t,"RID",e),zn(t,"TYPE","terminate"),og(n,t),(e=new qp(n,n.j,e,void 0)).K=2,e.v=Jp(Xa(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(t=Vt.navigator.sendBeacon(e.v.toString(),"")),!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=GC(e.l,null),e.g.da(e.v)),e.F=Date.now(),Kp(e)}B_(n)}function sg(n){n.g&&(zw(n),n.g.cancel(),n.g=null)}function Gw(n){sg(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),V_(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function L_(n){NC(n.h)||n.m||(n.m=!0,mC(n.Ja,n),n.C=0)}function YS(n,e){var t;t=e?e.m:n.U++;const r=Xa(n.F);zn(r,"SID",n.I),zn(r,"RID",t),zn(r,"AID",n.T),og(n,r),n.o&&n.s&&Jc(r,n.o,n.s),t=new qp(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=$C(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),x_(n.h,t),Zp(t,r,e)}function og(n,e){n.ia&&hC(n.ia,function(t,r){zn(e,r,t)}),n.l&&SC({},function(t,r){zn(e,r,t)})}function $C(n,e,t){t=Math.min(n.i.length,t);var r=n.l?li(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let _=0;_<t;_++){let w=i[_].h;const D=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),f=!1;else try{OC(D,l,"req"+w+"_")}catch{r&&r(D)}}if(f){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function HC(n){n.g||n.u||(n.Z=1,mC(n.Ia,n),n.A=0)}function Ww(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Gp(li(n.Ia,n),xo(n,n.A)),n.A++,0))}function zw(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function jh(n){n.g=new qp(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Xa(n.sa);zn(e,"RID","rpc"),zn(e,"SID",n.I),zn(e,"CI",n.L?"0":"1"),zn(e,"AID",n.T),zn(e,"TYPE","xmlhttp"),og(n,e),n.o&&n.s&&Jc(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Jp(Xa(e)),t.s=null,t.P=!0,DC(t,n)}function V_(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function U_(n,e){var t=null;if(n.g==e){V_(n),zw(n),n.g=null;var r=2}else{if(!jw(n.h,e))return;t=e.D,M_(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Yr(r=Zc(),new EC(r,t)),L_(n)}else HC(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function KS(n,e){return!(A_(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Gp(li(n.Ja,n,e),xo(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ww(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:ed(n,5);break;case 4:ed(n,10);break;case 3:ed(n,6);break;default:ed(n,2)}}function xo(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function ed(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=li(n.kb,n);t||(t=new Yc("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||Qp(t,"https"),Jp(t)),function HS(n,e){const t=new jp;if(Vt.Image){const r=new Image;r.onload=kp(N_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=kp(N_,t,r,"TestLoadImage: error",!1,e),r.onabort=kp(N_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=kp(N_,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Vr(2);n.G=0,n.l&&n.l.va(e),B_(n),Gw(n)}function B_(n){if(n.G=0,n.la=[],n.l){const e=$w(n.h);(0!=e.length||0!=n.i.length)&&(rC(n.la,e),rC(n.la,n.i),n.h.i.length=0,fw(n.i),n.i.length=0),n.l.ua()}}function $h(n,e,t){var r=t instanceof Yc?Xa(t):new Yc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Xp(r,r.m);else{var i=Vt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Yc(null,void 0);r&&Qp(a,r),e&&(a.g=e),i&&Xp(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&zn(r,t,e),zn(r,"VER",n.ma),og(n,r),r}function GC(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _r(t&&n.Da&&!n.ra?new rg({jb:!0}):n.ra)).Ka(n.H),e}function WC(){}function j_(){if(Nh&&!(10<=Number(cC)))throw Error("Environmental error: no available transport.")}function Ci(n,e){Lr.call(this),this.g=new Hw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!p_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!p_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Hh(this)}function ag(n){Mw.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function zC(){Kc.call(this),this.status=1}function Hh(n){this.g=n}(pt=_r.prototype).Ka=function(n){this.L=n},pt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rw.g(),this.C=function bC(n){return n.h||(n.h=n.i())}(this.u?this.u:Rw),this.g.onreadystatechange=li(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void FC(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Vt.FormData&&n instanceof Vt.FormData,!(0<=hw(qS,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{UC(this),0<this.B&&((this.K=function ZS(n){return Nh&&function lC(){return function vS(n){var e=uC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=iC(String(Fp)).split("."),t=iC("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=pw(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||pw(0==i[2].length,0==a[2].length)||pw(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=li(this.qa,this)):this.A=bw(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){FC(this,a)}},pt.qa=function(){typeof d_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yr(this,"timeout"),this.abort(8))},pt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Yr(this,"complete"),Yr(this,"abort"),k_(this))},pt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),k_(this,!0)),_r.X.M.call(this)},pt.Ha=function(){this.s||(this.F||this.v||this.l?VC(this):this.fb())},pt.fb=function(){VC(this)},pt.aa=function(){try{return 2<Ja(this)?this.g.status:-1}catch{return-1}},pt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},pt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),WS(e)}},pt.Ea=function(){return this.m},pt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(pt=Hw.prototype).ma=8,pt.G=1,pt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new qp(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=w_(a),yw(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$C(this,i,e),zn(t=Xa(this.F),"RID",n),zn(t,"CVER",22),this.D&&zn(t,"X-HTTP-Session-Id",this.D),og(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(jC(a)))+"&"+e:this.o&&Jc(t,this.o,a)),x_(this.h,i),this.Ya&&zn(t,"TYPE","init"),this.O?(zn(t,"$req",e),zn(t,"SID","null"),i.Z=!0,Zp(i,t,null)):Zp(i,t,e),this.G=2}}else 3==this.G&&(n?YS(this,n):0==this.i.length||NC(this.h)||YS(this))},pt.Ia=function(){if(this.u=null,jh(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Gp(li(this.eb,this),n)}},pt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Vr(10),sg(this),jh(this))},pt.cb=function(){null!=this.v&&(this.v=null,sg(this),Ww(this),Vr(19))},pt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Vr(2)):(this.j.info("Failed to ping google.com"),Vr(1))},(pt=WC.prototype).xa=function(){},pt.wa=function(){},pt.va=function(){},pt.ua=function(){},pt.Ra=function(){},j_.prototype.g=function(n,e){return new Ci(n,e)},Kr(Ci,Lr),Ci.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Vr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=$h(n,null,n.V),L_(n)},Ci.prototype.close=function(){F_(this.g)},Ci.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Iw(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&L_(e)},Ci.prototype.M=function(){this.g.l=null,delete this.j,F_(this.g),delete this.g,Ci.X.M.call(this)},Kr(ag,Mw),Kr(zC,Kc),Kr(Hh,WC),Hh.prototype.xa=function(){Yr(this.g,"a")},Hh.prototype.wa=function(n){Yr(this.g,new ag(n))},Hh.prototype.va=function(n){Yr(this.g,new zC)},Hh.prototype.ua=function(){Yr(this.g,"b")},j_.prototype.createWebChannel=j_.prototype.g,Ci.prototype.send=Ci.prototype.u,Ci.prototype.open=Ci.prototype.m,Ci.prototype.close=Ci.prototype.close,b_.NO_ERROR=0,b_.TIMEOUT=8,b_.HTTP_ERROR=6,IC.COMPLETE="complete",xw.EventType=Wp,Wp.OPEN="a",Wp.CLOSE="b",Wp.ERROR="c",Wp.MESSAGE="d",Lr.prototype.listen=Lr.prototype.N,_r.prototype.listenOnce=_r.prototype.O,_r.prototype.getLastError=_r.prototype.Oa,_r.prototype.getLastErrorCode=_r.prototype.Ea,_r.prototype.getStatus=_r.prototype.aa,_r.prototype.getResponseJson=_r.prototype.Sa,_r.prototype.getResponseText=_r.prototype.fa,_r.prototype.send=_r.prototype.da,_r.prototype.setWithCredentials=_r.prototype.Ka;var qC=ua.createWebChannelTransport=function(){return new j_},ZC=ua.getStatEventTarget=function(){return Zc()},ug=ua.ErrorCode=b_,KC=ua.EventType=IC,qw=ua.Event=Lh,$_=ua.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},YC=ua.FetchXmlHttpFactory=rg,Gh=ua.WebChannel=xw,Zw=ua.XhrIo=_r;const QC="@firebase/firestore";class Qr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qr.UNAUTHENTICATED=new Qr(null),Qr.GOOGLE_CREDENTIALS=new Qr("google-credentials-uid"),Qr.FIRST_PARTY=new Qr("first-party-uid"),Qr.MOCK_USER=new Qr("mock-user");let Wh="9.18.0";const dl=new Is.Yd("@firebase/firestore");function H_(){return dl.logLevel}function Oe(n,...e){if(dl.logLevel<=Is.in.DEBUG){const t=e.map(G_);dl.debug(`Firestore (${Wh}): ${n}`,...t)}}function yr(n,...e){if(dl.logLevel<=Is.in.ERROR){const t=e.map(G_);dl.error(`Firestore (${Wh}): ${n}`,...t)}}function hl(n,...e){if(dl.logLevel<=Is.in.WARN){const t=e.map(G_);dl.warn(`Firestore (${Wh}): ${n}`,...t)}}function G_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${Wh}) INTERNAL ASSERTION FAILED: `+n;throw yr(e),new Error(e)}function ht(n,e){n||st()}function Ke(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class td{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qr.UNAUTHENTICATED))}shutdown(){}}class XS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class DN{constructor(e){this.t=e,this.currentUser=Qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new hn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new hn,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const w=l;e.enqueueRetryable((0,ge.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new hn)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht("string"==typeof r.accessToken),new td(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ht(null===e||"string"==typeof e),new Qr(e)}}class TN{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Qr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ht(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class JC{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new TN(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lg{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ht("string"==typeof t.token),this.A=t.token,new W_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Yw(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class eb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Yw(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Ut(n,e){return n<e?-1:n>e?1:0}function zh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function tb(n){return n+"\0"}class qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qn.fromMillis(Date.now())}static fromDate(e){return qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new qn(0,0))}static max(){return new _t(new qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qh{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===qh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends qh{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new an(t)}static emptyPath(){return new an([])}}const z_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends qh{construct(e,t,r){return new Zn(e,t,r)}static isValidIdentifier(e){return z_.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Re(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Re(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Re(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Re(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zn(t)}static emptyPath(){return new Zn([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(an.fromString(e))}static fromName(e){return new qe(an.fromString(e).popFirst(5))}static empty(){return new qe(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new an(e.slice()))}}class cg{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Qw(n){return n.fields.find(e=>2===e.kind)}function fl(n){return n.fields.filter(e=>2!==e.kind)}cg.UNKNOWN_ID=-1;class q_{constructor(e,t){this.fieldPath=e,this.kind=t}}class nd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nd(0,Ys.min())}}function JS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=_t.fromTimestamp(1e9===r?new qn(t+1,0):new qn(t,r));return new Ys(i,qe.empty(),e)}function rb(n){return new Ys(n.readTime,n.key,-1)}class Ys{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ys(_t.min(),qe.empty(),-1)}static max(){return new Ys(_t.max(),qe.empty(),-1)}}function Xw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Ut(n.largestBatchId,e.largestBatchId))}const ib="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function eu(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,ge.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==ib)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),Z_.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(i=>i?ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(D=>{l[w]=D,++f,f===a&&r(l)},D=>i(D))}})}static doWhile(e,t){return new ie((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class dg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new hn,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new hg(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=K_(r.target.error);this.P.reject(new hg(e,i))}}static open(e,t,r,i){try{return new dg(t,e.transaction(i,r))}catch(a){throw new hg(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new tA(t)}}class Qs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Qs.D((0,O.z$)())&&yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),pl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,O.hl)())return!1;if(Qs.N())return!0;const e=(0,O.z$)(),t=Qs.D(e),r=0<t&&t<10,i=Qs.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new hg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Re(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Re(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new hg(e,f))},a.onupgradeneeded=l=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.F(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ge.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.O(e);const _=dg.open(a.db,e,l?"readonly":"readwrite",r),w=i(_).next(D=>(_.V(),D)).catch(D=>(_.abort(D),ie.reject(D))).toPromise();return w.catch(()=>{}),yield _.v,w}catch(_){const w=_,D="FirebaseError"!==w.name&&f<3;if(Oe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),a.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class eA{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return pl(this.q.delete())}}class hg extends Re{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function tu(n){return"IndexedDbTransactionError"===n.name}class tA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pl(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),pl(this.store.add(e))}get(e){return pl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),pl(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),pl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ie((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ie((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const i=this.cursor(r);return this.H(i,(a,l,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ie((r,i)=>{t.onerror=a=>{const l=K_(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}H(e,t){const r=[];return new ie((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const _=new eA(f),w=t(f.primaryKey,f.value,_);if(w instanceof ie){const D=w.catch(x=>(_.done(),ie.reject(x)));r.push(D)}_.isDone?i():null===_.G?f.continue():f.continue(_.G)}}).next(()=>ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pl(n){return new ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=K_(r.target.error);t(i)}})}let Jw=!1;function K_(n){const e=Qs.D((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jw||(Jw=!0,setTimeout(()=>{throw r},0)),r}}return n}class ob{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){tu(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield eu(r)}yield t.nt(6e4)}))}}class nA{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return ie.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Oe("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(f=>(Oe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=rb(a);Xw(l,r)>0&&(r=l)}),new Ys(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Cs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class MN{constructor(e,t,r,i,a,l,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class rd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof rd&&e.projectId===this.projectId&&e.database===this.database}}function rA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Kh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function iA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Q_(n){return null==n}function X_(n){return 0===n&&1/n==-1/0}function fg(n){return"number"==typeof n&&Number.isInteger(n)&&!X_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class RN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new RN("Invalid base64 string: "+i):i}}(e);return new or(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}or.EMPTY_BYTE_STRING=new or("");const ub=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nu(n){if(ht(!!n),"string"==typeof n){let e=0;const t=ub.exec(n);if(ht(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vr(n.seconds),nanos:vr(n.nanos)}}function vr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ru(n){return"string"==typeof n?or.fromBase64String(n):or.fromUint8Array(n)}function J_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function lb(n){const e=n.mapValue.fields.__previous_value__;return J_(e)?lb(e):e}function ey(n){const e=nu(n.mapValue.fields.__local_write_time__.timestampValue);return new qn(e.seconds,e.nanos)}const id={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ty={nullValue:"NULL_VALUE"};function sd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?J_(n)?4:Xs(n)?9007199254740991:10:st()}function bs(n,e){if(n===e)return!0;const t=sd(n);if(t!==sd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ey(n).isEqual(ey(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=nu(r.timestampValue),l=nu(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ru(n.bytesValue).isEqual(ru(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return vr(r.geoPointValue.latitude)===vr(i.geoPointValue.latitude)&&vr(r.geoPointValue.longitude)===vr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return vr(r.integerValue)===vr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=vr(r.doubleValue),l=vr(i.doubleValue);return a===l?X_(a)===X_(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return zh(n.arrayValue.values||[],e.arrayValue.values||[],bs);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(rA(a)!==rA(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!bs(a[f],l[f])))return!1;return!0}(n,e);default:return st()}var i}function pg(n,e){return void 0!==(n.values||[]).find(t=>bs(t,e))}function od(n,e){if(n===e)return 0;const t=sd(n),r=sd(e);if(t!==r)return Ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=vr(i.integerValue||i.doubleValue),f=vr(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return sA(n.timestampValue,e.timestampValue);case 4:return sA(ey(n),ey(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(i,a){const l=ru(i),f=ru(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let _=0;_<l.length&&_<f.length;_++){const w=Ut(l[_],f[_]);if(0!==w)return w}return Ut(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ut(vr(i.latitude),vr(a.latitude));return 0!==l?l:Ut(vr(i.longitude),vr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let _=0;_<l.length&&_<f.length;++_){const w=od(l[_],f[_]);if(w)return w}return Ut(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===id.mapValue&&a===id.mapValue)return 0;if(i===id.mapValue)return 1;if(a===id.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),_=a.fields||{},w=Object.keys(_);f.sort(),w.sort();for(let D=0;D<f.length&&D<w.length;++D){const x=Ut(f[D],w[D]);if(0!==x)return x;const P=od(l[f[D]],_[w[D]]);if(0!==P)return P}return Ut(f.length,w.length)}(n.mapValue,e.mapValue);default:throw st()}}function sA(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=nu(n),r=nu(e),i=Ut(t.seconds,r.seconds);return 0!==i?i:Ut(t.nanos,r.nanos)}function gg(n){return e0(n)}function e0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=nu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ru(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=e0(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${e0(r.fields[f])}`;return a+"}"}(n.mapValue):st();var e}function ad(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function t0(n){return!!n&&"integerValue"in n}function ny(n){return!!n&&"arrayValue"in n}function cb(n){return!!n&&"nullValue"in n}function n0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mg(n){return!!n&&"mapValue"in n}function ry(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Kh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ry(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ry(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Xs(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function oA(n){return"nullValue"in n?ty:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ad(rd.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function r0(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ad(rd.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?id:st()}function db(n,e){const t=od(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function aA(n,e){const t=od(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ur{constructor(e,t){this.position=e,this.inclusive=t}}function hb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?qe.comparator(qe.fromName(l.referenceValue),t.key):od(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function iy(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bs(n.position[t],e.position[t]))return!1;return!0}class fb{}class rn extends fb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new u0(e,t,r):"array-contains"===t?new c0(e,r):"in"===t?new d0(e,r):"not-in"===t?new uA(e,r):"array-contains-any"===t?new NN(e,r):new rn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new iu(e,r):new gl(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(od(t,this.value)):null!==t&&sd(this.value)===sd(t)&&this.matchesComparison(od(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class mn extends fb{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new mn(e,t)}matches(e){return ud(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ud(n){return"and"===n.op}function sy(n){return"or"===n.op}function s0(n){return o0(n)&&ud(n)}function o0(n){for(const e of n.filters)if(e instanceof mn)return!1;return!0}function oy(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+gg(n.value);if(s0(n))return n.filters.map(e=>oy(e)).join(",");{const e=n.filters.map(t=>oy(t)).join(",");return`${n.op}(${e})`}}function pb(n,e){return n instanceof rn?(t=n,(r=e)instanceof rn&&t.op===r.op&&t.field.isEqual(r.field)&&bs(t.value,r.value)):n instanceof mn?function(t,r){return r instanceof mn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&pb(a,r.filters[l]),!0)}(n,e):void st();var t,r}function a0(n,e){const t=n.filters.concat(e);return mn.create(t,n.op)}function gb(n){return n instanceof rn?`${(e=n).field.canonicalString()} ${e.op} ${gg(e.value)}`:n instanceof mn?function(e){return e.op.toString()+" {"+e.getFilters().map(gb).join(" ,")+"}"}(n):"Filter";var e}class u0 extends rn{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class iu extends rn{constructor(e,t){super(e,"in",t),this.keys=l0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gl extends rn{constructor(e,t){super(e,"not-in",t),this.keys=l0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function l0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class c0 extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ny(t)&&pg(t.arrayValue,this.value)}}class d0 extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pg(this.value.arrayValue,t)}}class uA extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(pg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pg(this.value.arrayValue,t)}}class NN extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ny(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pg(this.value.arrayValue,r))}}class Yh{constructor(e,t="asc"){this.field=e,this.dir=t}}function lA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class ar{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ay(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ay(this.root,e,this.comparator,!1)}getReverseIterator(){return new ay(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ay(this.root,e,this.comparator,!0)}}class ay{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Xr.RED,this.left=i??Xr.EMPTY,this.right=a??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Xr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1,Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Xr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sn{constructor(e){this.comparator=e,this.data=new ar(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new h0(this.data.getIterator())}getIteratorFrom(e){return new h0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sn(this.comparator);return t.data=e,t}}class h0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qh(n){return n.hasNext()?n.getNext():void 0}class Fi{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new Fi([])}unionWith(e){let t=new Sn(Zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Fi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ci{constructor(e){this.value=e}static empty(){return new ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!mg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ry(t)}setAll(e){let t=Zn.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=ry(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());mg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];mg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Kh(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ci(ry(this.value))}}function uy(n){const e=[];return Kh(n.fields,(t,r)=>{const i=new Zn([t]);if(mg(r)){const a=uy(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Fi(e)}class Nn{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new Nn(e,0,_t.min(),_t.min(),_t.min(),ci.empty(),0)}static newFoundDocument(e,t,r,i){return new Nn(e,1,t,_t.min(),r,i,0)}static newNoDocument(e,t){return new Nn(e,2,t,_t.min(),_t.min(),ci.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,_t.min(),_t.min(),ci.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_t.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mb{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this._t=null}}function ly(n,e=null,t=[],r=[],i=null,a=null,l=null){return new mb(n,e,t,r,i,a,l)}function ml(n){const e=Ke(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>oy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Q_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gg(r)).join(",")),e._t=t}return e._t}function Xh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!lA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iy(n.startAt,e.startAt)&&iy(n.endAt,e.endAt)}function ld(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function cd(n,e){return n.filters.filter(t=>t instanceof rn&&t.field.isEqual(e))}function f0(n,e,t){let r=ty,i=!0;for(const a of cd(n,e)){let l=ty,f=!0;switch(a.op){case"<":case"<=":l=oA(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=ty}db({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];db({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function _b(n,e,t){let r=id,i=!0;for(const a of cd(n,e)){let l=id,f=!0;switch(a.op){case">=":case">":l=r0(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=id}aA({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];aA({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class su{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=_,this.wt=null,this.gt=null}}function cA(n,e,t,r,i,a,l,f){return new su(n,e,t,r,i,a,l,f)}function _g(n){return new su(n)}function dA(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function cy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function dy(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function p0(n){return null!==n.collectionGroup}function dd(n){const e=Ke(n);if(null===e.wt){e.wt=[];const t=dy(e),r=cy(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Yh(t)),e.wt.push(new Yh(Zn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Yh(Zn.keyField(),a))}}}return e.wt}function Xi(n){const e=Ke(n);if(!e.gt)if("F"===e.limitType)e.gt=ly(e.path,e.collectionGroup,dd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of dd(e))t.push(new Yh(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ur(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ur(e.startAt.position,e.startAt.inclusive):null;e.gt=ly(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.gt}function yb(n,e){e.getFirstInequalityField(),dy(n);const t=n.filters.concat([e]);return new su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function g0(n,e,t){return new su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hy(n,e){return Xh(Xi(n),Xi(e))&&n.limitType===e.limitType}function hA(n){return`${ml(Xi(n))}|lt:${n.limitType}`}function m0(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>gb(r)).join(", ")}]`),Q_(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gg(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gg(r)).join(",")),`Target(${t})`}(Xi(n))}; limitType=${n.limitType})`}function _l(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of dd(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=hb(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,dd(t),r)||t.endAt&&!function(i,a,l){const f=hb(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,dd(t),r)));var t,r}function vb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function wb(n){return(e,t)=>{let r=!1;for(const i of dd(n)){const a=Eb(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Eb(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),_=l.data.field(i);return null!==f&&null!==_?od(f,_):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function yl(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:X_(e)?"-0":e}}function _0(n){return{integerValue:""+n}}function fy(n,e){return fg(e)?_0(e):yl(n,e)}class Jh{constructor(){this._=void 0}}function fA(n,e,t){return n instanceof ou?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof ef?pA(n,e):n instanceof tf?gA(n,e):function(r,i){const a=py(r,i),l=Ib(a)+Ib(r.It);return t0(a)&&t0(r.It)?_0(l):yl(r.Tt,l)}(n,e)}function y0(n,e,t){return n instanceof ef?pA(n,e):n instanceof tf?gA(n,e):t}function py(n,e){return n instanceof hd?t0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ou extends Jh{}class ef extends Jh{constructor(e){super(),this.elements=e}}function pA(n,e){const t=Cb(e);for(const r of n.elements)t.some(i=>bs(i,r))||t.push(r);return{arrayValue:{values:t}}}class tf extends Jh{constructor(e){super(),this.elements=e}}function gA(n,e){let t=Cb(e);for(const r of n.elements)t=t.filter(i=>!bs(i,r));return{arrayValue:{values:t}}}class hd extends Jh{constructor(e,t){super(),this.Tt=e,this.It=t}}function Ib(n){return vr(n.integerValue||n.doubleValue)}function Cb(n){return ny(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class yg{constructor(e,t){this.field=e,this.transform=t}}class bb{constructor(e,t){this.version=e,this.transformResults=t}}class Vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class gy{}function Db(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new nf(n.key,Vn.none()):new vl(n.key,n.data,Vn.none());{const t=n.data,r=ci.empty();let i=new Sn(Zn.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new au(n.key,r,new Fi(i.toArray()),Vn.none())}}function Tb(n,e,t){n instanceof vl?function(r,i,a){const l=r.value.clone(),f=_A(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof au?function(r,i,a){if(!vg(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=_A(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(Sb(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function fd(n,e,t,r){return n instanceof vl?function(i,a,l,f){if(!vg(i.precondition,a))return l;const _=i.value.clone(),w=yA(i.fieldTransforms,f,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof au?function(i,a,l,f){if(!vg(i.precondition,a))return l;const _=yA(i.fieldTransforms,f,a),w=a.data;return w.setAll(Sb(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,vg(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function PN(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=py(r.transform,i||null);null!=a&&(null===t&&(t=ci.empty()),t.set(r.field,a))}return t||null}function v0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&zh(t,r,(i,a)=>function mA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ef&&r instanceof ef||t instanceof tf&&r instanceof tf?zh(t.elements,r.elements,bs):t instanceof hd&&r instanceof hd?bs(t.It,r.It):t instanceof ou&&r instanceof ou);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class vl extends gy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class au extends gy{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Sb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _A(n,e,t){const r=new Map;ht(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,y0(l,f,t[i]))}return r}function yA(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,fA(a,l,e))}return r}class nf extends gy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w0 extends gy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vA{constructor(e){this.count=e}}var Br,fn;function wA(n){switch(n){default:return st();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function EA(n){if(void 0===n)return yr("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Br.OK:return oe.OK;case Br.CANCELLED:return oe.CANCELLED;case Br.UNKNOWN:return oe.UNKNOWN;case Br.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Br.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Br.INTERNAL:return oe.INTERNAL;case Br.UNAVAILABLE:return oe.UNAVAILABLE;case Br.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Br.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Br.NOT_FOUND:return oe.NOT_FOUND;case Br.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Br.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Br.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Br.ABORTED:return oe.ABORTED;case Br.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Br.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Br.DATA_LOSS:return oe.DATA_LOSS;default:return st()}}(fn=Br||(Br={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";class wl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Kh(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return iA(this.inner)}size(){return this.innerSize}}const ON=new ar(qe.comparator);function Ds(){return ON}const IA=new ar(qe.comparator);function my(...n){let e=IA;for(const t of n)e=e.insert(t.key,t);return e}function CA(n){let e=IA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function uu(){return o()}function s(){return o()}function o(){return new wl(n=>n.toString(),(n,e)=>n.isEqual(e))}const u=new ar(qe.comparator),c=new Sn(qe.comparator);function d(...n){let e=c;for(const t of n)e=e.add(t);return e}const g=new Sn(Ut);function v(){return g}class I{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,C.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new I(_t.min(),i,v(),Ds(),d())}}class C{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new C(r,t,d(),d(),d())}}class S{constructor(e,t,r,i){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=i}}class R{constructor(e,t){this.targetId=e,this.Rt=t}}class L{constructor(e,t,r=or.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class W{constructor(){this.Pt=0,this.vt=Le(),this.bt=or.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=d(),t=d(),r=d();return this.vt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new C(this.bt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=Le()}$t(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class J{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Ds(),this.Kt=me(),this.Gt=new Sn(Ut)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((r,i)=>{this.Jt(i)&&t(i)})}Zt(e){const t=e.targetId,r=e.Rt.count,i=this.Xt(t);if(i){const a=i.target;if(ld(a))if(0===r){const l=new qe(a.path);this.zt(t,l,Nn.newNoDocument(l,_t.min()))}else ht(1===r);else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((a,l)=>{const f=this.Xt(l);if(f){if(a.current&&ld(f.target)){const _=new qe(f.target.path);null!==this.Ut.get(_)||this.ne(l,_)||this.zt(l,_,Nn.newNoDocument(_,e))}a.Ct&&(t.set(l,a.Nt()),a.kt())}});let r=d();this.Kt.forEach((a,l)=>{let f=!0;l.forEachWhile(_=>{const w=this.Xt(_);return!w||2===w.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new I(e,t,this.Gt,this.Ut,r);return this.Ut=Ds(),this.Kt=me(),this.Gt=new Sn(Ut),i}jt(e,t){if(!this.Jt(e))return;const r=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,t)?i.$t(t,1):i.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let t=this.qt.get(e);return t||(t=new W,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new Sn(Ut),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new W),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function me(){return new ar(qe.comparator)}function Le(){return new ar(qe.comparator)}const Ye={asc:"ASCENDING",desc:"DESCENDING"},at={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},At={and:"AND",or:"OR"};class Ne{constructor(e,t){this.databaseId=e,this.yt=t}}function Rt(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Un(n,e){return n.yt?e.toBase64():e.toUint8Array()}function wr(n,e){return Rt(n,e.toTimestamp())}function Tr(n){return ht(!!n),_t.fromTimestamp(function(e){const t=nu(e);return new qn(t.seconds,t.nanos)}(n))}function bA(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function kN(n){const e=an.fromString(n);return ht(GN(e)),e}function E0(n,e){return bA(n.databaseId,e.path)}function El(n,e){const t=kN(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(LN(t))}function DA(n,e){return bA(n.databaseId,e)}function FN(n){const e=kN(n);return 4===e.length?an.emptyPath():LN(e)}function I0(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LN(n){return ht(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function VN(n,e,t){return{name:E0(n,e),fields:t.value.mapValue.fields}}function UN(n,e,t){const r=El(n,e.name),i=Tr(e.updateTime),a=e.createTime?Tr(e.createTime):_t.min(),l=new ci({mapValue:{fields:e.fields}}),f=Nn.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function C0(n,e){let t;if(e instanceof vl)t={update:VN(n,e.key,e.value)};else if(e instanceof nf)t={delete:E0(n,e.key)};else if(e instanceof au)t={update:VN(n,e.key,e.data),updateMask:rL(e.fieldMask)};else{if(!(e instanceof w0))return st();t={verify:E0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof ou)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ef)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof tf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof hd)return{fieldPath:a.field.canonicalString(),increment:l.It};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:wr(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function TA(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Vn.updateTime(Tr(i.updateTime)):void 0!==i.exists?Vn.exists(i.exists):Vn.none():Vn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(ht("REQUEST_TIME"===l.setToServerValue),f=new ou):"appendMissingElements"in l?f=new ef(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new tf(l.removeAllFromArray.values||[]):"increment"in l?f=new hd(a,l.increment):st();const _=Zn.fromServerFormat(l.fieldPath);return new yg(_,f)}(n,i)):[];var i;if(e.update){const i=El(n,e.update.name),a=new ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Fi((e.updateMask.fieldPaths||[]).map(w=>Zn.fromServerFormat(w)));return new au(i,a,l,t,r)}return new vl(i,a,t,r)}if(e.delete){const i=El(n,e.delete);return new nf(i,t)}if(e.verify){const i=El(n,e.verify);return new w0(i,t)}return st()}function BN(n,e){return{documents:[DA(n,e.path)]}}function SA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=DA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=DA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return HN(mn.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:rf((D=w).field),direction:eL(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.yt||Q_(w)?w:{value:w});var w,f,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function jN(n){let e=FN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ht(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=function(D){const x=$N(D);return x instanceof mn&&s0(x)?x.getFilters():[x]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new Yh(_y((x=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let f=null;t.limit&&(f=function(D){let x;return x="object"==typeof D?D.value:D,Q_(x)?null:x}(t.limit));let _=null;var D;t.startAt&&(_=new Ur((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Ur(D.values||[],!D.before)}(t.endAt)),cA(e,i,l,a,f,"F",_,w)}function $N(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=_y(e.unaryFilter.field);return rn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=_y(e.unaryFilter.field);return rn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_y(e.unaryFilter.field);return rn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=_y(e.unaryFilter.field);return rn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(n):void 0!==n.fieldFilter?rn.create(_y((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return mn.create(e.compositeFilter.filters.map(t=>$N(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return st()}}(e.compositeFilter.op))}(n):st();var e}function eL(n){return Ye[n]}function tL(n){return at[n]}function nL(n){return At[n]}function rf(n){return{fieldPath:n.canonicalString()}}function _y(n){return Zn.fromServerFormat(n.fieldPath)}function HN(n){return n instanceof rn?function(e){if("=="===e.op){if(n0(e.value))return{unaryFilter:{field:rf(e.field),op:"IS_NAN"}};if(cb(e.value))return{unaryFilter:{field:rf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(n0(e.value))return{unaryFilter:{field:rf(e.field),op:"IS_NOT_NAN"}};if(cb(e.value))return{unaryFilter:{field:rf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rf(e.field),op:tL(e.op),value:e.value}}}(n):n instanceof mn?function(e){const t=e.getFilters().map(r=>HN(r));return 1===t.length?t[0]:{compositeFilter:{op:nL(e.op),filters:t}}}(n):st()}function rL(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function GN(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ts(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=WN(e)),e=iL(n.get(t),e);return WN(e)}function iL(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function WN(n){return n+"\x01\x01"}function Il(n){const e=n.length;if(ht(e>=2),2===e)return ht("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&st(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:st()}a=l+2}return new an(r)}const zN=["userId","batchId"];function Ab(n,e){return[n,Ts(e)]}function qN(n,e,t){return[n,Ts(e),t]}const sL={},oL=["prefixPath","collectionGroup","readTime","documentId"],aL=["prefixPath","collectionGroup","documentId"],uL=["collectionGroup","readTime","prefixPath","documentId"],lL=["canonicalId","targetId"],cL=["targetId","path"],dL=["path","targetId"],hL=["collectionId","parent"],fL=["indexId","uid"],pL=["uid","sequenceNumber"],gL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mL=["indexId","uid","orderedDocumentKey"],_L=["userId","collectionPath","documentId"],yL=["userId","collectionPath","largestBatchId"],vL=["userId","collectionGroup","largestBatchId"],ZN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wL=[...ZN,"documentOverlays"],KN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],YN=KN,EL=[...YN,"indexConfiguration","indexState","indexEntries"];class AA extends sb{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function bi(n,e){const t=Ke(n);return Qs.M(t.re,e)}class xA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Tb(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=s();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const _=Db(l,f);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(_t.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),d())}isEqual(e){return this.batchId===e.batchId&&zh(this.mutations,e.mutations,(t,r)=>v0(t,r))&&zh(this.baseMutations,e.baseMutations,(t,r)=>v0(t,r))}}class MA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ht(e.mutations.length===r.length);let i=u;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new MA(e,t,r,i)}}class RA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class sf{constructor(e,t,r,i,a=_t.min(),l=_t.min(),f=or.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new sf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new sf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new sf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class QN{constructor(e){this.oe=e}}function XN(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:E0(i=n.oe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Rt(i,a.version.toTimestamp()),createTime:Rt(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wg(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:wg(e.version)}}var i,a;return r}function xb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Eg(n){const e=new qn(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function Ig(n,e){const t=(e.baseMutations||[]).map(a=>TA(n.oe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>TA(n.oe,a)),i=qn.fromMillis(e.localWriteTimeMs);return new xA(e.batchId,i,t,r)}function b0(n){const e=Eg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Eg(n.lastLimboFreeSnapshotVersion):_t.min();let r;var i;return void 0!==n.query.documents?(ht(1===(i=n.query).documents.length),r=Xi(_g(FN(i.documents[0])))):r=Xi(jN(n.query)),new sf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,or.fromBase64String(n.resumeToken))}function JN(n,e){const t=wg(e.snapshotVersion),r=wg(e.lastLimboFreeSnapshotVersion);let i;i=ld(e.target)?BN(n.oe,e.target):SA(n.oe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ml(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function NA(n){const e=jN({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?g0(e,e.limit,"L"):e}function PA(n,e){return new RA(e.largestBatchId,TA(n.oe,e.overlayMutation))}function eP(n,e){const t=e.path.lastSegment();return[n,Ts(e.path.popLast()),t]}function tP(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:wg(r.readTime),documentKey:Ts(r.documentKey.path),largestBatchId:r.largestBatchId}}class CL{getBundleMetadata(e,t){return nP(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Eg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return nP(e).put({bundleId:(r=t).id,createTime:wg(Tr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return rP(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:NA(i.bundledQuery),readTime:Eg(i.readTime)};var i})}saveNamedQuery(e,t){return rP(e).put({name:(r=t).name,readTime:wg(Tr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function nP(n){return bi(n,"bundles")}function rP(n){return bi(n,"namedQueries")}class Mb{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new Mb(e,t.uid||"")}getOverlay(e,t){return D0(e).get(eP(this.userId,t)).next(r=>r?PA(this.Tt,r):null)}getOverlays(e,t){const r=uu();return ie.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new RA(t,l);i.push(this.ce(e,f))}),ie.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ts(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(D0(e).Y("collectionPathOverlayIndex",f))}),ie.waitFor(a)}getOverlaysForCollection(e,t,r){const i=uu(),a=Ts(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return D0(e).W("collectionPathOverlayIndex",l).next(f=>{for(const _ of f){const w=PA(this.Tt,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=uu();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return D0(e).X({index:"collectionGroupOverlayIndex",range:f},(_,w,D)=>{const x=PA(this.Tt,w);a.size()<i||x.largestBatchId===l?(a.set(x.getKey(),x),l=x.largestBatchId):D.done()}).next(()=>a)}ce(e,t){return D0(e).put(function(r,i,a){const[l,f,_]=eP(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:C0(r.oe,a.mutation)}}(this.Tt,this.userId,t))}}function D0(n){return bi(n,"documentOverlays")}class Cg{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(vr(e.integerValue));else if("doubleValue"in e){const r=vr(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),X_(r)?t.de(0):t.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(ru(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?Xs(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):st()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const r=e.fields||{};this.fe(t,55);for(const i of Object.keys(r))this.we(i,t),this.he(r[i],t)}Ie(e,t){const r=e.values||[];this.fe(t,50);for(const i of r)this.he(i,t)}ye(e,t){this.fe(t,37),qe.fromName(e).path.forEach(r=>{this.fe(t,60),this.Te(r,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function bL(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function iP(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=bL(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Cg.Ee=new Cg;class DL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.Pe()}ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Ve()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.Pe()}De(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Ve()}Ce(e){const t=this.xe(e),r=iP(t);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}ke(e){const t=this.xe(e),r=iP(t);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}be(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class TL{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class SL{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class T0{constructor(){this.Le=new DL,this.qe=new TL(this.Le),this.Ue=new SL(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class bg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new bg(this.indexId,this.documentKey,this.arrayValue,r)}}function af(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=sP(n.arrayValue,e.arrayValue),0!==t?t:(t=sP(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function sP(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class AL{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const r=t;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){ht(e.collectionGroup===this.collectionId);const t=Qw(e);if(void 0!==t&&!this.He(t))return!1;const r=fl(e);let i=0,a=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.ze){const l=r[i];if(!this.Je(this.ze,l)||!this.Ye(this.Qe[a++],l))return!1;++i}for(;i<r.length;++i)if(a>=this.Qe.length||!this.Ye(this.Qe[a++],r[i]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function oP(n){var e,t;if(ht(n instanceof rn||n instanceof mn),n instanceof rn){if(n instanceof d0){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>rn.create(n.field,"==",a)))||[];return mn.create(i,"or")}return n}const r=n.filters.map(i=>oP(i));return mn.create(r,n.op)}function xL(n){if(0===n.getFilters().length)return[];const e=FA(oP(n));return ht(aP(e)),OA(e)||kA(e)?[e]:e.getFilters()}function OA(n){return n instanceof rn}function kA(n){return n instanceof mn&&s0(n)}function aP(n){return OA(n)||kA(n)||function(e){if(e instanceof mn&&sy(e)){for(const t of e.getFilters())if(!OA(t)&&!kA(t))return!1;return!0}return!1}(n)}function FA(n){if(ht(n instanceof rn||n instanceof mn),n instanceof rn)return n;if(1===n.filters.length)return FA(n.filters[0]);const e=n.filters.map(r=>FA(r));let t=mn.create(e,n.op);return t=Rb(t),aP(t)?t:(ht(t instanceof mn),ht(ud(t)),ht(t.filters.length>1),t.filters.reduce((r,i)=>LA(r,i)))}function LA(n,e){let t;return ht(n instanceof rn||n instanceof mn),ht(e instanceof rn||e instanceof mn),t=n instanceof rn?e instanceof rn?mn.create([n,e],"and"):uP(n,e):e instanceof rn?uP(e,n):function(r,i){if(ht(r.filters.length>0&&i.filters.length>0),ud(r)&&ud(i))return a0(r,i.getFilters());const a=sy(r)?r:i,l=sy(r)?i:r,f=a.filters.map(_=>LA(_,l));return mn.create(f,"or")}(n,e),Rb(t)}function uP(n,e){if(ud(e))return a0(e,n.getFilters());{const t=e.filters.map(r=>LA(n,r));return mn.create(t,"or")}}function Rb(n){if(ht(n instanceof rn||n instanceof mn),n instanceof rn)return n;const e=n.getFilters();if(1===e.length)return Rb(e[0]);if(o0(n))return n;const t=e.map(i=>Rb(i)),r=[];return t.forEach(i=>{i instanceof rn?r.push(i):i instanceof mn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:mn.create(r,n.op)}class ML{constructor(){this.Ze=new VA}addToCollectionParentIndex(e,t){return this.Ze.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Ys.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class VA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Sn(an.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Sn(an.comparator)).toArray()}}const Nb=new Uint8Array(0);class RL{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new VA,this.tn=new wl(r=>ml(r),(r,i)=>Xh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Ts(i)};return lP(e).put(a)}return ie.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[tb(t),""],!1,!0);return lP(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Il(l.parent))}return r})}addFieldIndex(e,t){const r=Pb(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=A0(e);return a.next(f=>{l.put(tP(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Pb(e),i=A0(e),a=S0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=S0(e);let i=!0;const a=new Map;return ie.forEach(this.en(t),l=>this.nn(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=d();const f=[];return ie.forEach(a,(_,w)=>{var D;Oe("IndexedDbIndexManager",`Using index ${D=_,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(It=>`${It.fieldPath}:${It.kind}`).join(",")}`} to execute ${ml(t)}`);const x=function(It,Gt){const $t=Qw(Gt);if(void 0===$t)return null;for(const Yt of cd(It,$t.fieldPath))switch(Yt.op){case"array-contains-any":return Yt.value.arrayValue.values||[];case"array-contains":return[Yt.value]}return null}(w,_),P=function(It,Gt){const $t=new Map;for(const Yt of fl(Gt))for(const Ai of cd(It,Yt.fieldPath))switch(Ai.op){case"==":case"in":$t.set(Yt.fieldPath.canonicalString(),Ai.value);break;case"not-in":case"!=":return $t.set(Yt.fieldPath.canonicalString(),Ai.value),Array.from($t.values())}return null}(w,_),B=function(It,Gt){const $t=[];let Yt=!0;for(const Ai of fl(Gt)){const Sf=0===Ai.kind?f0(It,Ai.fieldPath,It.startAt):_b(It,Ai.fieldPath,It.startAt);$t.push(Sf.value),Yt&&(Yt=Sf.inclusive)}return new Ur($t,Yt)}(w,_),Z=function(It,Gt){const $t=[];let Yt=!0;for(const Ai of fl(Gt)){const Sf=0===Ai.kind?_b(It,Ai.fieldPath,It.endAt):f0(It,Ai.fieldPath,It.endAt);$t.push(Sf.value),Yt&&(Yt=Sf.inclusive)}return new Ur($t,Yt)}(w,_),ce=this.sn(_,w,B),Me=this.sn(_,w,Z),Tt=this.rn(_,w,P),Bt=this.on(_.indexId,x,ce,B.inclusive,Me,Z.inclusive,Tt);return ie.forEach(Bt,It=>r.J(It,t.limit).next(Gt=>{Gt.forEach($t=>{const Yt=qe.fromSegments($t.documentKey);l.has(Yt)||(l=l.add(Yt),f.push(Yt))})}))}).next(()=>f)}return ie.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:xL(mn.create(e.filters,"and")).map(r=>ly(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,r,i,a,l,f){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),D=[];for(let x=0;x<_;++x){const P=t?this.un(t[x/w]):Nb,B=this.cn(e,P,r[x%w],i),Z=this.an(e,P,a[x%w],l),ce=f.map(Me=>this.cn(e,P,Me,!0));D.push(...this.createRange(B,Z,ce))}return D}cn(e,t,r,i){const a=new bg(e,qe.empty(),t,r);return i?a:a.Ge()}an(e,t,r,i){const a=new bg(e,qe.empty(),t,r);return i?a.Ge():a}nn(e,t){const r=new AL(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.We(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.en(t);return ie.forEach(i,a=>this.nn(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let _=new Sn(Zn.comparator),w=!1;for(const D of f.filters)for(const x of D.getFlattenedFilters())x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?w=!0:_=_.add(x.field));for(const D of f.orderBy)D.field.isKeyField()||(_=_.add(D.field));return _.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}hn(e,t){const r=new T0;for(const i of fl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ke(i.kind);Cg.Ee.ae(a,l)}return r.Be()}un(e){const t=new T0;return Cg.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const r=new T0;return Cg.Ee.ae(ad(this.databaseId,t),r.Ke(function(i){const a=fl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Be()}rn(e,t,r){if(null===r)return[];let i=[];i.push(new T0);let a=0;for(const l of fl(e)){const f=r[a++];for(const _ of i)if(this.fn(t,l.fieldPath)&&ny(f))i=this.dn(i,l,f);else{const w=_.Ke(l.kind);Cg.Ee.ae(f,w)}}return this._n(i)}sn(e,t,r){return this.rn(e,t,r.position)}_n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Be();return t}dn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const _=new T0;_.seed(f.Be()),Cg.Ee.ae(l,_.Ke(t.kind)),a.push(_)}return a}fn(e,t){return!!e.filters.find(r=>r instanceof rn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Pb(e),i=A0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return ie.forEach(a,f=>i.get([f.indexId,this.uid]).next(_=>{l.push(function(w,D){const x=D?new nd(D.sequenceNumber,new Ys(Eg(D.readTime),new qe(Il(D.documentKey)),D.largestBatchId)):nd.empty(),P=w.fields.map(([B,Z])=>new q_(Zn.fromServerFormat(B),Z));return new cg(w.indexId,w.collectionGroup,P,x)}(f,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Ut(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Pb(e),a=A0(e);return this.wn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ie.forEach(f,_=>a.put(tP(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ie.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ie.forEach(f,_=>this.mn(e,i,_).next(w=>{const D=this.gn(a,_);return w.isEqual(D)?ie.resolve():this.yn(e,a,_,w,D)}))))})}pn(e,t,r,i){return S0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,t.key),documentKey:t.key.path.toArray()})}In(e,t,r,i){return S0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,t.key),t.key.path.toArray()])}mn(e,t,r){const i=S0(e);let a=new Sn(af);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,t)])},(l,f)=>{a=a.add(new bg(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}gn(e,t){let r=new Sn(af);const i=this.hn(t,e);if(null==i)return r;const a=Qw(t);if(null!=a){const l=e.data.field(a.fieldPath);if(ny(l))for(const f of l.arrayValue.values||[])r=r.add(new bg(t.indexId,e.key,this.un(f),i))}else r=r.add(new bg(t.indexId,e.key,Nb,i));return r}yn(e,t,r,i,a){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,_,w,D,x){const P=f.getIterator(),B=_.getIterator();let Z=Qh(P),ce=Qh(B);for(;Z||ce;){let Me=!1,Tt=!1;if(Z&&ce){const Bt=w(Z,ce);Bt<0?Tt=!0:Bt>0&&(Me=!0)}else null!=Z?Tt=!0:Me=!0;Me?(D(ce),ce=Qh(B)):Tt?(x(Z),Z=Qh(P)):(Z=Qh(P),ce=Qh(B))}}(i,a,af,f=>{l.push(this.pn(e,t,r,f))},f=>{l.push(this.In(e,t,r,f))}),ie.waitFor(l)}wn(e){let t=1;return A0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>af(l,f)).filter((l,f,_)=>!f||0!==af(l,_[f-1]));const i=[];i.push(e);for(const l of r){const f=af(l,e),_=af(l,t);if(0===f)i[0]=e.Ge();else if(f>0&&_<0)i.push(l),i.push(l.Ge());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.Tn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Nb,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Nb,[]]))}return a}Tn(e,t){return af(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cP)}getMinOffset(e,t){return ie.mapArray(this.en(t),r=>this.nn(e,r).next(i=>i||st())).next(cP)}}function lP(n){return bi(n,"collectionParents")}function S0(n){return bi(n,"indexEntries")}function Pb(n){return bi(n,"indexConfiguration")}function A0(n){return bi(n,"indexState")}function cP(n){ht(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Xw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ys(e.readTime,e.documentKey,t)}const dP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Js{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Js(e,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function hP(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const _=r.X({range:l},(D,x,P)=>(f++,P.delete()));a.push(_.next(()=>{ht(1===f)}));const w=[];for(const D of t.mutations){const x=qN(e,D.key.path,t.batchId);a.push(i.delete(x)),w.push(D.key)}return ie.waitFor(a).next(()=>w)}function Ob(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Js.DEFAULT_COLLECTION_PERCENTILE=10,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Js.DEFAULT=new Js(41943040,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Js.DISABLED=new Js(-1,0,0);class kb{constructor(e,t,r,i){this.userId=e,this.Tt=t,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,t,r,i){ht(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new kb(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return uf(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=yy(e),l=uf(e);return l.add({}).next(f=>{ht("number"==typeof f);const _=new xA(f,t,r,i),w=function(P,B,Z){const ce=Z.baseMutations.map(Tt=>C0(P.oe,Tt)),Me=Z.mutations.map(Tt=>C0(P.oe,Tt));return{userId:B,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:ce,mutations:Me}}(this.Tt,this.userId,_),D=[];let x=new Sn((P,B)=>Ut(P.canonicalString(),B.canonicalString()));for(const P of i){const B=qN(this.userId,P.key.path,f);x=x.add(P.key.path.popLast()),D.push(l.put(w)),D.push(a.put(B,sL))}return x.forEach(P=>{D.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.En[f]=_.keys()}),ie.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return uf(e).get(t).next(r=>r?(ht(r.userId===this.userId),Ig(this.Tt,r)):null)}An(e,t){return this.En[t]?ie.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.En[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return uf(e).X({index:"userMutationsIndex",range:i},(l,f,_)=>{f.userId===this.userId&&(ht(f.batchId>=r),a=Ig(this.Tt,f)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return uf(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return uf(e).W("userMutationsIndex",t).next(r=>r.map(i=>Ig(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ab(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return yy(e).X({range:i},(l,f,_)=>{const[w,D,x]=l,P=Il(D);if(w===this.userId&&t.path.isEqual(P))return uf(e).get(x).next(B=>{if(!B)throw st();ht(B.userId===this.userId),a.push(Ig(this.Tt,B))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(Ut);const i=[];return t.forEach(a=>{const l=Ab(this.userId,a.path),f=IDBKeyRange.lowerBound(l),_=yy(e).X({range:f},(w,D,x)=>{const[P,B,Z]=w,ce=Il(B);P===this.userId&&a.path.isEqual(ce)?r=r.add(Z):x.done()});i.push(_)}),ie.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Ab(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new Sn(Ut);return yy(e).X({range:l},(_,w,D)=>{const[x,P,B]=_,Z=Il(P);x===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(f=f.add(B)):D.done()}).next(()=>this.Rn(e,f))}Rn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(uf(e).get(a).next(l=>{if(null===l)throw st();ht(l.userId===this.userId),r.push(Ig(this.Tt,l))}))}),ie.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return hP(e.re,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Pn(t.batchId)}),ie.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return yy(e).X({range:r},(a,l,f)=>{if(a[0]===this.userId){const _=Il(a[1]);i.push(_)}else f.done()}).next(()=>{ht(0===i.length)})})}containsKey(e,t){return fP(e,this.userId,t)}vn(e){return pP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fP(n,e,t){const r=Ab(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return yy(n).X({range:a,Z:!0},(f,_,w)=>{const[D,x,P]=f;D===e&&x===i&&(l=!0),w.done()}).next(()=>l)}function uf(n){return bi(n,"mutations")}function yy(n){return bi(n,"documentMutations")}function pP(n){return bi(n,"mutationQueues")}class Dg{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new Dg(0)}static Sn(){return new Dg(-1)}}class NL{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const r=new Dg(t.highestTargetId);return t.highestTargetId=r.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>_t.fromTimestamp(new qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Cn(e,i)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(t,r),this.Cn(e,r))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vy(e).delete(t.targetId)).next(()=>this.Dn(e)).next(r=>(ht(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return vy(e).X((l,f)=>{const _=b0(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ie.waitFor(a)).next(()=>i)}forEachTarget(e,t){return vy(e).X((r,i)=>{const a=b0(i);t(a)})}Dn(e){return gP(e).get("targetGlobalKey").next(t=>(ht(null!==t),t))}Cn(e,t){return gP(e).put("targetGlobalKey",t)}xn(e,t){return vy(e).put(JN(this.Tt,t))}Nn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ml(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return vy(e).X({range:i,index:"queryTargetsIndex"},(l,f,_)=>{const w=b0(f);Xh(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=lf(e);return t.forEach(l=>{const f=Ts(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),ie.waitFor(i)}removeMatchingKeys(e,t,r){const i=lf(e);return ie.forEach(t,a=>{const l=Ts(a.path);return ie.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=lf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=lf(e);let a=d();return i.X({range:r,Z:!0},(l,f,_)=>{const w=Il(l[1]),D=new qe(w);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Ts(t.path),i=IDBKeyRange.bound([r],[tb(r)],!1,!0);let a=0;return lf(e).X({index:"documentTargetsIndex",Z:!0,range:i},([l,f],_,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}ie(e,t){return vy(e).get(t).next(r=>r?b0(r):null)}}function vy(n){return bi(n,"targets")}function gP(n){return bi(n,"targetGlobal")}function lf(n){return bi(n,"targetDocuments")}function mP([n,e],[t,r]){const i=Ut(n,t);return 0===i?Ut(e,r):i}class PL{constructor(e){this.kn=e,this.buffer=new Sn(mP),this.$n=0}Mn(){return++this.$n}On(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();mP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OL{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Fn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){tu(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield eu(r)}yield t.Bn(3e5)}))}}class kL{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ie.resolve(Cs.at);const r=new PL(t);return this.Ln.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Ln.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(dP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dP):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let r,i,a,l,f,_,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,l=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,f=Date.now(),this.removeTargets(e,r,t))).next(x=>(a=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(w=Date.now(),H_()<=Is.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(_-f)+`ms\n\tRemoved ${x} documents in `+(w-_)+`ms\nTotal Duration: ${w-D}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:x})))}}class FL{constructor(e,t){this.db=e,this.garbageCollector=new kL(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Gn(e){let t=0;return this.Un(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(r,i)=>t(i))}addReference(e,t,r){return Fb(e,r)}removeReference(e,t,r){return Fb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Fb(e,t)}jn(e,t){return function(r,i){let a=!1;return pP(r).tt(l=>fP(r,l,i).next(f=>(f&&(a=!0),ie.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Qn(e,(l,f)=>{if(f<=t){const _=this.jn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,_t.min()),lf(e).delete([0,Ts(l.path)])))});i.push(_)}}).next(()=>ie.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Fb(e,t)}Qn(e,t){const r=lf(e);let i,a=Cs.at;return r.X({index:"documentTargetsIndex"},([l,f],{path:_,sequenceNumber:w})=>{0===l?(a!==Cs.at&&t(new qe(Il(i)),a),a=w,i=_):a=Cs.at}).next(()=>{a!==Cs.at&&t(new qe(Il(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fb(n,e){return lf(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ts(e.path),sequenceNumber:r}));var r}class _P{constructor(){this.changes=new wl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class LL{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Tg(e).put(r)}removeEntry(e,t,r){return Tg(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],xb(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.zn(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return Tg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(x0(t))},(i,a)=>{r=this.Wn(t,a)}).next(()=>r)}Hn(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return Tg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(x0(t))},(i,a)=>{r={document:this.Wn(t,a),size:Ob(a)}}).next(()=>r)}getEntries(e,t){let r=Ds();return this.Jn(e,t,(i,a)=>{const l=this.Wn(i,a);r=r.insert(i,l)}).next(()=>r)}Yn(e,t){let r=Ds(),i=new ar(qe.comparator);return this.Jn(e,t,(a,l)=>{const f=this.Wn(a,l);r=r.insert(a,f),i=i.insert(a,Ob(l))}).next(()=>({documents:r,Zn:i}))}Jn(e,t,r){if(t.isEmpty())return ie.resolve();let i=new Sn(EP);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(x0(i.first()),x0(i.last())),l=i.getIterator();let f=l.getNext();return Tg(e).X({index:"documentKeyIndex",range:a},(_,w,D)=>{const x=qe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&EP(f,x)<0;)r(f,null),f=l.getNext();f&&f.isEqual(x)&&(r(f,w),f=l.hasNext()?l.getNext():null),f?D.j(x0(f)):D.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),xb(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tg(e).W(IDBKeyRange.bound(l,f,!0)).next(_=>{let w=Ds();for(const D of _){const x=this.Wn(qe.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);x.isFoundDocument()&&(_l(t,x)||i.has(x.key))&&(w=w.insert(x.key,x))}return w})}getAllFromCollectionGroup(e,t,r,i){let a=Ds();const l=wP(t,r),f=wP(t,Ys.max());return Tg(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(_,w,D)=>{const x=this.Wn(qe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(x.key,x),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new VL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vP(e).get("remoteDocumentGlobalKey").next(t=>(ht(!!t),t))}zn(e,t){return vP(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const r=function IL(n,e){let t;if(e.document)t=UN(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=Eg(e.noDocument.readTime);t=Nn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=qe.fromSegments(e.unknownDocument.path),i=Eg(e.unknownDocument.version);t=Nn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new qn(r[0],r[1]);return _t.fromTimestamp(i)}(e.readTime)),t}(this.Tt,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return Nn.newInvalidDocument(e)}}function yP(n){return new LL(n)}class VL extends _P{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new wl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Sn((a,l)=>Ut(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.ts.get(a);if(t.push(this.Xn.removeEntry(e,a,f.readTime)),l.isValidDocument()){const _=XN(this.Xn.Tt,l);i=i.add(a.path.popLast());const w=Ob(_);r+=w-f.size,t.push(this.Xn.addEntry(e,a,_))}else if(r-=f.size,this.trackRemovals){const _=XN(this.Xn.Tt,l.convertToNoDocument(_t.min()));t.push(this.Xn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Xn.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(r=>(this.ts.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:r,Zn:i})=>(i.forEach((a,l)=>{this.ts.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function vP(n){return bi(n,"remoteDocumentGlobal")}function Tg(n){return bi(n,"remoteDocumentsV14")}function x0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wP(n,e){const t=e.documentKey.path.toArray();return[n,xb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function EP(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Ut(t[a],r[a]),i)return i;return i=Ut(t.length,r.length),i||(i=Ut(t[t.length-2],r[r.length-2]),i||Ut(t[t.length-1],r[r.length-1]))}class UL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class IP{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&fd(r.mutation,i,Fi.empty(),qn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,d()).next(()=>r))}getLocalViewOfDocuments(e,t,r=d()){const i=uu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=my();return a.forEach((f,_)=>{l=l.insert(f,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=uu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,d()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=Ds();const l=o(),f=o();return t.forEach((_,w)=>{const D=r.get(w.key);i.has(w.key)&&(void 0===D||D.mutation instanceof au)?a=a.insert(w.key,w):void 0!==D?(l.set(w.key,D.mutation.getFieldMask()),fd(D.mutation,w,D.mutation.getFieldMask(),qn.now())):l.set(w.key,Fi.empty())}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,D)=>l.set(w,D)),t.forEach((w,D)=>{var x;return f.set(w,new UL(D,null!==(x=l.get(w))&&void 0!==x?x:null))}),f))}recalculateAndSaveOverlays(e,t){const r=o();let i=new ar((l,f)=>l-f),a=d();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let D=r.get(_)||Fi.empty();D=f.applyToLocalView(w,D),r.set(_,D);const x=(i.get(f.batchId)||d()).add(_);i=i.insert(f.batchId,x)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const _=f.getNext(),w=_.key,D=_.value,x=s();D.forEach(P=>{if(!a.has(P)){const B=Db(t.get(P),r.get(P));null!==B&&x.set(P,B),a=a.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,x))}return ie.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):p0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ie.resolve(uu());let f=-1,_=a;return l.next(w=>ie.forEach(w,(D,x)=>(f<x.largestBatchId&&(f=x.largestBatchId),a.get(D)?ie.resolve():this.remoteDocumentCache.getEntry(e,D).next(P=>{_=_.insert(D,P)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,d())).next(D=>({batchId:f,changes:CA(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let i=my();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=my();return this.indexManager.getCollectionParents(e,i).next(l=>ie.forEach(l,f=>{const _=(w=t,D=f.child(i),new su(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((D,x)=>{a=a.insert(D,x)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,_)=>{const w=_.getKey();null===a.get(w)&&(a=a.insert(w,Nn.newInvalidDocument(w)))});let l=my();return a.forEach((f,_)=>{const w=i.get(f);void 0!==w&&fd(w.mutation,_,Fi.empty(),qn.now()),_l(t,_)&&(l=l.insert(f,_))}),l})}}class BL{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return ie.resolve(this.es.get(t))}saveBundleMetadata(e,t){var r;return this.es.set(t.id,{id:(r=t).id,version:r.version,createTime:Tr(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(r=t).name,query:NA(r.bundledQuery),readTime:Tr(r.readTime)}),ie.resolve();var r}}class jL{constructor(){this.overlays=new ar(qe.comparator),this.ss=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=uu();return ie.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ce(e,t,a)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ss.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ss.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=uu(),a=t.length+1,l=new qe(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const _=f.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ar((w,D)=>w-D);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=a.get(w.largestBatchId);null===D&&(D=uu(),a=a.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const f=uu(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,D)=>f.set(w,D)),!(f.size()>=i)););return ie.resolve(f)}ce(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new RA(t,r));let a=this.ss.get(t);void 0===a&&(a=d(),this.ss.set(t,a)),this.ss.set(t,a.add(r.key))}}class UA{constructor(){this.rs=new Sn(Di.os),this.us=new Sn(Di.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const r=new Di(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ls(new Di(e,t))}fs(e,t){e.forEach(r=>this.removeReference(r,t))}ds(e){const t=new qe(new an([])),r=new Di(t,e),i=new Di(t,e+1),a=[];return this.us.forEachInRange([r,i],l=>{this.ls(l),a.push(l.key)}),a}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new qe(new an([])),r=new Di(t,e),i=new Di(t,e+1);let a=d();return this.us.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Di(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Di{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return qe.comparator(e.key,t.key)||Ut(e.gs,t.gs)}static cs(e,t){return Ut(e.gs,t.gs)||qe.comparator(e.key,t.key)}}class $L{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new Sn(Di.os)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ys;this.ys++;const l=new xA(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.ps=this.ps.add(new Di(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ts(t+1),a=i<0?0:i;return ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Di(t,0),i=new Di(t,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],l=>{const f=this.Is(l.gs);a.push(f)}),ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(Ut);return t.forEach(i=>{const a=new Di(i,0),l=new Di(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([a,l],f=>{r=r.add(f.gs)})}),ie.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;qe.isDocumentKey(a)||(a=a.child(""));const l=new Di(new qe(a),0);let f=new Sn(Ut);return this.ps.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(_.gs)),!0)},l),ie.resolve(this.Es(f))}Es(e){const t=[];return e.forEach(r=>{const i=this.Is(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ht(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return ie.forEach(t.mutations,i=>{const a=new Di(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,t){const r=new Di(t,0),i=this.ps.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ie.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class HL{constructor(e){this.Rs=e,this.docs=new ar(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=Ds();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Nn.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Ds();const l=t.path,f=new qe(l.child("")),_=this.docs.getIteratorFrom(f);for(;_.hasNext();){const{key:w,value:{document:D}}=_.getNext();if(!l.isPrefixOf(w.path))break;w.path.length>l.length+1||Xw(rb(D),r)<=0||(i.has(D.key)||_l(t,D))&&(a=a.insert(D.key,D.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,t,r,i){st()}Ps(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new GL(this)}getSize(e){return ie.resolve(this.size)}}class GL extends _P{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class WL{constructor(e){this.persistence=e,this.vs=new wl(t=>ml(t),Xh),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.bs=0,this.Vs=new UA,this.targetCount=0,this.Ss=Dg.Vn()}forEachTarget(e,t){return this.vs.forEach((r,i)=>t(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ie.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new Dg(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.xn(t),ie.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.vs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.vs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ie.waitFor(a).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.vs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ie.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Vs.ws(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.Vs.containsKey(t))}}class CP{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new Cs(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new WL(this),this.indexManager=new ML,this.remoteDocumentCache=new HL(r=>this.referenceDelegate.ks(r)),this.Tt=new QN(t),this.$s=new BL(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new $L(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new zL(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Fs(e,t){return ie.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class zL extends sb{constructor(e){super(),this.currentSequenceNumber=e}}class Lb{constructor(e){this.persistence=e,this.Bs=new UA,this.Ls=null}static qs(e){return new Lb(e)}get Us(){if(this.Ls)return this.Ls;throw st()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Us.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Us,r=>{const i=qe.fromPath(r);return this.Ks(e,i).next(a=>{a||t.removeEntry(i,_t.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(r=>{r?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return ie.or([()=>ie.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Fs(e,t)])}}class qL{constructor(e){this.Tt=e}F(e,t,r,i){const a=new dg("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zN,{unique:!0}),f.createObjectStore("documentMutations"),bP(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=ie.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),bP(e)),l=l.next(()=>function(f){const _=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,_){return _.store("mutations").W().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zN,{unique:!0});const D=_.store("mutations"),x=w.map(P=>D.put(P));return ie.waitFor(x)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Gs(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(a)))),r<7&&i>=7&&(l=l.next(()=>this.js(a))),r<8&&i>=8&&(l=l.next(()=>this.zs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Ws(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:_L});_.createIndex("collectionPathOverlayIndex",yL,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",vL,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:oL});_.createIndex("documentKeyIndex",aL),_.createIndex("collectionGroupIndex",uL)}(e)).next(()=>this.Hs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.Js(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:fL}).createIndex("sequenceNumberIndex",pL,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:gL}).createIndex("documentKeyIndex",mL,{unique:!1})}(e))),l}Qs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Ob(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ie.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(f=>ie.forEach(f,_=>{ht(_.userId===a.userId);const w=Ig(this.Tt,_);return hP(e,a.userId,w).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,f)=>{const _=new an(l),w=[0,Ts(_)];a.push(t.get(w).next(D=>D?ie.resolve():t.put({targetId:0,path:Ts(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ie.waitFor(a))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:hL});const r=t.store("collectionParents"),i=new VA,a=l=>{if(i.add(l)){const f=l.lastSegment(),_=l.popLast();return r.put({collectionId:f,parent:Ts(_)})}};return t.store("remoteDocuments").X({Z:!0},(l,f)=>{const _=new an(l);return a(_.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([l,f,_],w)=>{const D=Il(f);return a(D.popLast())}))}Ws(e){const t=e.store("targets");return t.X((r,i)=>{const a=b0(i),l=JN(this.Tt,a);return t.put(l)})}Hs(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,l)=>{const f=t.store("remoteDocumentsV14"),_=(w=l,w.document?new qe(an.fromString(w.document.name).popFirst(5)):w.noDocument?qe.fromSegments(w.noDocument.path):w.unknownDocument?qe.fromSegments(w.unknownDocument.path):st()).path.toArray();var w;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(D))}).next(()=>ie.waitFor(i))}Js(e,t){const r=t.store("mutations"),i=yP(this.Tt),a=new CP(Lb.qs,this.Tt.oe);return r.W().next(l=>{const f=new Map;return l.forEach(_=>{var w;let D=null!==(w=f.get(_.userId))&&void 0!==w?w:d();Ig(this.Tt,_).keys().forEach(x=>D=D.add(x)),f.set(_.userId,D)}),ie.forEach(f,(_,w)=>{const D=new Qr(w),x=Mb.ue(this.Tt,D),P=a.getIndexManager(D),B=kb.ue(D,this.Tt,P,a.referenceDelegate);return new IP(i,B,x,P).recalculateAndSaveOverlaysForDocumentKeys(new AA(t,Cs.at),_).next()})})}}function bP(n){n.createObjectStore("targetDocuments",{keyPath:cL}).createIndex("documentTargetsIndex",dL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lL,{unique:!0}),n.createObjectStore("targetGlobal")}const BA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jA{constructor(e,t,r,i,a,l,f,_,w,D,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ys=a,this.window=l,this.document=f,this.Zs=w,this.Xs=D,this.ti=x,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=P=>Promise.resolve(),!jA.C())throw new Re(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FL(this,i),this.oi=t+"main",this.Tt=new QN(_),this.ui=new Qs(this.oi,this.ti,new qL(this.Tt)),this.Ns=new NL(this.referenceDelegate,this.Tt),this.remoteDocumentCache=yP(this.Tt),this.$s=new CL,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===D&&yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(oe.FAILED_PRECONDITION,BA);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Cs(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var r=(0,ge.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(tu(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return M0(e).get("owner").next(t=>ie.resolve(this.yi(t)))}pi(e){return Vb(e).delete(this.clientId)}Ii(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=bi(r,"clientMetadata");return i.W().next(a=>{const l=e.Ei(a,18e5),f=a.filter(_=>-1===l.indexOf(_));return ie.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ci)for(const r of t)e.ci.removeItem(e.Ai(r.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?ie.resolve(!0):M0(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Re(oe.FAILED_PRECONDITION,BA);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vb(e).W().next(r=>void 0===this.Ei(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new AA(t,Cs.at);return e.mi(r).next(()=>e.pi(r))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(r=>this.Ti(r.updateTimeMs,t)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Vb(e).W().next(t=>this.Ei(t,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return kb.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RL(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return Mb.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.ti)?EL:14===l?YN:13===l?KN:12===l?wL:11===l?ZN:void st();var l;let f;return this.ui.runTransaction(e,i,a,_=>(f=new AA(_,this.Cs?this.Cs.next():Cs.at),"readwrite-primary"===t?this._i(f).next(w=>!!w||this.wi(f)).next(w=>{if(!w)throw yr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Re(oe.FAILED_PRECONDITION,ib);return r(f)}).next(w=>this.gi(f).next(()=>w)):this.Di(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}Di(e){return M0(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(oe.FAILED_PRECONDITION,BA)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return M0(e).put("owner",t)}static C(){return Qs.C()}mi(e){const t=M0(e);return t.get("owner").next(r=>this.yi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}Ti(e,t){const r=Date.now();return!(e<r-t||e>r&&(yr(`Detected an update time that is in the future: ${e} > ${r}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const t=/(?:Version|Mobile)\/1[456]/;(0,O.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const r=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return yr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){yr("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function M0(n){return bi(n,"owner")}function Vb(n){return bi(n,"clientMetadata")}function $A(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class HA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=i}static Ni(e,t){let r=d(),i=d();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new HA(e,t.fromCache,r,i)}}class DP{constructor(){this.ki=!1}initialize(e,t){this.$i=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Mi(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Fi(e,t))}Mi(e,t){if(dA(t))return ie.resolve(null);let r=Xi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=g0(t,null,"F"),r=Xi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=d(...a);return this.$i.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.Bi(t,f);return this.Li(t,w,l,_.readTime)?this.Mi(e,g0(t,null,"F")):this.qi(e,w,t,_)}))})))}Oi(e,t,r,i){return dA(t)||i.isEqual(_t.min())?this.Fi(e,t):this.$i.getDocuments(e,r).next(a=>{const l=this.Bi(t,a);return this.Li(t,l,r,i)?this.Fi(e,t):(H_()<=Is.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),m0(t)),this.qi(e,l,t,JS(i,-1)))})}Bi(e,t){let r=new Sn(wb(e));return t.forEach((i,a)=>{_l(e,a)&&(r=r.add(a))}),r}Li(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Fi(e,t){return H_()<=Is.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",m0(t)),this.$i.getDocumentsMatchingQuery(e,t,Ys.min())}qi(e,t,r,i){return this.$i.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class ZL{constructor(e,t,r,i){this.persistence=e,this.Ui=t,this.Tt=i,this.Ki=new ar(Ut),this.Gi=new wl(a=>ml(a),Xh),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IP(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function TP(n,e,t,r){return new ZL(n,e,t,r)}function SP(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,ge.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.zi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let _=d();for(const w of i){l.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}for(const w of a){f.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}return t.localDocuments.getDocuments(r,_).next(w=>({Wi:w,removedBatchIds:l,addedBatchIds:f}))})})}),GA.apply(this,arguments)}function AP(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function xP(n,e,t){let r=d(),i=d();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Ds();return t.forEach((f,_)=>{const w=a.get(f);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(f)),_.isNoDocument()&&_.version.isEqual(_t.min())?(e.removeEntry(f,_.readTime),l=l.insert(f,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),l=l.insert(f,_)):Oe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",w.version," Watch version:",_.version)}),{Hi:l,Ji:i}})}function QL(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wy(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ns.getTargetData(r,e).next(a=>a?(i=a,ie.resolve(i)):t.Ns.allocateTargetId(r).next(l=>(i=new sf(e,l,0,r.currentSequenceNumber),t.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ki.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(r.targetId,r),t.Gi.set(e,r.targetId)),r})}function Ey(n,e,t){return WA.apply(this,arguments)}function WA(){return WA=(0,ge.Z)(function*(n,e,t){const r=Ke(n),i=r.Ki.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!tu(l))throw l;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}),WA.apply(this,arguments)}function Ub(n,e,t){const r=Ke(n);let i=_t.min(),a=d();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,_,w){const D=Ke(f),x=D.Gi.get(w);return void 0!==x?ie.resolve(D.Ki.get(x)):D.Ns.getTargetData(_,w)}(r,l,Xi(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(l,f.targetId).next(_=>{a=_})}).next(()=>r.Ui.getDocumentsMatchingQuery(l,e,t?i:_t.min(),t?a:d())).next(f=>(NP(r,vb(e),f),{documents:f,Yi:a})))}function MP(n,e){const t=Ke(n),r=Ke(t.Ns),i=t.Ki.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ie(a,e).next(l=>l?l.target:null))}function RP(n,e){const t=Ke(n),r=t.Qi.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ji.getAllFromCollectionGroup(i,e,JS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(NP(t,e,i),i))}function NP(n,e,t){let r=n.Qi.get(e)||_t.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Qi.set(e,r)}function zA(){return zA=(0,ge.Z)(function*(n,e,t,r){const i=Ke(n);let a=d(),l=Ds();for(const w of t){const D=e.Zi(w.metadata.name);w.document&&(a=a.add(D));const x=e.Xi(w);x.setReadTime(e.tr(w.metadata.readTime)),l=l.insert(D,x)}const f=i.ji.newChangeBuffer({trackRemovals:!0}),_=yield wy(i,(w=r,Xi(_g(an.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>xP(w,f,l).next(D=>(f.apply(w),D)).next(D=>i.Ns.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Ns.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,D.Hi,D.Ji)).next(()=>D.Hi)))}),zA.apply(this,arguments)}function JL(n,e){return qA.apply(this,arguments)}function qA(){return qA=(0,ge.Z)(function*(n,e,t=d()){const r=yield wy(n,Xi(NA(e.bundledQuery))),i=Ke(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Tr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.$s.saveNamedQuery(a,e);const f=r.withResumeToken(or.EMPTY_BYTE_STRING,l);return i.Ki=i.Ki.insert(f.targetId,f),i.Ns.updateTargetData(a,f).next(()=>i.Ns.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Ns.addMatchingKeys(a,t,r.targetId)).next(()=>i.$s.saveNamedQuery(a,e))})}),qA.apply(this,arguments)}function PP(n,e){return`firestore_clients_${n}_${e}`}function OP(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ZA(n,e){return`firestore_targets_${n}_${e}`}class Bb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static er(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Re(i.error.code,i.error.message))),l?new Bb(e,t,i.state,a):(yr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class R0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static er(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Re(r.error.code,r.error.message))),a?new R0(e,r.state,i):(yr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=v();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=fg(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new jb(e,a):(yr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class KA{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new KA(t.clientId,t.onlineState):(yr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class YA{constructor(){this.activeTargetIds=v()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QA{constructor(e,t,r,i,a){this.window=e,this.Ys=t,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new ar(Ut),this.started=!1,this.hr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=PP(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new YA),this._r=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.Si();for(const i of t){if(i===e.rr)continue;const a=e.getItem(PP(e.persistenceKey,i));if(a){const l=jb.er(i,a);l&&(e.ar=e.ar.insert(l.clientId,l))}}e.pr();const r=e.storage.getItem(e.gr);if(r){const i=e.Ir(r);i&&e.Tr(i)}for(const i of e.hr)e.cr(i);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,r){this.Ar(e,t,r),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ZA(this.persistenceKey,e));if(r){const i=R0.er(e,r);i&&(t=i.state)}}return this.Pr.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ZA(this.persistenceKey,e))}updateQueryState(e,t,r){this.vr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.lr)return void yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t._r.test(r.key)){if(null==r.newValue){const i=t.Sr(r.key);return t.Dr(i,null)}{const i=t.Cr(r.key,r.newValue);if(i)return t.Dr(i.clientId,i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(t.mr.test(r.key)){if(null!==r.newValue){const i=t.$r(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.gr){if(null!==r.newValue){const i=t.Ir(r.newValue);if(i)return t.Tr(i)}}else if(r.key===t.dr){const i=function(a){let l=Cs.at;if(null!=a)try{const f=JSON.parse(a);ht("number"==typeof f),l=f}catch(f){yr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==Cs.at&&t.sequenceNumberHandler(i)}else if(r.key===t.yr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Fr(a)))}}else t.hr.push(r)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,t,r){const i=new Bb(this.currentUser,e,t,r),a=OP(this.persistenceKey,this.currentUser,e);this.setItem(a,i.nr())}Rr(e){const t=OP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,r){const i=ZA(this.persistenceKey,e),a=new R0(e,t,r);this.setItem(i,a.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const r=this.Sr(e);return jb.er(r,t)}Nr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return Bb.er(new Qr(void 0!==r[2]?r[2]:null),i,t)}$r(e,t){const r=this.mr.exec(e),i=Number(r[1]);return R0.er(i,t)}Ir(e){return KA.er(e)}Or(e){return JSON.parse(e)}kr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),l=[],f=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||f.push(_)}),this.syncEngine.qr(l,f).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=v();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class kP{constructor(){this.Ur=new YA,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new YA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eV{Gr(e){}shutdown(){}}class FP{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let $b=null;function XA(){return null===$b?$b=268435456+Math.round(2147483648*Math.random()):$b++,"0x"+$b.toString(16)}const tV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nV{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const Ji="WebChannelConnection";class rV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,i,a){const l=XA(),f=this.fo(e,t);Oe("RestConnection",`Sending RPC '${e}' ${l}:`,f,r);const _={};return this._o(_,i,a),this.wo(e,f,_,r).then(w=>(Oe("RestConnection",`Received RPC '${e}' ${l}: `,w),w),w=>{throw hl("RestConnection",`RPC '${e}' ${l} failed with error: `,w,"url: ",f,"request:",r),w})}mo(e,t,r,i,a,l){return this.lo(e,t,r,i,a)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}fo(e,t){return`${this.co}/v1/${t}:${tV[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,i){const a=XA();return new Promise((l,f)=>{const _=new Zw;_.setWithCredentials(!0),_.listenOnce(KC.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case ug.NO_ERROR:const D=_.getResponseJson();Oe(Ji,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(D)),l(D);break;case ug.TIMEOUT:Oe(Ji,`RPC '${e}' ${a} timed out`),f(new Re(oe.DEADLINE_EXCEEDED,"Request time out"));break;case ug.HTTP_ERROR:const x=_.getStatus();if(Oe(Ji,`RPC '${e}' ${a} failed with status:`,x,"response text:",_.getResponseText()),x>0){let P=_.getResponseJson();Array.isArray(P)&&(P=P[0]);const B=P?.error;if(B&&B.status&&B.message){const Z=function(ce){const Me=ce.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(Me)>=0?Me:oe.UNKNOWN}(B.status);f(new Re(Z,B.message))}else f(new Re(oe.UNKNOWN,"Server responded with status "+_.getStatus()))}else f(new Re(oe.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Oe(Ji,`RPC '${e}' ${a} completed.`)}});const w=JSON.stringify(i);Oe(Ji,`RPC '${e}' ${a} sending request:`,i),_.send(t,"POST",w,r,15)})}yo(e,t,r){const i=XA(),a=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=qC(),f=ZC(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new YC({})),this._o(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const w=a.join("");Oe(Ji,`Creating RPC '${e}' stream ${i}: ${w}`,_);const D=l.createWebChannel(w,_);let x=!1,P=!1;const B=new nV({Yr:ce=>{P?Oe(Ji,`Not sending because RPC '${e}' stream ${i} is closed:`,ce):(x||(Oe(Ji,`Opening RPC '${e}' stream ${i} transport.`),D.open(),x=!0),Oe(Ji,`RPC '${e}' stream ${i} sending:`,ce),D.send(ce))},Zr:()=>D.close()}),Z=(ce,Me,Tt)=>{ce.listen(Me,Bt=>{try{Tt(Bt)}catch(It){setTimeout(()=>{throw It},0)}})};return Z(D,Gh.EventType.OPEN,()=>{P||Oe(Ji,`RPC '${e}' stream ${i} transport opened.`)}),Z(D,Gh.EventType.CLOSE,()=>{P||(P=!0,Oe(Ji,`RPC '${e}' stream ${i} transport closed`),B.oo())}),Z(D,Gh.EventType.ERROR,ce=>{P||(P=!0,hl(Ji,`RPC '${e}' stream ${i} transport errored:`,ce),B.oo(new Re(oe.UNAVAILABLE,"The operation could not be completed")))}),Z(D,Gh.EventType.MESSAGE,ce=>{var Me;if(!P){const Tt=ce.data[0];ht(!!Tt);const It=Tt.error||(null===(Me=Tt[0])||void 0===Me?void 0:Me.error);if(It){Oe(Ji,`RPC '${e}' stream ${i} received error:`,It);const Gt=It.status;let $t=function(Ai){const Sf=Br[Ai];if(void 0!==Sf)return EA(Sf)}(Gt),Yt=It.message;void 0===$t&&($t=oe.INTERNAL,Yt="Unknown error status: "+Gt+" with message "+It.message),P=!0,B.oo(new Re($t,Yt)),D.close()}else Oe(Ji,`RPC '${e}' stream ${i} received:`,Tt),B.uo(Tt)}}),Z(f,qw.STAT_EVENT,ce=>{ce.stat===$_.PROXY?Oe(Ji,`RPC '${e}' stream ${i} detected buffering proxy`):ce.stat===$_.NOPROXY&&Oe(Ji,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{B.ro()},0),B}}function LP(){return typeof window<"u"?window:null}function Hb(){return typeof document<"u"?document:null}function N0(n){return new Ne(n,!0)}class JA{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class VP{constructor(e,t,r,i,a,l,f,_){this.Ys=e,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new JA(e,t)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ge.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,ge.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(yr(t.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),r.ko.Po()):t&&t.code===oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===t&&this.jo(r,i)},r=>{e(()=>{const i=new Re(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,t){const r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.ko.vo((0,ge.Z)(function*(){e.state=0,e.start()}))}zo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iV extends VP{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.Tt=a}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function QF(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:st(),i=e.targetChange.targetIds||[],a=function(_,w){return _.yt?(ht(void 0===w||"string"==typeof w),or.fromBase64String(w||"")):(ht(void 0===w||w instanceof Uint8Array),or.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(_){const w=void 0===_.code?oe.UNKNOWN:EA(_.code);return new Re(w,_.message||"")}(l);t=new L(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=El(n,r.document.name),a=Tr(r.document.updateTime),l=r.document.createTime?Tr(r.document.createTime):_t.min(),f=new ci({mapValue:{fields:r.document.fields}}),_=Nn.newFoundDocument(i,a,l,f);t=new S(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=El(n,r.document),a=r.readTime?Tr(r.readTime):_t.min(),l=Nn.newNoDocument(i,a);t=new S([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=El(n,r.document);t=new S([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,a=new vA(r.count||0);t=new R(r.targetId,a)}}var _;return t}(this.Tt,e),r=function(i){if(!("targetChange"in i))return _t.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?_t.min():a.readTime?Tr(a.readTime):_t.min()}(e);return this.listener.Ho(t,r)}Jo(e){const t={};t.database=I0(this.Tt),t.addTarget=function(i,a){let l;const f=a.target;return l=ld(f)?{documents:BN(i,f)}:{query:SA(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=Un(i,a.resumeToken):a.snapshotVersion.compareTo(_t.min())>0&&(l.readTime=Rt(i,a.snapshotVersion.toTimestamp())),l}(this.Tt,e);const r=function JF(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.qo(t)}Yo(e){const t={};t.database=I0(this.Tt),t.removeTarget=e,this.qo(t)}}class sV extends VP{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.Tt=a,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function XF(n,e){return n&&n.length>0?(ht(void 0!==e),n.map(t=>function(r,i){let a=Tr(r.updateTime?r.updateTime:i);return a.isEqual(_t.min())&&(a=Tr(i)),new bb(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.eu(r,t)}return ht(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=I0(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>C0(this.Tt,r))};this.qo(t)}}class oV extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new Re(oe.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.lo(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(oe.UNKNOWN,i.toString())})}mo(e,t,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.mo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(oe.UNKNOWN,a.toString())})}terminate(){this.iu=!0}}class uV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(yr(t),this.cu=!1):Oe("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class lV{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr(f=>{r.enqueueAndForget((0,ge.Z)(function*(){var _;pd(l)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ge.Z)(function*(w){const D=Ke(w);D.mu.add(4),yield Iy(D),D.pu.set("Unknown"),D.mu.delete(4),yield P0(D)}),function(w){return _.apply(this,arguments)})(l))}))}),this.pu=new uV(r,i)}}function P0(n){return tx.apply(this,arguments)}function tx(){return tx=(0,ge.Z)(function*(n){if(pd(n))for(const e of n.gu)yield e(!0)}),tx.apply(this,arguments)}function Iy(n){return nx.apply(this,arguments)}function nx(){return nx=(0,ge.Z)(function*(n){for(const e of n.gu)yield e(!1)}),nx.apply(this,arguments)}function Gb(n,e){const t=Ke(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),sx(t)?ix(t):by(t).Mo()&&rx(t,e))}function O0(n,e){const t=Ke(n),r=by(t);t.wu.delete(e),r.Mo()&&UP(t,e),0===t.wu.size&&(r.Mo()?r.Bo():pd(t)&&t.pu.set("Unknown"))}function rx(n,e){n.Iu.Ot(e.targetId),by(n).Jo(e)}function UP(n,e){n.Iu.Ot(e),by(n).Yo(e)}function ix(n){n.Iu=new J({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),by(n).start(),n.pu.au()}function sx(n){return pd(n)&&!by(n).$o()&&n.wu.size>0}function pd(n){return 0===Ke(n).mu.size}function BP(n){n.Iu=void 0}function cV(n){return ox.apply(this,arguments)}function ox(){return ox=(0,ge.Z)(function*(n){n.wu.forEach((e,t)=>{rx(n,e)})}),ox.apply(this,arguments)}function dV(n,e){return ax.apply(this,arguments)}function ax(){return ax=(0,ge.Z)(function*(n,e){BP(n),sx(n)?(n.pu.fu(e),ix(n)):n.pu.set("Unknown")}),ax.apply(this,arguments)}function hV(n,e,t){return ux.apply(this,arguments)}function ux(){return ux=(0,ge.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof L&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.wu.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.wu.delete(f),i.Iu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Wb(n,r)}else if(e instanceof S?n.Iu.Qt(e):e instanceof R?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(_t.min()))try{const r=yield AP(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Iu.ee(a);return l.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const w=i.wu.get(_);w&&i.wu.set(_,w.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach(f=>{const _=i.wu.get(f);if(!_)return;i.wu.set(f,_.withResumeToken(or.EMPTY_BYTE_STRING,_.snapshotVersion)),UP(i,f);const w=new sf(_.target,f,1,_.sequenceNumber);rx(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield Wb(n,r)}var r}),ux.apply(this,arguments)}function Wb(n,e,t){return lx.apply(this,arguments)}function lx(){return lx=(0,ge.Z)(function*(n,e,t){if(!tu(e))throw e;n.mu.add(1),yield Iy(n),n.pu.set("Offline"),t||(t=()=>AP(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield P0(n)}))}),lx.apply(this,arguments)}function jP(n,e){return e().catch(t=>Wb(n,t,e))}function Cy(n){return cx.apply(this,arguments)}function cx(){return cx=(0,ge.Z)(function*(n){const e=Ke(n),t=cf(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;fV(e);)try{const i=yield QL(e.localStore,r);if(null===i){0===e._u.length&&t.Bo();break}r=i.batchId,pV(e,i)}catch(i){yield Wb(e,i)}$P(e)&&HP(e)}),cx.apply(this,arguments)}function fV(n){return pd(n)&&n._u.length<10}function pV(n,e){n._u.push(e);const t=cf(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function $P(n){return pd(n)&&!cf(n).$o()&&n._u.length>0}function HP(n){cf(n).start()}function gV(n){return dx.apply(this,arguments)}function dx(){return dx=(0,ge.Z)(function*(n){cf(n).su()}),dx.apply(this,arguments)}function mV(n){return hx.apply(this,arguments)}function hx(){return hx=(0,ge.Z)(function*(n){const e=cf(n);for(const t of n._u)e.tu(t.mutations)}),hx.apply(this,arguments)}function _V(n,e,t){return fx.apply(this,arguments)}function fx(){return fx=(0,ge.Z)(function*(n,e,t){const r=n._u.shift(),i=MA.from(r,e,t);yield jP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Cy(n)}),fx.apply(this,arguments)}function yV(n,e){return px.apply(this,arguments)}function px(){return px=(0,ge.Z)(function*(n,e){var t;e&&cf(n).Xo&&(yield(t=(0,ge.Z)(function*(r,i){if(wA(a=i.code)&&a!==oe.ABORTED){const l=r._u.shift();cf(r).Fo(),yield jP(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Cy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),$P(n)&&HP(n)}),px.apply(this,arguments)}function GP(n,e){return gx.apply(this,arguments)}function gx(){return gx=(0,ge.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=pd(t);t.mu.add(3),yield Iy(t),r&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield P0(t)}),gx.apply(this,arguments)}function mx(n,e){return _x.apply(this,arguments)}function _x(){return _x=(0,ge.Z)(function*(n,e){const t=Ke(n);e?(t.mu.delete(2),yield P0(t)):e||(t.mu.add(2),yield Iy(t),t.pu.set("Unknown"))}),_x.apply(this,arguments)}function by(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ke(e);return i.ru(),new iV(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:cV.bind(null,n),no:dV.bind(null,n),Ho:hV.bind(null,n)}),n.gu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Tu.Fo(),sx(n)?ix(n):n.pu.set("Unknown")):(yield n.Tu.stop(),BP(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function cf(n){return n.Eu||(n.Eu=function(e,t,r){const i=Ke(e);return i.ru(),new sV(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:gV.bind(null,n),no:yV.bind(null,n),nu:mV.bind(null,n),eu:_V.bind(null,n)}),n.gu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Eu.Fo(),yield Cy(n)):(yield n.Eu.stop(),n._u.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class yx{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new yx(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dy(n,e){if(yr("AsyncQueue",`${e}: ${n}`),tu(n))return new Re(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class Ty{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=my(),this.sortedSet=new ar(this.comparator)}static emptySet(e){return new Ty(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ty)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ty;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class WP{constructor(){this.Au=new ar(qe.comparator)}track(e){const t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):st():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class Sy{constructor(e,t,r,i,a,l,f,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new Sy(e,t,Ty.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class vV{constructor(){this.Pu=void 0,this.listeners=[]}}class wV{constructor(){this.queries=new wl(e=>hA(e),hy),this.onlineState="Unknown",this.vu=new Set}}function vx(n,e){return wx.apply(this,arguments)}function wx(){return wx=(0,ge.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new vV),i)try{a.Pu=yield t.onListen(r)}catch(l){const f=Dy(l,`Initialization of query '${m0(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Pu&&e.Vu(a.Pu)&&Cx(t)}),wx.apply(this,arguments)}function Ex(n,e){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,ge.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Ix.apply(this,arguments)}function EV(n,e){const t=Ke(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.Vu(i)&&(r=!0);l.Pu=i}}r&&Cx(t)}function IV(n,e,t){const r=Ke(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Cx(n){n.vu.forEach(e=>{e.next()})}class bx{constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Sy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.$u||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=Sy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class CV{constructor(e,t){this.Mu=e,this.byteLength=t}Ou(){return"metadata"in this.Mu}}class zP{constructor(e){this.Tt=e}Zi(e){return El(this.Tt,e)}Xi(e){return e.metadata.exists?UN(this.Tt,e.document,!1):Nn.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Tr(e)}}class bV{constructor(e,t,r){this.Fu=e,this.localStore=t,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=qP(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const r=an.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,r=new zP(this.Tt);for(const i of e)if(i.metadata.queries){const a=r.Zi(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||d()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function XL(n,e,t,r){return zA.apply(this,arguments)}(e.localStore,new zP(e.Tt),e.documents,e.Fu.id),r=e.Lu(e.documents);for(const i of e.queries)yield JL(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function qP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ZP{constructor(e){this.key=e}}class KP{constructor(e){this.key=e}}class YP{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=d(),this.mutatedKeys=d(),this.ju=wb(e),this.zu=new Ty(this.ju)}get Wu(){return this.Ku}Hu(e,t){const r=t?t.Ju:new WP,i=t?t.zu:this.zu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,x)=>{const P=i.get(D),B=_l(this.query,x)?x:null,Z=!!P&&this.mutatedKeys.has(P.key),ce=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Me=!1;P&&B?P.data.isEqual(B.data)?Z!==ce&&(r.track({type:3,doc:B}),Me=!0):this.Yu(P,B)||(r.track({type:2,doc:B}),Me=!0,(_&&this.ju(B,_)>0||w&&this.ju(B,w)<0)&&(f=!0)):!P&&B?(r.track({type:0,doc:B}),Me=!0):P&&!B&&(r.track({type:1,doc:P}),Me=!0,(_||w)&&(f=!0)),Me&&(B?(l=l.add(B),a=ce?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{zu:l,Ju:r,Li:f,mutatedKeys:a}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const a=e.Ju.Ru();a.sort((w,D)=>function(x,P){const B=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return B(x)-B(P)}(w.type,D.type)||this.ju(w.doc,D.doc)),this.Zu(r);const l=t?this.Xu():[],f=0===this.Qu.size&&this.current?1:0,_=f!==this.Gu;return this.Gu=f,0!==a.length||_?{snapshot:new Sy(this.query,e.zu,i,a,e.mutatedKeys,0===f,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:l}:{tc:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new WP,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=d(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const t=[];return e.forEach(r=>{this.Qu.has(r)||t.push(new KP(r))}),this.Qu.forEach(r=>{e.has(r)||t.push(new ZP(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=d();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return Sy.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class DV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class TV{constructor(e){this.key=e,this.ic=!1}}class SV{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.rc={},this.oc=new wl(f=>hA(f),hy),this.uc=new Map,this.cc=new Set,this.ac=new ar(qe.comparator),this.hc=new Map,this.lc=new UA,this.fc={},this.dc=new Map,this._c=Dg.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function AV(n,e){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,ge.Z)(function*(n,e){const t=Zx(n);let r,i;const a=t.oc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.sc();else{const l=yield wy(t.localStore,Xi(e));t.isPrimaryClient&&Gb(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield Tx(t,e,r,"current"===f,l.resumeToken)}return i}),Dx.apply(this,arguments)}function Tx(n,e,t,r,i){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,ge.Z)(function*(n,e,t,r,i){n.mc=(x,P,B)=>{return(Z=(0,ge.Z)(function*(ce,Me,Tt,Bt){let It=Me.view.Hu(Tt);It.Li&&(It=yield Ub(ce.localStore,Me.query,!1).then(({documents:Yt})=>Me.view.Hu(Yt,It)));const Gt=Bt&&Bt.targetChanges.get(Me.targetId),$t=Me.view.applyChanges(It,ce.isPrimaryClient,Gt);return Lx(ce,Me.targetId,$t.tc),$t.snapshot}),function(ce,Me,Tt,Bt){return Z.apply(this,arguments)})(n,x,P,B);var Z};const a=yield Ub(n.localStore,e,!0),l=new YP(e,a.Yi),f=l.Hu(a.documents),_=C.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=l.applyChanges(f,n.isPrimaryClient,_);Lx(n,t,w.tc);const D=new DV(e,t,l);return n.oc.set(e,D),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),w.snapshot}),Sx.apply(this,arguments)}function xV(n,e){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,ge.Z)(function*(n,e){const t=Ke(n),r=t.oc.get(e),i=t.uc.get(r.targetId);if(i.length>1)return t.uc.set(r.targetId,i.filter(a=>!hy(a,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ey(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),O0(t.remoteStore,r.targetId),Ay(t,r.targetId)}).catch(eu))):(Ay(t,r.targetId),yield Ey(t.localStore,r.targetId,!0))}),Ax.apply(this,arguments)}function xx(){return xx=(0,ge.Z)(function*(n,e,t){const r=Kx(n);try{const i=yield function(a,l){const f=Ke(a),_=qn.now(),w=l.reduce((P,B)=>P.add(B.key),d());let D,x;return f.persistence.runTransaction("Locally write mutations","readwrite",P=>{let B=Ds(),Z=d();return f.ji.getEntries(P,w).next(ce=>{B=ce,B.forEach((Me,Tt)=>{Tt.isValidDocument()||(Z=Z.add(Me))})}).next(()=>f.localDocuments.getOverlayedDocuments(P,B)).next(ce=>{D=ce;const Me=[];for(const Tt of l){const Bt=PN(Tt,D.get(Tt.key).overlayedDocument);null!=Bt&&Me.push(new au(Tt.key,Bt,uy(Bt.value.mapValue),Vn.exists(!0)))}return f.mutationQueue.addMutationBatch(P,_,Me,l)}).next(ce=>{x=ce;const Me=ce.applyToLocalDocumentSet(D,Z);return f.documentOverlayCache.saveOverlays(P,ce.batchId,Me)})}).then(()=>({batchId:x.batchId,changes:CA(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let _=a.fc[a.currentUser.toKey()];_||(_=new ar(Ut)),_=_.insert(l,f),a.fc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield gd(r,i.changes),yield Cy(r.remoteStore)}catch(i){const a=Dy(i,"Failed to persist write");t.reject(a)}}),xx.apply(this,arguments)}function QP(n,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,ge.Z)(function*(n,e){const t=Ke(n);try{const r=yield function YL(n,e){const t=Ke(n),r=e.snapshotVersion;let i=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.ji.newChangeBuffer({trackRemovals:!0});i=t.Ki;const f=[];e.targetChanges.forEach((D,x)=>{const P=i.get(x);if(!P)return;f.push(t.Ns.removeMatchingKeys(a,D.removedDocuments,x).next(()=>t.Ns.addMatchingKeys(a,D.addedDocuments,x)));let B=P.withSequenceNumber(a.currentSequenceNumber);var Z,ce,Me;e.targetMismatches.has(x)?B=B.withResumeToken(or.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):D.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(D.resumeToken,r)),i=i.insert(x,B),ce=B,Me=D,(0===(Z=P).resumeToken.approximateByteSize()||ce.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Me.addedDocuments.size+Me.modifiedDocuments.size+Me.removedDocuments.size>0)&&f.push(t.Ns.updateTargetData(a,B))});let _=Ds(),w=d();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),f.push(xP(a,l,e.documentUpdates).next(D=>{_=D.Hi,w=D.Ji})),!r.isEqual(_t.min())){const D=t.Ns.getLastRemoteSnapshotVersion(a).next(x=>t.Ns.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(D)}return ie.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.Ki=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.hc.get(a);l&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ic=!0:i.modifiedDocuments.size>0?ht(l.ic):i.removedDocuments.size>0&&(ht(l.ic),l.ic=!1))}),yield gd(t,r,e)}catch(r){yield eu(r)}}),Mx.apply(this,arguments)}function XP(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.oc.forEach((a,l)=>{const f=l.view.bu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=Ke(a);f.onlineState=l;let _=!1;f.queries.forEach((w,D)=>{for(const x of D.listeners)x.bu(l)&&(_=!0)}),_&&Cx(f)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function RV(n,e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,ge.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.hc.get(e),a=i&&i.key;if(a){let l=new ar(qe.comparator);l=l.insert(a,Nn.newNoDocument(a,_t.min()));const f=d().add(a),_=new I(_t.min(),new Map,new Sn(Ut),l,f);yield QP(r,_),r.ac=r.ac.remove(a),r.hc.delete(e),Vx(r)}else yield Ey(r.localStore,e,!1).then(()=>Ay(r,e,t)).catch(eu)}),Rx.apply(this,arguments)}function NV(n,e){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,ge.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const i=yield function KL(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.ji.newChangeBuffer({trackRemovals:!0});return function(l,f,_,w){const D=_.batch,x=D.keys();let P=ie.resolve();return x.forEach(B=>{P=P.next(()=>w.getEntry(f,B)).next(Z=>{const ce=_.docVersions.get(B);ht(null!==ce),Z.version.compareTo(ce)<0&&(D.applyToRemoteDocument(Z,_),Z.isValidDocument()&&(Z.setReadTime(_.commitVersion),w.addEntry(Z)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(f,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=d();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(f=f.add(l.batch.mutations[_].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);Fx(t,r,null),kx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield gd(t,i)}catch(i){yield eu(i)}}),Nx.apply(this,arguments)}function PV(n,e,t){return Px.apply(this,arguments)}function Px(){return Px=(0,ge.Z)(function*(n,e,t){const r=Ke(n);try{const i=yield function(a,l){const f=Ke(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return f.mutationQueue.lookupMutationBatch(_,l).next(D=>(ht(null!==D),w=D.keys(),f.mutationQueue.removeMutationBatch(_,D))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,w,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>f.localDocuments.getDocuments(_,w))})}(r.localStore,e);Fx(r,e,t),kx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield gd(r,i)}catch(i){yield eu(i)}}),Px.apply(this,arguments)}function Ox(){return Ox=(0,ge.Z)(function*(n,e){const t=Ke(n);pd(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ke(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.dc.get(r)||[];i.push(e),t.dc.set(r,i)}catch(r){const i=Dy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Ox.apply(this,arguments)}function kx(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function Fx(n,e,t){const r=Ke(n);let i=r.fc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function Ay(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.uc.get(e))n.oc.delete(r),t&&n.rc.gc(r,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(r=>{n.lc.containsKey(r)||JP(n,r)})}function JP(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(O0(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),Vx(n))}function Lx(n,e,t){for(const r of t)r instanceof ZP?(n.lc.addReference(r.key,e),kV(n,r)):r instanceof KP?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.lc.removeReference(r.key,e),n.lc.containsKey(r.key)||JP(n,r.key)):st()}function kV(n,e){const t=e.key,r=t.path.canonicalString();n.ac.get(t)||n.cc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.cc.add(r),Vx(n))}function Vx(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new qe(an.fromString(e)),r=n._c.next();n.hc.set(r,new TV(t)),n.ac=n.ac.insert(t,r),Gb(n.remoteStore,new sf(Xi(_g(t.path)),r,2,Cs.at))}}function gd(n,e,t){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,ge.Z)(function*(n,e,t){const r=Ke(n),i=[],a=[],l=[];var f;r.oc.isEmpty()||(r.oc.forEach((f,_)=>{l.push(r.mc(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const D=HA.Ni(_.targetId,w);a.push(D)}}))}),yield Promise.all(l),r.rc.Ho(i),yield(f=(0,ge.Z)(function*(_,w){const D=Ke(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ie.forEach(w,P=>ie.forEach(P.Ci,B=>D.persistence.referenceDelegate.addReference(x,P.targetId,B)).next(()=>ie.forEach(P.xi,B=>D.persistence.referenceDelegate.removeReference(x,P.targetId,B)))))}catch(x){if(!tu(x))throw x;Oe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of w){const P=x.targetId;if(!x.fromCache){const B=D.Ki.get(P),ce=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);D.Ki=D.Ki.insert(P,ce)}}}),function(_,w){return f.apply(this,arguments)})(r.localStore,a))}),Ux.apply(this,arguments)}function FV(n,e){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,ge.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield SP(t.localStore,e);t.currentUser=e,(i=t).dc.forEach(l=>{l.forEach(f=>{f.reject(new Re(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.dc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield gd(t,r.Wi)}var i}),Bx.apply(this,arguments)}function LV(n,e){const t=Ke(n),r=t.hc.get(e);if(r&&r.ic)return d().add(r.key);{let i=d();const a=t.uc.get(e);if(!a)return i;for(const l of a){const f=t.oc.get(l);i=i.unionWith(f.view.Wu)}return i}}function VV(n,e){return jx.apply(this,arguments)}function jx(){return jx=(0,ge.Z)(function*(n,e){const t=Ke(n),r=yield Ub(t.localStore,e.query,!0),i=e.view.nc(r);return t.isPrimaryClient&&Lx(t,e.targetId,i.tc),i}),jx.apply(this,arguments)}function UV(n,e){return $x.apply(this,arguments)}function $x(){return $x=(0,ge.Z)(function*(n,e){const t=Ke(n);return RP(t.localStore,e).then(r=>gd(t,r))}),$x.apply(this,arguments)}function BV(n,e,t,r){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,ge.Z)(function*(n,e,t,r){const i=Ke(n),a=yield function(l,f){const _=Ke(l),w=Ke(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.An(D,f).next(x=>x?_.localDocuments.getDocuments(D,x):ie.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Cy(i.remoteStore):"acknowledged"===t||"rejected"===t?(Fx(i,e,r||null),kx(i,e),f=e,Ke(Ke(i.localStore).mutationQueue).Pn(f)):st(),yield gd(i,a)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Hx.apply(this,arguments)}function Gx(){return Gx=(0,ge.Z)(function*(n,e){const t=Ke(n);if(Zx(t),Kx(t),!0===e&&!0!==t.wc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield eO(t,r.toArray());t.wc=!0,yield mx(t.remoteStore,!0);for(const a of i)Gb(t.remoteStore,a)}else if(!1===e&&!1!==t.wc){const r=[];let i=Promise.resolve();t.uc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Ay(t,l),Ey(t.localStore,l,!0))),O0(t.remoteStore,l)}),yield i,yield eO(t,r),function(a){const l=Ke(a);l.hc.forEach((f,_)=>{O0(l.remoteStore,_)}),l.lc._s(),l.hc=new Map,l.ac=new ar(qe.comparator)}(t),t.wc=!1,yield mx(t.remoteStore,!1)}}),Gx.apply(this,arguments)}function eO(n,e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,ge.Z)(function*(n,e,t){const r=Ke(n),i=[],a=[];for(const l of e){let f;const _=r.uc.get(l);if(_&&0!==_.length){f=yield wy(r.localStore,Xi(_[0]));for(const w of _){const D=r.oc.get(w),x=yield VV(r,D);x.snapshot&&a.push(x.snapshot)}}else{const w=yield MP(r.localStore,l);f=yield wy(r.localStore,w),yield Tx(r,tO(w),l,!1,f.resumeToken)}i.push(f)}return r.rc.Ho(a),i}),Wx.apply(this,arguments)}function tO(n){return cA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $V(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).Si()}function HV(n,e,t,r){return zx.apply(this,arguments)}function zx(){return zx=(0,ge.Z)(function*(n,e,t,r){const i=Ke(n);if(i.wc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const a=i.uc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield RP(i.localStore,vb(a[0])),f=I.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,or.EMPTY_BYTE_STRING);yield gd(i,l,f);break}case"rejected":yield Ey(i.localStore,e,!0),Ay(i,e,r);break;default:st()}}),zx.apply(this,arguments)}function GV(n,e,t){return qx.apply(this,arguments)}function qx(){return qx=(0,ge.Z)(function*(n,e,t){const r=Zx(n);if(r.wc){for(const i of e){if(r.uc.has(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const a=yield MP(r.localStore,i),l=yield wy(r.localStore,a);yield Tx(r,tO(a),l.targetId,!1,l.resumeToken),Gb(r.remoteStore,l)}for(const i of t)r.uc.has(i)&&(yield Ey(r.localStore,i,!1).then(()=>{O0(r.remoteStore,i),Ay(r,i)}).catch(eu))}}),qx.apply(this,arguments)}function Zx(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RV.bind(null,e),e.rc.Ho=EV.bind(null,e.eventManager),e.rc.gc=IV.bind(null,e.eventManager),e}function Kx(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PV.bind(null,e),e}class nO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.Tt=N0(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return TP(this.persistence,new DP,e.initialUser,this.Tt)}Tc(e){return new CP(Lb.qs,this.Tt)}Ic(e){return new kP}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class rO extends nO{constructor(e,t,r){super(),this.Pc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Pc.initialize(r,e),yield Kx(r.Pc.syncEngine),yield Cy(r.Pc.remoteStore),yield r.persistence.di(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return TP(this.persistence,new DP,e.initialUser,this.Tt)}Ac(e,t){return new OL(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const r=new nA(t,this.persistence);return new ob(e.asyncQueue,r)}Tc(e){const t=$A(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Js.withCacheSize(this.cacheSizeBytes):Js.DEFAULT;return new jA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,LP(),Hb(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new kP}}class zV extends rO{constructor(e,t){super(e,t,!1),this.Pc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const i=r.Pc.syncEngine;r.sharedClientState instanceof QA&&(r.sharedClientState.syncEngine={Br:BV.bind(null,i),Lr:HV.bind(null,i),qr:GV.bind(null,i),Si:$V.bind(null,i),Fr:UV.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.di(function(){var a=(0,ge.Z)(function*(l){yield function jV(n,e){return Gx.apply(this,arguments)}(r.Pc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}Ic(e){const t=LP();if(!QA.C(t))throw new Re(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$A(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new QA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Yx{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>XP(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=FV.bind(null,r.syncEngine),yield mx(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new wV}createDatastore(e){const t=N0(e.databaseInfo.databaseId),r=new rV(e.databaseInfo);return new oV(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>XP(this.syncEngine,f,0),l=FP.C()?new FP:new eV,new lV(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,_,w){const D=new SV(r,i,a,l,f,_);return w&&(D.wc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=Ke(t);Oe("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield Iy(r),r.yu.shutdown(),r.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function iO(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class zb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qV{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new hn,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const r=e.Sc.decode(t),i=Number(r);isNaN(i)&&e.xc(`length string (${r}) is not valid number`);const a=yield e.Nc(i);return new CV(JSON.parse(a),t.length+i)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,ge.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Nc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.xc("Reached the end of bundle when more is expected.");const r=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ZV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ge.Z)(function*(a,l){const f=Ke(a),_=I0(f.Tt)+"/documents",w={documents:l.map(B=>E0(f.Tt,B))},D=yield f.mo("BatchGetDocuments",_,w,l.length),x=new Map;D.forEach(B=>{const Z=function YF(n,e){return"found"in e?function(t,r){ht(!!r.found);const i=El(t,r.found.name),a=Tr(r.found.updateTime),l=r.found.createTime?Tr(r.found.createTime):_t.min(),f=new ci({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){ht(!!r.missing),ht(!!r.readTime);const i=El(t,r.missing),a=Tr(r.readTime);return Nn.newNoDocument(i,a)}(n,e):st()}(f.Tt,B);x.set(Z.key.toString(),Z)});const P=[];return l.forEach(B=>{const Z=x.get(B.toString());ht(!!Z),P.push(Z)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new nf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=qe.fromPath(i);e.mutations.push(new w0(a,e.precondition(a)))}),yield(r=(0,ge.Z)(function*(i,a){const l=Ke(i),f=I0(l.Tt)+"/documents",_={writes:a.map(w=>C0(l.Tt,w))};yield l.lo("Commit",f,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_t.min())?Vn.exists(!1):Vn.updateTime(t):Vn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new Re(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vn.updateTime(t)}return Vn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class KV{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new JA(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,ge.Z)(function*(){const t=new ZV(e.datastore),r=e.Fc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Bc(a)}))}).catch(i=>{e.Bc(i)})}))}Fc(e){try{const t=this.updateFunction(e);return!Q_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!wA(t)}return!1}}class YV{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qr.UNAUTHENTICATED,this.clientId=eb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ge.Z)(function*(f){Oe("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Oe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Dy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function sO(n,e){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ge.Z)(function*(a){r.isEqual(a)||(yield SP(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Qx.apply(this,arguments)}function oO(n,e){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Jx(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>GP(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>GP(e.remoteStore,a)),n.onlineComponents=e}),Xx.apply(this,arguments)}function Jx(n){return eM.apply(this,arguments)}function eM(){return eM=(0,ge.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield sO(n,new nO)),n.offlineComponents}),eM.apply(this,arguments)}function qb(n){return tM.apply(this,arguments)}function tM(){return tM=(0,ge.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield oO(n,new Yx)),n.onlineComponents}),tM.apply(this,arguments)}function aO(n){return Jx(n).then(e=>e.persistence)}function Zb(n){return Jx(n).then(e=>e.localStore)}function nM(n){return qb(n).then(e=>e.remoteStore)}function rM(n){return qb(n).then(e=>e.syncEngine)}function xy(n){return iM.apply(this,arguments)}function iM(){return iM=(0,ge.Z)(function*(n){const e=yield qb(n),t=e.eventManager;return t.onListen=AV.bind(null,e.syncEngine),t.onUnlisten=xV.bind(null,e.syncEngine),t}),iM.apply(this,arguments)}function lO(n,e,t={}){const r=new hn;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,a,l,f,_){const w=new zb({next:x=>{a.enqueueAndForget(()=>Ex(i,D));const P=x.docs.has(l);!P&&x.fromCache?_.reject(new Re(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&x.fromCache&&f&&"server"===f.source?_.reject(new Re(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),D=new bx(_g(l.path),w,{includeMetadataChanges:!0,$u:!0});return vx(i,D)}(yield xy(n),n.asyncQueue,e,t,r)})),r.promise}function cO(n,e,t={}){const r=new hn;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,a,l,f,_){const w=new zb({next:x=>{a.enqueueAndForget(()=>Ex(i,D)),x.fromCache&&"server"===f.source?_.reject(new Re(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),D=new bx(l,w,{includeMetadataChanges:!0,$u:!0});return vx(i,D)}(yield xy(n),n.asyncQueue,e,t,r)})),r.promise}const dO=new Map;function sM(n,e,t){if(!t)throw new Re(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hO(n,e,t,r){if(!0===e&&!0===r)throw new Re(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fO(n){if(!qe.isDocumentKey(n))throw new Re(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pO(n){if(qe.isDocumentKey(n))throw new Re(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Kb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kb(n);throw new Re(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function gO(n,e){if(e<=0)throw new Re(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class mO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,hO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class k0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new QS;switch(t.type){case"gapi":return new JC(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=dO.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),dO.delete(e),t.terminate())}(this),Promise.resolve()}}class nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class Li{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Li(this.firestore,e,this._query)}}class Cl extends Li{constructor(e,t,r){super(e,t,_g(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new qe(e))}withConverter(e){return new Cl(this.firestore,e,this._path)}}function yO(n,e,...t){if(n=(0,O.m9)(n),sM("collection","path",e),n instanceof k0){const r=an.fromString(e,...t);return pO(r),new Cl(n,null,r)}{if(!(n instanceof nr||n instanceof Cl))throw new Re(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return pO(r),new Cl(n.firestore,null,r)}}function Yb(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=eb.R()),sM("doc","path",e),n instanceof k0){const r=an.fromString(e,...t);return fO(r),new nr(n,null,new qe(r))}{if(!(n instanceof nr||n instanceof Cl))throw new Re(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return fO(r),new nr(n.firestore,n instanceof Cl?n.converter:null,new qe(r))}}function vO(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof nr||n instanceof Cl)&&(e instanceof nr||e instanceof Cl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function oM(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof Li&&e instanceof Li&&n.firestore===e.firestore&&hy(n._query,e._query)&&n.converter===e.converter}class sU{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new JA(this,"async_queue_retry"),this.Hc=()=>{const t=Hb();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=Hb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=Hb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new hn;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!tu(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,yr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const i=yx.createAndSchedule(this,e,t,r,a=>this.Xc(a));return this.Gc.push(i),i}Jc(){this.Qc&&st()}verifyOperationInProgress(){}ta(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function aM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class oU{constructor(){this._progressObserver={},this._taskCompletionResolver=new hn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class rr extends k0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new sU,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||wO(this),this._firestoreClient.terminate()}}function jr(n){return n._firestoreClient||wO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wO(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new MN(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new YV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function EO(n,e,t){const r=new hn;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield sO(n,t),yield oO(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===oe.FAILED_PRECONDITION||l.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;hl("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function IO(n){if(n._initialized||n._terminated)throw new Re(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bl(or.fromBase64String(e))}catch(t){throw new Re(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bl(or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class md{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sg{constructor(e){this._methodName=e}}class Qb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const _U=/^__.*__$/;class yU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new au(e,this.data,this.fieldMask,t,this.fieldTransforms):new vl(e,this.data,t,this.fieldTransforms)}}class CO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new au(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class Xb{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new Xb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return tD(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(bO(this.ra)&&_U.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class vU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||N0(e)}wa(e,t,r,i=!1){return new Xb({ra:e,methodName:t,_a:r,path:Zn.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Ag(n){const e=n._freezeSettings(),t=N0(n._databaseId);return new vU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Jb(n,e,t,r,i,a={}){const l=n.wa(a.merge||a.mergeFields?2:0,e,t,i);dM("Data must be an object, but it was:",l,r);const f=SO(r,l);let _,w;if(a.merge)_=new Fi(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const x of a.mergeFields){const P=V0(e,x,t);if(!l.contains(P))throw new Re(oe.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);xO(D,P)||D.push(P)}_=new Fi(D),w=l.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,w=l.fieldTransforms;return new yU(new ci(f),_,w)}class L0 extends Sg{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof L0}}function DO(n,e,t){return new Xb({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class uM extends Sg{_toFieldTransform(e){return new yg(e.path,new ou)}isEqual(e){return e instanceof uM}}class wU extends Sg{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=DO(this,e,!0),r=this.ma.map(a=>xg(a,t)),i=new ef(r);return new yg(e.path,i)}isEqual(e){return this===e}}class EU extends Sg{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=DO(this,e,!0),r=this.ma.map(a=>xg(a,t)),i=new tf(r);return new yg(e.path,i)}isEqual(e){return this===e}}class IU extends Sg{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new hd(e.Tt,fy(e.Tt,this.ga));return new yg(e.path,t)}isEqual(e){return this===e}}function lM(n,e,t,r){const i=n.wa(1,e,t);dM("Data must be an object, but it was:",i,r);const a=[],l=ci.empty();Kh(r,(_,w)=>{const D=eD(e,_,t);w=(0,O.m9)(w);const x=i.ha(D);if(w instanceof L0)a.push(D);else{const P=xg(w,x);null!=P&&(a.push(D),l.set(D,P))}});const f=new Fi(a);return new CO(l,f,i.fieldTransforms)}function cM(n,e,t,r,i,a){const l=n.wa(1,e,t),f=[V0(e,r,t)],_=[i];if(a.length%2!=0)throw new Re(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)f.push(V0(e,a[P])),_.push(a[P+1]);const w=[],D=ci.empty();for(let P=f.length-1;P>=0;--P)if(!xO(w,f[P])){const B=f[P];let Z=_[P];Z=(0,O.m9)(Z);const ce=l.ha(B);if(Z instanceof L0)w.push(B);else{const Me=xg(Z,ce);null!=Me&&(w.push(B),D.set(B,Me))}}const x=new Fi(w);return new CO(D,x,l.fieldTransforms)}function TO(n,e,t,r=!1){return xg(t,n.wa(r?4:3,e))}function xg(n,e){if(AO(n=(0,O.m9)(n)))return dM("Unsupported field value:",e,n),SO(n,e);if(n instanceof Sg)return function(t,r){if(!bO(r.ra))throw r.fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=xg(l,r.la(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return fy(r.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=qn.fromDate(t);return{timestampValue:Rt(r.Tt,i)}}if(t instanceof qn){const i=new qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Rt(r.Tt,i)}}if(t instanceof Qb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bl)return{bytesValue:Un(r.Tt,t._byteString)};if(t instanceof nr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.fa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.fa(`Unsupported field value: ${Kb(t)}`)}(n,e)}function SO(n,e){const t={};return iA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kh(n,(r,i)=>{const a=xg(i,e.ua(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function AO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof qn||n instanceof Qb||n instanceof bl||n instanceof nr||n instanceof Sg)}function dM(n,e,t){if(!AO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Kb(t);throw e.fa("an object"===r?n+" a custom object":n+" "+r)}var r}function V0(n,e,t){if((e=(0,O.m9)(e))instanceof md)return e._internalPath;if("string"==typeof e)return eD(n,e);throw tD("Field path arguments must be of type string or ",n,!1,void 0,t)}const CU=new RegExp("[~\\*/\\[\\]]");function eD(n,e,t){if(e.search(CU)>=0)throw tD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new md(...e.split("."))._internalPath}catch{throw tD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Re(oe.INVALID_ARGUMENT,f+n+_)}function xO(n,e){return n.some(t=>t.isEqual(e))}class U0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bU extends U0{data(){return super.data()}}function nD(n,e){return"string"==typeof e?eD(n,e):e instanceof md?e._internalPath:e._delegate._internalPath}function MO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hM{}class B0 extends hM{}function df(n,e,...t){let r=[];e instanceof hM&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof My).length,l=i.filter(f=>f instanceof j0).length;if(a>1||a>0&&l>0)throw new Re(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class j0 extends B0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new j0(e,t,r)}_apply(e){const t=this._parse(e);return OO(e._query,t),new Li(e.firestore,e.converter,yb(e._query,t))}_parse(e){const t=Ag(e.firestore);return function(i,a,l,f,_,w,D){let x;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Re(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){PO(D,w);const P=[];for(const B of D)P.push(NO(f,i,B));x={arrayValue:{values:P}}}else x=NO(f,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||PO(D,w),x=TO(l,"where",D,"in"===w||"not-in"===w);return rn.create(_,w,x)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class My extends hM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new My(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:mn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)OO(a,f),a=yb(a,f)}(e._query,t),new Li(e.firestore,e.converter,yb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fM extends B0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fM(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Re(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Yh(i,a);return function(f,_){if(null===cy(f)){const w=dy(f);null!==w&&kO(0,w,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new Li(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new su(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class rD extends B0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new rD(e,t,r)}_apply(e){return new Li(e.firestore,e.converter,g0(e._query,this._limit,this._limitType))}}class iD extends B0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new iD(e,t,r)}_apply(e){const t=RO(e,this.type,this._docOrFields,this._inclusive);return new Li(e.firestore,e.converter,(i=t,new su((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class sD extends B0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new sD(e,t,r)}_apply(e){const t=RO(e,this.type,this._docOrFields,this._inclusive);return new Li(e.firestore,e.converter,(i=t,new su((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function RO(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof U0)return function(i,a,l,f,_){if(!f)throw new Re(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const D of dd(i))if(D.field.isKeyField())w.push(ad(a,f.key));else{const x=f.data.field(D.field);if(J_(x))throw new Re(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const P=D.field.canonicalString();throw new Re(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(x)}return new Ur(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Ag(n.firestore);return function(a,l,f,_,w,D){const x=a.explicitOrderBy;if(w.length>x.length)throw new Re(oe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let B=0;B<w.length;B++){const Z=w[B];if(x[B].field.isKeyField()){if("string"!=typeof Z)throw new Re(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Z}`);if(!p0(a)&&-1!==Z.indexOf("/"))throw new Re(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Z}' contains a slash.`);const ce=a.path.child(an.fromString(Z));if(!qe.isDocumentKey(ce))throw new Re(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ce}' is not because it contains an odd number of segments.`);const Me=new qe(ce);P.push(ad(l,Me))}else{const ce=TO(f,_,Z);P.push(ce)}}return new Ur(P,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function NO(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Re(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!p0(e)&&-1!==t.indexOf("/"))throw new Re(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!qe.isDocumentKey(r))throw new Re(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ad(n,new qe(r))}if(t instanceof nr)return ad(n,t._key);throw new Re(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kb(t)}.`)}function PO(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OO(n,e){if(e.isInequality()){const r=dy(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Re(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=cy(n);null!==a&&kO(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Re(oe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function kO(n,e,t){if(!t.isEqual(e))throw new Re(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class pM{convertValue(e,t="none"){switch(sd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ru(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Kh(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new Qb(vr(e.latitude),vr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=lb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ey(e));default:return null}}convertTimestamp(e){const t=nu(e);return new qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);ht(GN(r));const i=new rd(r.get(1),r.get(3)),a=new qe(r.popFirst(5));return i.isEqual(t)||yr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function oD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class PU extends pM{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}class Mg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _d extends U0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class $0 extends _d{data(e={}){return super.data(e)}}class hf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Mg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $0(this._firestore,this._userDataWriter,r.key,r,new Mg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new $0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Mg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new $0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Mg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:kU(l.type),doc:f,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function LO(n,e){return n instanceof _d&&e instanceof _d?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof hf&&e instanceof hf&&n._firestore===e._firestore&&oM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ff extends pM{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}function VO(n,e,t){n=ln(n,nr);const r=ln(n.firestore,rr),i=oD(n.converter,e,t);return Ry(r,[Jb(Ag(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Vn.none())])}function UO(n,e,t,...r){n=ln(n,nr);const i=ln(n.firestore,rr),a=Ag(i);let l;return l="string"==typeof(e=(0,O.m9)(e))||e instanceof md?cM(a,"updateDoc",n._key,e,t,r):lM(a,"updateDoc",n._key,e),Ry(i,[l.toMutation(n._key,Vn.exists(!0))])}function BO(n,...e){var t,r,i;n=(0,O.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||aM(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(aM(e[l])){const x=e[l];e[l]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[l+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[l+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let _,w,D;if(n instanceof nr)w=ln(n.firestore,rr),D=_g(n._key.path),_={next:x=>{e[l]&&e[l](gM(w,n,x))},error:e[l+1],complete:e[l+2]};else{const x=ln(n,Li);w=ln(x.firestore,rr),D=x._query;const P=new ff(w);_={next:B=>{e[l]&&e[l](new hf(w,P,x,B))},error:e[l+1],complete:e[l+2]},MO(n._query)}return function(x,P,B,Z){const ce=new zb(Z),Me=new bx(P,ce,B);return x.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return vx(yield xy(x),Me)})),()=>{ce.bc(),x.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Ex(yield xy(x),Me)}))}}(jr(w),D,f,_)}function Ry(n,e){return function(t,r){const i=new hn;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function MV(n,e,t){return xx.apply(this,arguments)}(yield rM(t),r,i)})),i.promise}(jr(n),e)}function gM(n,e,t){const r=t.docs.get(e._key),i=new ff(n);return new _d(n,i,e._key,r,new Mg(t.hasPendingWrites,t.fromCache),e.converter)}const zU={maxAttempts:5};class jO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ag(e)}set(e,t,r){this._verifyNotCommitted();const i=pf(e,this._firestore),a=oD(i.converter,t,r),l=Jb(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Vn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=pf(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof md?cM(this._dataReader,"WriteBatch.update",a._key,t,r,i):lM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=pf(e,this._firestore);return this._mutations=this._mutations.concat(new nf(t._key,Vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pf(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Re(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class qU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ag(e)}get(e){const t=pf(e,this._firestore),r=new PU(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const a=i[0];if(a.isFoundDocument())return new U0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new U0(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=pf(e,this._firestore),a=oD(i.converter,t,r),l=Jb(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=pf(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof md?cM(this._dataReader,"Transaction.update",a._key,t,r,i):lM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=pf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=pf(e,this._firestore),r=new ff(this._firestore);return super.get(e).then(i=>new _d(this._firestore,r,t._key,i._document,new Mg(!1,!1),t.converter))}}!function(n,e=!0){Wh=So.SDK_VERSION,(0,So._registerComponent)(new Ka.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new rr(new DN(t.getProvider("auth-internal")),new lg(t.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Re(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rd(f.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,So.registerVersion)(QC,"3.9.0",n),(0,So.registerVersion)(QC,"3.9.0","esm2017")}();function mM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function HO(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function GO(){if(!function ab(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}class H0{constructor(e){this._delegate=e}static fromBase64String(e){return GO(),new H0(bl.fromBase64String(e))}static fromUint8Array(e){return HO(),new H0(bl.fromUint8Array(e))}toBase64(){return GO(),this._delegate.toBase64()}toUint8Array(){return HO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _M(n){return function n2(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class r2{enableIndexedDbPersistence(e,t){return function uU(n,e){IO(n=ln(n,rr));const t=jr(n),r=n._freezeSettings(),i=new Yx;return EO(t,i,new rO(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function lU(n){IO(n=ln(n,rr));const e=jr(n),t=n._freezeSettings(),r=new Yx;return EO(e,r,new zV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function cU(n){if(n._initialized&&!n._terminated)throw new Re(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new hn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!Qs.C())return Promise.resolve();const i=r+"main";yield Qs.delete(i)}),function(r){return t.apply(this,arguments)})($A(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class WO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof rd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&hl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function _O(n,e,t,r={}){var i;const a=(n=ln(n,k0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&hl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=Qr.MOCK_USER;else{l=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Re(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Qr(_)}n._authCredentials=new XS(new td(l,f))}}(this._delegate,e,t,r)}enableNetwork(){return function hU(n){return function QV(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield aO(n),t=yield nM(n);return e.setNetworkEnabled(!0),function(r){const i=Ke(r);return i.mu.delete(0),P0(i)}(t)}))}(jr(n=ln(n,rr)))}(this._delegate)}disableNetwork(){return function fU(n){return function XV(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield aO(n),t=yield nM(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(i){const a=Ke(i);a.mu.add(0),yield Iy(a),a.pu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(jr(n=ln(n,rr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,hO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function dU(n){return function(e){const t=new hn;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function OV(n,e){return Ox.apply(this,arguments)}(yield rM(e),t)})),t.promise}(jr(n=ln(n,rr)))}(this._delegate)}onSnapshotsInSync(e){return function GU(n,e){return function tU(n,e){const t=new zb(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield xy(n),i=t,Ke(r).vu.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield xy(n),i=t,void Ke(r).vu.delete(i);var r,i}))}}(jr(n=ln(n,rr)),aM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ny(this,yO(this._delegate,e))}catch(t){throw Ss(t,"collection()","Firestore.collection()")}}doc(e){try{return new da(this,Yb(this._delegate,e))}catch(t){throw Ss(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new As(this,function iU(n,e){if(n=ln(n,k0),sM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Li(n,null,(t=e,new su(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ss(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ZU(n,e,t){n=ln(n,rr);const r=Object.assign(Object.assign({},zU),t);return function(i){if(i.maxAttempts<1)throw new Re(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new hn;return i.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const _=yield function uO(n){return qb(n).then(e=>e.datastore)}(i);new KV(i.asyncQueue,_,l,a,f).run()})),f.promise}(jr(n),i=>e(new qU(n,i)),r)}(this._delegate,t=>e(new zO(this,t)))}batch(){return jr(this._delegate),new qO(new jO(this._delegate,e=>Ry(this._delegate,e)))}loadBundle(e){return function pU(n,e){const t=jr(n=ln(n,rr)),r=new oU;return function nU(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return iO(_,w);if(_ instanceof ArrayBuffer)return iO(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new qV(_,l);var _}(t,N0(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function WV(n,e,t){const r=Ke(n);var i;(i=(0,ge.Z)(function*(a,l,f){try{const _=yield l.getMetadata();if(yield function(P,B){const Z=Ke(P),ce=Tr(B.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",Me=>Z.$s.getBundleMetadata(Me,B.id)).then(Me=>!!Me&&Me.createTime.compareTo(ce)>=0)}(a.localStore,_))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(P=_).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);f._updateProgress(qP(_));const w=new bV(_,a.localStore,l.Tt);let D=yield l.yc();for(;D;){const P=yield w.Bu(D);P&&f._updateProgress(P),D=yield l.yc()}const x=yield w.complete();return yield gd(a,x.Uu,void 0),yield function(P,B){const Z=Ke(P);return Z.persistence.runTransaction("Save bundle","readwrite",ce=>Z.$s.saveBundleMetadata(ce,B))}(a.localStore,_),f._completeWith(x.progress),Promise.resolve(x.qu)}catch(_){return hl("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var P}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield rM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function gU(n,e){return function rU(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const i=Ke(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.$s.getNamedQuery(a,r))}(yield Zb(n),e)}))}(jr(n=ln(n,rr)),e).then(t=>t?new Li(n,null,t.query):null)}(this._delegate,e).then(t=>t?new As(this,t):null)}}class aD extends pM{constructor(e){super(),this.firestore=e}convertBytes(e){return new H0(new bl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return da.forKey(t,this.firestore,null)}}class zO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new aD(e)}get(e){const t=Ng(e);return this._delegate.get(t).then(r=>new G0(this._firestore,new _d(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ng(e);return r?(mM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Ng(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Ng(e);return this._delegate.delete(t),this}}class qO{constructor(e){this._delegate=e}set(e,t,r){const i=Ng(e);return r?(mM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Ng(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Ng(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Rg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new $0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new W0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Rg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Rg(e,new aD(e),t),i.set(t,a)),a}}Rg.INSTANCES=new WeakMap;class da{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new da(t,new nr(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new da(t,new nr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ny(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ny(this.firestore,yO(this._delegate,e))}catch(t){throw Ss(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof nr&&vO(this._delegate,e)}set(e,t){t=mM("DocumentReference.set",t);try{return t?VO(this._delegate,e,t):VO(this._delegate,e)}catch(r){throw Ss(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?UO(this._delegate,e):UO(this._delegate,e,t,...r)}catch(i){throw Ss(i,"updateDoc()","DocumentReference.update()")}}delete(){return function $U(n){return Ry(ln(n.firestore,rr),[new nf(n._key,Vn.none())])}(this._delegate)}onSnapshot(...e){const t=ZO(e),r=KO(e,i=>new G0(this.firestore,new _d(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return BO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function LU(n){n=ln(n,nr);const e=ln(n.firestore,rr),t=jr(e),r=new ff(e);return function JV(n,e){const t=new hn;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,a,l){try{const f=yield function(_,w){const D=Ke(_);return D.persistence.runTransaction("read document","readonly",x=>D.localDocuments.getDocument(x,w))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Re(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=Dy(f,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield Zb(n),e,t);var r})),t.promise}(t,n._key).then(i=>new _d(e,r,n._key,i,new Mg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function VU(n){n=ln(n,nr);const e=ln(n.firestore,rr);return lO(jr(e),n._key,{source:"server"}).then(t=>gM(e,n,t))}(this._delegate):function FU(n){n=ln(n,nr);const e=ln(n.firestore,rr);return lO(jr(e),n._key).then(t=>gM(e,n,t))}(this._delegate),t.then(r=>new G0(this.firestore,new _d(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new da(this.firestore,this._delegate.withConverter(e?Rg.getInstance(this.firestore,e):null))}}function Ss(n,e,t){return n.message=n.message.replace(e,t),n}function ZO(n){for(const e of n)if("object"==typeof e&&!_M(e))return e;return{}}function KO(n,e){var t,r;let i;return i=_M(n[0])?n[0]:_M(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class G0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new da(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return LO(this._delegate,e._delegate)}}class W0 extends G0{data(e){const t=this._delegate.data(e);return function XC(n,e){n||st()}(void 0!==t),t}}class As{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aD(e)}where(e,t,r){try{return new As(this.firestore,df(this._delegate,function DU(n,e,t){const r=e,i=nD("where",n);return j0._create(i,r,t)}(e,t,r)))}catch(i){throw Ss(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new As(this.firestore,df(this._delegate,function TU(n,e="asc"){const t=e,r=nD("orderBy",n);return fM._create(r,t)}(e,t)))}catch(r){throw Ss(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new As(this.firestore,df(this._delegate,function SU(n){return gO("limit",n),rD._create("limit",n,"F")}(e)))}catch(t){throw Ss(t,"limit()","Query.limit()")}}limitToLast(e){try{return new As(this.firestore,df(this._delegate,function AU(n){return gO("limitToLast",n),rD._create("limitToLast",n,"L")}(e)))}catch(t){throw Ss(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new As(this.firestore,df(this._delegate,function xU(...n){return iD._create("startAt",n,!0)}(...e)))}catch(t){throw Ss(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new As(this.firestore,df(this._delegate,function MU(...n){return iD._create("startAfter",n,!1)}(...e)))}catch(t){throw Ss(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new As(this.firestore,df(this._delegate,function RU(...n){return sD._create("endBefore",n,!1)}(...e)))}catch(t){throw Ss(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new As(this.firestore,df(this._delegate,function NU(...n){return sD._create("endAt",n,!0)}(...e)))}catch(t){throw Ss(t,"endAt()","Query.endAt()")}}isEqual(e){return oM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function BU(n){n=ln(n,Li);const e=ln(n.firestore,rr),t=jr(e),r=new ff(e);return function eU(n,e){const t=new hn;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,a,l){try{const f=yield Ub(i,a,!0),_=new YP(a,f.Yi),w=_.Hu(f.documents),D=_.applyChanges(w,!1);l.resolve(D.snapshot)}catch(f){const _=Dy(f,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield Zb(n),e,t);var r})),t.promise}(t,n._query).then(i=>new hf(e,r,n,i))}(this._delegate):"server"===e?.source?function jU(n){n=ln(n,Li);const e=ln(n.firestore,rr),t=jr(e),r=new ff(e);return cO(t,n._query,{source:"server"}).then(i=>new hf(e,r,n,i))}(this._delegate):function UU(n){n=ln(n,Li);const e=ln(n.firestore,rr),t=jr(e),r=new ff(e);return MO(n._query),cO(t,n._query).then(i=>new hf(e,r,n,i))}(this._delegate),t.then(r=>new yM(this.firestore,new hf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ZO(e),r=KO(e,i=>new yM(this.firestore,new hf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return BO(this._delegate,t,r)}withConverter(e){return new As(this.firestore,this._delegate.withConverter(e?Rg.getInstance(this.firestore,e):null))}}class s2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new W0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new As(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new W0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new s2(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new W0(this._firestore,r))})}isEqual(e){return LO(this._delegate,e._delegate)}}class Ny extends As{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new da(this.firestore,e):null}doc(e){try{return new da(this.firestore,void 0===e?Yb(this._delegate):Yb(this._delegate,e))}catch(t){throw Ss(t,"doc()","CollectionReference.doc()")}}add(e){return function HU(n,e){const t=ln(n.firestore,rr),r=Yb(n),i=oD(n.converter,e);return Ry(t,[Jb(Ag(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Vn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new da(this.firestore,t))}isEqual(e){return vO(this._delegate,e._delegate)}withConverter(e){return new Ny(this.firestore,this._delegate.withConverter(e?Rg.getInstance(this.firestore,e):null))}}function Ng(n){return ln(n,nr)}class vM{constructor(...e){this._delegate=new md(...e)}static documentId(){return new vM(Zn.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof md&&this._delegate._internalPath.isEqual(e._internalPath)}}class Pg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function YU(){return new uM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Pg(e)}static delete(){const e=function KU(){return new L0("deleteField")}();return e._methodName="FieldValue.delete",new Pg(e)}static arrayUnion(...e){const t=function QU(...n){return new wU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Pg(t)}static arrayRemove(...e){const t=function XU(...n){return new EU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Pg(t)}static increment(e){const t=function JU(n){return new IU("increment",n)}(e);return t._methodName="FieldValue.increment",new Pg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const o2={Firestore:WO,GeoPoint:Qb,Timestamp:qn,Blob:H0,Transaction:zO,WriteBatch:qO,DocumentReference:da,DocumentSnapshot:G0,Query:As,QueryDocumentSnapshot:W0,QuerySnapshot:yM,CollectionReference:Ny,FieldPath:vM,FieldValue:Pg,setLogLevel:function i2(n){!function Kw(n){dl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function u2(n){(function a2(n,e){n.INTERNAL.registerComponent(new Ka.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},o2)))})(n,(e,t)=>new WO(e,t,new r2)),n.registerVersion("@firebase/firestore-compat","0.3.5")}(XI.Z);var wM=F(6451),uD=F(5363),l2=F(6063);class c2 extends Wa.x{constructor(e=1/0,t=1/0,r=l2.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)f=_;f&&r.splice(0,f+1)}}}var YO=F(3099);function QO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,YO.B)({connector:()=>new c2(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function XO(n,e){return(0,gp.m)(e)?gr(()=>n,e):gr(()=>n)}var EM=F(9468);F(259);const CM=new Map,ek={activated:!1,tokenObservers:[]},g2={initialized:!1,enabled:!1};function Vi(n){return CM.get(n)||Object.assign({},ek)}function cD(){return g2}const bM="https://content-firebaseappcheck.googleapis.com/v1",v2="exchangeDebugToken",tk={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class E2{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function I2(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const xs=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function SM(){return SM=(0,ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const x=yield i.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(x){throw xs.create("fetch-network-error",{originalErrorMessage:x?.message})}if(200!==l.status)throw xs.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(x){throw xs.create("fetch-parse-error",{originalErrorMessage:x?.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw xs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(_[1]),D=Date.now();return{token:f.token,expireTimeMillis:D+w,issuedAtTimeMillis:D}}),SM.apply(this,arguments)}const S2="firebase-app-check-database",A2=1,z0="firebase-app-check-store";let fD=null;function AM(){return AM=(0,ge.Z)(function*(n,e){const r=(yield function ik(){return fD||(fD=new Promise((n,e)=>{try{const t=indexedDB.open(S2,A2);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(xs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(z0,{keyPath:"compositeKey"})}}catch(t){e(xs.create("storage-open",{originalErrorMessage:t?.message}))}}),fD)}()).transaction(z0,"readwrite"),a=r.objectStore(z0).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var w;f(xs.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})}),AM.apply(this,arguments)}const q0=new Is.Yd("@firebase/app-check");function RM(n,e){return(0,O.hl)()?function M2(n,e){return function sk(n,e){return AM.apply(this,arguments)}(function ak(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{q0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function PM(){return PM=(0,ge.Z)(function*(){const n=cD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),PM.apply(this,arguments)}const F2={error:"UNKNOWN_ERROR"};function L2(n){return O.US.encodeString(JSON.stringify(n),!1)}function pD(n){return OM.apply(this,arguments)}function OM(){return OM=(0,ge.Z)(function*(n,e=!1){const t=n.app;!function nk(n){if(!Vi(n).activated)throw xs.create("use-before-activation",{appName:n.name})}(t);const r=Vi(t);let a,i=r.token;if(i&&!Py(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Py(_)?i=_:yield RM(t,void 0))}if(!e&&i&&Py(i))return{token:i.token};let f,l=!1;if(function uk(){return cD().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function TM(n,e){return SM.apply(this,arguments)}(function T2(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${bM}/projects/${t}/apps/${r}:${v2}?key=${i}`,body:{debug_token:e}}}(t,yield function lk(){return PM.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield RM(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Vi(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?q0.warn(_.message):q0.error(_),a=_}return i?a?f=Py(i)?{token:i.token,internalError:a}:hk(a):(f={token:i.token},r.token=i,yield RM(t,i)):f=hk(a),l&&function dk(n,e){const t=Vi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),OM.apply(this,arguments)}function FM(n,e){const t=Vi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ck(n){const{app:e}=n,t=Vi(e);let r=t.tokenRefresher;r||(r=function V2(n){const{app:e}=n;return new E2((0,ge.Z)(function*(){let r;if(r=Vi(e).token?yield pD(n,!0):yield pD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Vi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},tk.RETRIAL_MIN_WAIT,tk.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Py(n){return n.expireTimeMillis-Date.now()>0}function hk(n){return{token:L2(F2),error:n}}class U2{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Vi(this.app);for(const t of e)FM(this.app,t.next);return Promise.resolve()}}const wk="app-check-internal";!function J2(){(0,So._registerComponent)(new Ka.wA("app-check",n=>function B2(n,e){return new U2(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(wk).initialize()})),(0,So._registerComponent)(new Ka.wA(wk,n=>function j2(n){return{getToken:e=>pD(n,e),addTokenListener:e=>function kM(n,e,t,r){const{app:i}=n,a=Vi(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Py(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),ck(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>ck(n))}(n,"INTERNAL",e),removeTokenListener:e=>FM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,So.registerVersion)("@firebase/app-check","0.6.4")}();class mD{constructor(){return(0,Ln.vb)("app-check")}}typeof window<"u"&&window;const jM=new h.OlP("angularfire2.auth.use-emulator"),$M=new h.OlP("angularfire2.auth.settings"),HM=new h.OlP("angularfire2.auth.tenant-id"),GM=new h.OlP("angularfire2.auth.langugage-code"),WM=new h.OlP("angularfire2.auth.use-device-language"),zM=new h.OlP("angularfire.auth.persistence"),qM=(n,e,t,r,i,a,l,f)=>(0,Ei.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[w,D]of Object.entries(l))_.settings[w]=D;return f&&_.setPersistence(f),_},[t,r,i,a,l,f]);let Z0=(()=>{class n{constructor(t,r,i,a,l,f,_,w,D,x,P,B){const Z=new Wa.x,ce=mt(void 0).pipe((0,uD.Q)(l.outsideAngular),gr(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8971)))),(0,dt.U)(()=>(0,Ei.on)(t,a,r)),(0,dt.U)(Me=>qM(Me,a,f,w,D,x,_,P)),QO({bufferSize:1,refCount:!1}));if(Eu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{ce.pipe(Io()).subscribe();const Tt=ce.pipe(gr(Gt=>Gt.getRedirectResult().then($t=>$t,()=>null)),Ln.iC,QO({bufferSize:1,refCount:!1})),Bt=ce.pipe(gr(Gt=>new fr.y($t=>({unsubscribe:a.runOutsideAngular(()=>Gt.onAuthStateChanged(Yt=>$t.next(Yt),Yt=>$t.error(Yt),()=>$t.complete()))})))),It=ce.pipe(gr(Gt=>new fr.y($t=>({unsubscribe:a.runOutsideAngular(()=>Gt.onIdTokenChanged(Yt=>$t.next(Yt),Yt=>$t.error(Yt),()=>$t.complete()))}))));this.authState=Tt.pipe(XO(Bt),(0,EM.R)(l.outsideAngular),(0,uD.Q)(l.insideAngular)),this.user=Tt.pipe(XO(It),(0,EM.R)(l.outsideAngular),(0,uD.Q)(l.insideAngular)),this.idToken=this.user.pipe(gr(Gt=>Gt?(0,Wt.D)(Gt.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(gr(Gt=>Gt?(0,Wt.D)(Gt.getIdTokenResult()):mt(null))),this.credential=(0,wM.T)(Tt,Z,this.authState.pipe(Ws(Gt=>!Gt))).pipe((0,dt.U)(Gt=>Gt?.user?Gt:null),(0,EM.R)(l.outsideAngular),(0,uD.Q)(l.insideAngular))}return(0,Ei.pX)(this,ce,a,{spy:{apply:(Me,Tt,Bt)=>{(Me.startsWith("signIn")||Me.startsWith("createUser"))&&Bt.then(It=>Z.next(It))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ei.Dh),h.LFG(Ei.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Ln.HU),h.LFG(jM,8),h.LFG($M,8),h.LFG(HM,8),h.LFG(GM,8),h.LFG(WM,8),h.LFG(zM,8),h.LFG(mD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),sB=(()=>{class n{constructor(){qs.Z.registerVersion("angularfire",Ln.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Z0]}),n})();function Ik(n,e){return function oB(n,e=QI.z){return new fr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function ZM(n,e){return Ik(n,e).pipe((0,dt.U)(t=>({payload:t,type:"query"})))}function _D(n,e){return ZM(n,e).pipe(Om(void 0),Zs(),(0,dt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const _=i.find(D=>D.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(D=>D.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function Ck(n,e,t){return _D(n,t).pipe(ch((r,i)=>function uB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function lB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return KM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return KM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return KM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Ks(),(0,dt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function KM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function bk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Dk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=_D(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,dt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Om(void 0),Zs(),Ws(([r,i])=>i.length>0||!r),(0,dt.U)(([r,i])=>i),Ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(ch((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=bk(e);return Ck(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(e={}){return ZM(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ln.iC)}get(e){return(0,Wt.D)(this.query.get(e)).pipe(Ln.iC)}add(e){return this.ref.add(e)}doc(e){return new Tk(this.ref.doc(e),this.afs)}}class Tk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=Sk(r,t);return new Dk(i,a,this.afs)}snapshotChanges(){return function aB(n,e){return Ik(n,e).pipe(Om(void 0),Zs(),(0,dt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Wt.D)(this.ref.get(e)).pipe(Ln.iC)}}class cB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?_D(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ws(t=>t.length>0),Ln.iC):_D(this.query,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(ch((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=bk(e);return Ck(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(e={}){return ZM(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Ln.iC)}get(e){return(0,Wt.D)(this.query.get(e)).pipe(Ln.iC)}}const dB=new h.OlP("angularfire2.enableFirestorePersistence"),hB=new h.OlP("angularfire2.firestore.persistenceSettings"),fB=new h.OlP("angularfire2.firestore.settings"),pB=new h.OlP("angularfire2.firestore.use-emulator");function Sk(n,e=(t=>t)){return{query:e(n),ref:n}}let YM=(()=>{class n{constructor(t,r,i,a,l,f,_,w,D,x,P,B,Z,ce,Me,Tt,Bt){this.schedulers=_;const It=(0,Ei.on)(t,f,r),Gt=D;x&&qM(It,f,P,Z,ce,Me,B,Tt),[this.firestore,this.persistenceEnabled$]=(0,Ei.cc)(`${It.name}.firestore`,"AngularFirestore",It.name,()=>{const $t=f.runOutsideAngular(()=>It.firestore());if(a&&$t.settings(a),Gt&&$t.useEmulator(...Gt),i&&!Eu(l)){const Yt=()=>{try{return(0,Wt.D)($t.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Ai){return typeof console<"u"&&console.warn(Ai),mt(!1)}};return[$t,f.runOutsideAngular(Yt)]}return[$t,mt(!1)]},[a,Gt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=Sk(i,r),f=this.schedulers.ngZone.run(()=>a);return new Dk(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new cB(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Tk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ei.Dh),h.LFG(Ei.xv,8),h.LFG(dB,8),h.LFG(fB,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Ln.HU),h.LFG(hB,8),h.LFG(pB,8),h.LFG(Z0,8),h.LFG(jM,8),h.LFG($M,8),h.LFG(HM,8),h.LFG(GM,8),h.LFG(WM,8),h.LFG(zM,8),h.LFG(mD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gf=(()=>{class n{constructor(t,r,i,a){this.firestore=t,this.fireAuth=r,this.router=i,this.ngZone=a,this.fireAuth.authState.subscribe(l=>{l?(this.userState=l,localStorage.setItem("user",JSON.stringify(this.userState)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user",null),JSON.parse(localStorage.getItem("user")))})}login(t,r){return this.fireAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["cuenta"])}),this.setUserData(i.user)}).catch(i=>{window.alert(i)})}registrar(t,r){return this.fireAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.sendVerificationEmail(),this.setUserData(i.user)}).catch(i=>{window.alert(i)})}sendVerificationEmail(){return this.fireAuth.currentUser.then(t=>{t?.sendEmailVerification()}).then(()=>{this.router.navigate(["verificar-email"])})}forgotPassword(t){return this.fireAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Se envio correo para reestablecer password")}).catch(r=>{window.alert(r.message)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!=t&&0!=t.emailVerified}googleAuth(){return this.authLogin(new qs.Z.auth.GoogleAuthProvider)}authLogin(t){return this.fireAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["cuenta"])}),this.setUserData(r.user)}).catch(r=>{window.alert(r.message)})}setUserData(t){return this.firestore.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}logout(){return this.fireAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate([""])})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(YM),h.LFG(Z0),h.LFG(wi),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gB=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return 1!=this.authService.isLoggedIn&&this.router.navigate(["login"]),!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(gf),h.LFG(wi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QM=(()=>{class n{constructor(t){this.firestore=t}getPeliculaById(t){return this.firestore.collection("pelicula").doc(t).snapshotChanges()}getAllPeliculas(){return this.firestore.collection("pelicula").snapshotChanges()}getPeliculas(t){return this.firestore.collection("pelicula",r=>r.where("usuario","==",t)).snapshotChanges()}newPelicula(t){return this.firestore.collection("pelicula").add(Object.assign({},t))}deletePelicula(t){this.firestore.doc("pelicula/"+t).delete()}updatePelicula(t){this.firestore.doc("pelicula/"+t.id).update(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(YM))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mB(n,e){if(1&n&&(h.TgZ(0,"div",5)(1,"div",6)(2,"div",7),h._UZ(3,"img",8),h.qZA(),h.TgZ(4,"div",9)(5,"div",10)(6,"h5",11),h._uU(7),h.qZA(),h.TgZ(8,"div",12)(9,"label",13)(10,"strong"),h._uU(11,"Director: "),h.qZA(),h._uU(12),h.qZA(),h._UZ(13,"br"),h.TgZ(14,"label",13)(15,"strong"),h._uU(16,"Anio: "),h.qZA(),h._uU(17),h.qZA(),h._UZ(18,"br"),h.TgZ(19,"a",14),h._uU(20,"Visitar"),h.qZA()()()()()()),2&n){const t=e.$implicit;h.xp6(3),h.s9C("src",t.url,h.LSH),h.xp6(4),h.Oqu(t.nombre),h.xp6(5),h.Oqu(t.director),h.xp6(5),h.Oqu(t.anio),h.xp6(2),h.MGl("routerLink","/pelicula/",t.id,"")}}let _B=(()=>{class n{constructor(t){this.peliculaService=t,this.peliculas=[],this.peliculaService.getAllPeliculas().subscribe(r=>{this.peliculas=r.map(i=>({...i.payload.doc.data(),id:i.payload.doc.id}))})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(QM))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:7,vars:1,consts:[[1,"container"],[1,"text-center"],[1,"mb-4"],[1,"mb-3"],["class","card mb-3 col-12","style","background-color: #E7E7E7;",4,"ngFor","ngForOf"],[1,"card","mb-3","col-12",2,"background-color","#E7E7E7"],[1,"row","g-0","align-items-center"],[1,"col-4"],["width","100%","alt","...",1,"rounded-start",3,"src"],[1,"col-8"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"mb-1"],[1,"btn","btn-info",3,"routerLink"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),h._uU(3,"Peliculas Web Site"),h.qZA()(),h.TgZ(4,"h3",3),h._uU(5,"Catalogo completo"),h.qZA(),h.YNc(6,mB,21,5,"div",4),h.qZA()),2&t&&(h.xp6(6),h.Q6J("ngForOf",r.peliculas))},dependencies:[bn,$c]}),n})(),yB=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(gf))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:36,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-3"],[1,"col-6"],[1,"card","text-center"],[1,"card-header"],[1,"card-body"],[1,"form-floating","mb-3"],["type","email","id","floatingInput","placeholder","name@example.com","required","",1,"form-control"],["userName",""],["for","floatingInput"],["type","password","id","floatingPassword","placeholder","Password","required","",1,"form-control"],["userPassword",""],["for","floatingPassword"],[1,"card-footer"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"],["routerLink","/restaurar"],["routerLink","/registro"]],template:function(t,r){if(1&t){const i=h.EpF();h.TgZ(0,"div",0)(1,"div",1),h._UZ(2,"div",2),h.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3"),h._uU(7,"Inicio de sesion"),h.qZA()(),h.TgZ(8,"div",6)(9,"div",7),h._UZ(10,"input",8,9),h.TgZ(12,"label",10),h._uU(13,"Email address"),h.qZA()(),h.TgZ(14,"div",7),h._UZ(15,"input",11,12),h.TgZ(17,"label",13),h._uU(18,"Password"),h.qZA()()(),h.TgZ(19,"div",14)(20,"button",15),h.NdJ("click",function(){h.CHM(i);const l=h.MAs(11),f=h.MAs(16);return h.KtG(r.authService.login(l.value,f.value))}),h._uU(21,"Ingresar"),h.qZA(),h._UZ(22,"hr"),h.TgZ(23,"p"),h._uU(24,"Otras opciones de acceso"),h.qZA(),h.TgZ(25,"p")(26,"button",16),h.NdJ("click",function(){return r.authService.googleAuth()}),h._uU(27,"Acceder con Google"),h.qZA()(),h.TgZ(28,"p")(29,"a",17),h._uU(30,"Olvidaste tu password"),h.qZA(),h._uU(31," o "),h.TgZ(32,"a",18),h._uU(33,"eres nuevo"),h.qZA(),h._uU(34,"?"),h.qZA()()()(),h._UZ(35,"div",2),h.qZA()()}},dependencies:[$c]}),n})(),vB=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(gf))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-restaurar"]],decls:17,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-3"],[1,"col-6"],[1,"card","text-center"],[1,"card-header"],[1,"card-body"],[1,"form-floating","mb-3"],["type","email","id","floatingInput","placeholder","name@example.com",1,"form-control"],["for","floatingInput"],[1,"card-footer"],[1,"btn","btn-primary"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1),h._UZ(2,"div",2),h.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3"),h._uU(7,"Restaurar password"),h.qZA()(),h.TgZ(8,"div",6)(9,"div",7),h._UZ(10,"input",8),h.TgZ(11,"label",9),h._uU(12,"Correo electronico asociado a tu cuenta"),h.qZA()()(),h.TgZ(13,"div",10)(14,"button",11),h._uU(15,"Restaurar"),h.qZA()()()(),h._UZ(16,"div",2),h.qZA()())}}),n})(),wB=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(gf))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-registro"]],decls:34,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-3"],[1,"col-6"],[1,"card","text-center"],[1,"card-header"],[1,"card-body"],[1,"form-floating","mb-3"],["type","email","id","floatingInput","placeholder","name@example.com","required","",1,"form-control"],["userName",""],["for","floatingInput"],[1,"form-floating"],["type","password","id","floatingPassword","placeholder","Password","required","",1,"form-control"],["userPassword",""],["for","floatingPassword"],[1,"card-footer"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"],["routerLink","/login"]],template:function(t,r){if(1&t){const i=h.EpF();h.TgZ(0,"div",0)(1,"div",1),h._UZ(2,"div",2),h.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3"),h._uU(7,"Registrate"),h.qZA()(),h.TgZ(8,"div",6)(9,"div",7),h._UZ(10,"input",8,9),h.TgZ(12,"label",10),h._uU(13,"Email address"),h.qZA()(),h.TgZ(14,"div",11),h._UZ(15,"input",12,13),h.TgZ(17,"label",14),h._uU(18,"Password"),h.qZA()()(),h.TgZ(19,"div",15)(20,"p")(21,"button",16),h.NdJ("click",function(){h.CHM(i);const l=h.MAs(11),f=h.MAs(16);return h.KtG(r.authService.registrar(l.value,f.value))}),h._uU(22,"Registrarme"),h.qZA()(),h.TgZ(23,"p"),h._uU(24,"O"),h.qZA(),h.TgZ(25,"p")(26,"button",17),h.NdJ("click",function(){return r.authService.googleAuth()}),h._uU(27,"Ingresar con Google"),h.qZA()(),h.TgZ(28,"p"),h._uU(29,"Ya tienes una cuenta? "),h.TgZ(30,"a",18),h._uU(31,"Accede"),h.qZA(),h._uU(32,"."),h.qZA()()()(),h._UZ(33,"div",2),h.qZA()()}},dependencies:[$c]}),n})(),EB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-verificacion"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"p"),h._uU(1,"verificacion works!"),h.qZA())}}),n})();class XM{}class JM{constructor(e,t,r){this.nombrePelicula=t,this.usuario=e,this.pelicula=r}}let Ak=(()=>{class n{constructor(t){this.firestore=t}getComentarios(t){return this.firestore.collection("comentario",r=>r.where("usuario","==",t)).snapshotChanges()}getComentarioByPelicula(t){return this.firestore.collection("comentario",r=>r.where("pelicula","==",t)).snapshotChanges()}newComentario(t){return this.firestore.collection("comentario").add(Object.assign({},t))}deleteComentario(t){this.firestore.doc("comentario/"+t).delete()}updateComentario(t){this.firestore.doc("comentario/"+t.id).update(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(YM))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function IB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr")(1,"th",37),h._uU(2),h.qZA(),h.TgZ(3,"th"),h._uU(4),h.qZA(),h.TgZ(5,"th"),h._uU(6),h.qZA(),h.TgZ(7,"th"),h._uU(8),h.qZA(),h.TgZ(9,"th"),h._uU(10),h.qZA(),h.TgZ(11,"th")(12,"button",38),h.NdJ("click",function(){const a=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.eliminarPelicula(a.id))}),h._uU(13,"Eliminar"),h.qZA(),h.TgZ(14,"button",39),h.NdJ("click",function(){const a=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.selectPelicula(a,1))}),h._uU(15,"Actualizar"),h.qZA()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t.id),h.xp6(2),h.Oqu(t.nombre),h.xp6(2),h.Oqu(t.director),h.xp6(2),h.Oqu(t.anio),h.xp6(2),h.Oqu(t.url)}}function CB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",40)(1,"div",41)(2,"div",42)(3,"h5"),h._uU(4),h.qZA()(),h.TgZ(5,"div",43),h._uU(6),h.qZA(),h.TgZ(7,"div",44)(8,"button",45),h.NdJ("click",function(){const a=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.eliminarComentario(a.id))}),h._uU(9,"Eliminar"),h.qZA(),h._UZ(10,"br"),h.TgZ(11,"button",46),h.NdJ("click",function(){const a=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.selectComentario(a))}),h._uU(12,"Actualizar"),h.qZA()()()()}if(2&n){const t=e.$implicit;h.xp6(4),h.Oqu(t.nombrePelicula),h.xp6(2),h.Oqu(t.comentario)}}let bB=(()=>{class n{constructor(t,r,i){this.authService=t,this.peliculaService=r,this.comentarioService=i,this.accion=0,this.comentAction=0,this.peliculas=[],this.pelicula=new XM,this.usuario=this.authService.userState.uid?this.authService.userState.uid:"",this.comentario=new JM(this.usuario,"",""),this.comentarios=[],this.peliculaService.getPeliculas(this.authService.userState.uid).subscribe(a=>{this.peliculas=a.map(l=>({...l.payload.doc.data(),id:l.payload.doc.id}))}),this.comentarioService.getComentarios(this.authService.userState.uid).subscribe(a=>{this.comentarios=a.map(l=>({...l.payload.doc.data(),id:l.payload.doc.id}))})}ngOnInit(){}crearPelicula(){this.pelicula.usuario=this.authService.userState.uid,console.log(this.pelicula),this.peliculaService.newPelicula(this.pelicula)}actualizarPelicula(){this.peliculaService.updatePelicula(this.pelicula)}eliminarPelicula(t){this.peliculaService.deletePelicula(t)}realizarOperacion(){0==this.accion?this.crearPelicula():1==this.accion&&(this.actualizarPelicula(),this.accion=0)}selectPelicula(t,r){this.accion=r,this.pelicula=t}limpiarFormulario(){this.accion=0,this.pelicula=new XM}selectComentario(t){this.comentario=t}actualizarComentario(){this.comentarioService.updateComentario(this.comentario)}eliminarComentario(t){this.comentarioService.deleteComentario(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(gf),h.Y36(QM),h.Y36(Ak))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-cuenta"]],decls:80,vars:10,consts:[[1,"container"],[1,"row"],[1,"col"],[1,"col","text-end"],[1,"btn","btn-warning",3,"click"],[1,"container-fluid"],["id","nav-tab","role","tablist",1,"nav","nav-tabs","mb-3"],["id","nav-home-tab","data-bs-toggle","tab","data-bs-target","#nav-home","type","button","role","tab","aria-controls","nav-home","aria-selected","true",1,"nav-link","active"],["id","nav-profile-tab","data-bs-toggle","tab","data-bs-target","#nav-profile","type","button","role","tab","aria-controls","nav-profile","aria-selected","false",1,"nav-link"],["id","nav-tabContent",1,"tab-content"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","show","active"],[1,"text-start"],["data-bs-toggle","modal","data-bs-target","#peliculaModal",1,"btn","btn-success",3,"click"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["id","nav-profile","role","tabpanel","aria-labelledby","nav-contact-tab",1,"tab-pane","fade"],[1,"list-group"],[1,"list-group-item"],["class","card col-12 border border-secondary px-2 py-1",4,"ngFor","ngForOf"],["id","peliculaModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["type","text","placeholder","Nombre de la pelicula",1,"form-control","mb-2",3,"ngModel","ngModelChange"],["type","text","placeholder","Nombre del director",1,"form-control","mb-2",3,"ngModel","ngModelChange"],["type","text","placeholder","Anio de lanzamiento",1,"form-control","mb-2",3,"ngModel","ngModelChange"],["type","text","placeholder","URL de poster",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","comentarioModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"form-control",3,"ngModel","ngModelChange"],["scope","row"],[1,"btn","btn-danger",3,"click"],["data-bs-toggle","modal","data-bs-target","#peliculaModal",1,"btn","btn-info",3,"click"],[1,"card","col-12","border","border-secondary","px-2","py-1"],[1,"row","align-items-center"],[1,"col-3"],[1,"col-7","text-center"],[1,"col-2","text-end"],[1,"btn","btn-danger","col-12","mb-2",3,"click"],["data-bs-toggle","modal","data-bs-target","#comentarioModal",1,"btn","btn-info","col-12",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),h._uU(4,"Bienvenido"),h.qZA(),h.TgZ(5,"h4"),h._uU(6),h.qZA(),h.TgZ(7,"h6"),h._uU(8),h.qZA()(),h.TgZ(9,"div",3)(10,"button",4),h.NdJ("click",function(){return r.authService.logout()}),h._uU(11,"Cerrar sesion"),h.qZA()()()(),h.TgZ(12,"div",5)(13,"nav")(14,"div",6)(15,"button",7),h._uU(16,"Tus peliculas"),h.qZA(),h.TgZ(17,"button",8),h._uU(18,"Tus comentarios"),h.qZA()()(),h.TgZ(19,"div",9)(20,"div",10)(21,"div",11)(22,"button",12),h.NdJ("click",function(){return r.limpiarFormulario()}),h._uU(23,"Registrar pelicula"),h.qZA(),h.TgZ(24,"table",13)(25,"thead")(26,"tr")(27,"th",14),h._uU(28,"ID"),h.qZA(),h.TgZ(29,"th",14),h._uU(30,"Nombre"),h.qZA(),h.TgZ(31,"th",14),h._uU(32,"Director"),h.qZA(),h.TgZ(33,"th",14),h._uU(34,"Anio"),h.qZA(),h.TgZ(35,"th",14),h._uU(36,"URL de imagen"),h.qZA(),h.TgZ(37,"th",14),h._uU(38,"Acciones"),h.qZA()()(),h.TgZ(39,"tbody"),h.YNc(40,IB,16,5,"tr",15),h.qZA()()()(),h.TgZ(41,"div",16)(42,"h4"),h._uU(43,"Comentarios"),h.qZA(),h.TgZ(44,"ul",17)(45,"li",18),h.YNc(46,CB,13,2,"div",19),h.qZA()()()()(),h.TgZ(47,"div",20)(48,"div",21)(49,"div",22)(50,"div",23)(51,"h5",24),h._uU(52,"Pelicula"),h.qZA(),h._UZ(53,"button",25),h.qZA(),h.TgZ(54,"div",26)(55,"input",27),h.NdJ("ngModelChange",function(a){return r.pelicula.nombre=a}),h.qZA(),h.TgZ(56,"input",28),h.NdJ("ngModelChange",function(a){return r.pelicula.director=a}),h.qZA(),h.TgZ(57,"input",29),h.NdJ("ngModelChange",function(a){return r.pelicula.anio=a}),h.qZA(),h.TgZ(58,"input",30),h.NdJ("ngModelChange",function(a){return r.pelicula.url=a}),h.qZA()(),h.TgZ(59,"div",31)(60,"button",32),h._uU(61,"Cancelar"),h.qZA(),h.TgZ(62,"button",33),h.NdJ("click",function(){return r.realizarOperacion()}),h._uU(63,"Guardar"),h.qZA()()()()(),h.TgZ(64,"div",34)(65,"div",35)(66,"div",22)(67,"div",23)(68,"h5",24),h._uU(69,"Comentario"),h.qZA(),h._UZ(70,"button",25),h.qZA(),h.TgZ(71,"div",26)(72,"h4"),h._uU(73),h.qZA(),h.TgZ(74,"textarea",36),h.NdJ("ngModelChange",function(a){return r.comentario.comentario=a}),h.qZA()(),h.TgZ(75,"div",31)(76,"button",32),h._uU(77,"Close"),h.qZA(),h.TgZ(78,"button",33),h.NdJ("click",function(){return r.actualizarComentario()}),h._uU(79,"Guardar"),h.qZA()()()()()),2&t&&(h.xp6(6),h.hij("Usuario: ",r.authService.userState.displayName,""),h.xp6(2),h.hij("UID: ",r.authService.userState.uid,""),h.xp6(32),h.Q6J("ngForOf",r.peliculas),h.xp6(6),h.Q6J("ngForOf",r.comentarios),h.xp6(9),h.Q6J("ngModel",r.pelicula.nombre),h.xp6(1),h.Q6J("ngModel",r.pelicula.director),h.xp6(1),h.Q6J("ngModel",r.pelicula.anio),h.xp6(1),h.Q6J("ngModel",r.pelicula.url),h.xp6(15),h.hij("Pelicula: ",r.comentario.nombrePelicula,""),h.xp6(1),h.Q6J("ngModel",r.comentario.comentario))},dependencies:[bn,vt,Qf,_c]}),n})();function DB(n,e){if(1&n&&(h.TgZ(0,"div")(1,"div",11),h._UZ(2,"img",12),h._uU(3),h.qZA()()),2&n){const t=e.$implicit;h.xp6(3),h.hij(" ",t.comentario," ")}}function TB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",13)(1,"input",14),h.NdJ("ngModelChange",function(i){h.CHM(t);const a=h.oxw();return h.KtG(a.comentario.comentario=i)}),h.qZA(),h.TgZ(2,"button",15),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.agregarComentario())}),h._uU(3,"Comentar"),h.qZA()()}if(2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngModel",t.comentario.comentario)}}const SB=[{path:"",component:_B},{path:"login",component:yB},{path:"restaurar",component:vB},{path:"registro",component:wB},{path:"verificar-email",component:EB},{path:"cuenta",component:bB,canActivate:[gB]},{path:"pelicula/:id",component:(()=>{class n{constructor(t,r,i,a){this.rutaActiva=t,this.peliculaService=r,this.authService=i,this.comentarioService=a,this.pelicula=new XM,this.userId=!!this.authService.userState&&this.authService.userState.uid,this.comentario=new JM(this.userId,"",""),this.comentarios=[],this.peliculaService.getPeliculaById(this.rutaActiva.snapshot.params.id).subscribe(l=>{this.pelicula=l.payload.data(),this.pelicula.id=l.payload.id,this.comentario.nombrePelicula=this.pelicula.nombre,this.comentario.pelicula=this.pelicula.id,console.log(this.pelicula),console.log(this.pelicula.id),console.log(this.comentario)}),this.comentarioService.getComentarioByPelicula(this.rutaActiva.snapshot.params.id).subscribe(l=>{this.comentarios=l.map(f=>({...f.payload.doc.data(),id:f.payload.doc.id}))})}ngOnInit(){}agregarComentario(){this.comentarioService.newComentario(this.comentario),this.comentario=new JM(this.authService.userState.uid,this.pelicula.nombre,this.pelicula.id)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Mc),h.Y36(QM),h.Y36(gf),h.Y36(Ak))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-pelicula"]],decls:23,vars:6,consts:[[1,"container"],[1,"row"],[1,"col-4"],[1,"img-fluid",3,"src"],[1,"col-8"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-footer"],[4,"ngFor","ngForOf"],["class","input-group mb-3",4,"ngIf"],["role","alert",1,"alert","alert-secondary"],["src","/proyecto-final/assets/user.png"],[1,"input-group","mb-3"],["type","text","placeholder","Escribe aqui tu comentario","aria-label","Recipient's username","aria-describedby","button-addon2",1,"form-control",3,"ngModel","ngModelChange"],["type","button","id","button-addon2",1,"btn","btn-outline-success",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2),h._UZ(3,"img",3),h.qZA(),h.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h3"),h._uU(9),h.qZA()(),h.TgZ(10,"p")(11,"strong"),h._uU(12,"Director: "),h.qZA(),h._uU(13),h.qZA(),h.TgZ(14,"p")(15,"strong"),h._uU(16,"Anio: "),h.qZA(),h._uU(17),h.qZA()(),h.TgZ(18,"div",8)(19,"h5"),h._uU(20,"Comentarios:"),h.qZA(),h.YNc(21,DB,4,1,"div",9),h.YNc(22,TB,4,1,"div",10),h.qZA()()()()()),2&t&&(h.xp6(3),h.s9C("src",r.pelicula.url,h.LSH),h.xp6(6),h.Oqu(r.pelicula.nombre),h.xp6(4),h.hij("",r.pelicula.director," "),h.xp6(4),h.hij("",r.pelicula.anio," "),h.xp6(4),h.Q6J("ngForOf",r.comentarios),h.xp6(1),h.Q6J("ngIf",r.userId))},dependencies:[bn,so,vt,Qf,_c]}),n})()}];let AB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Gc.forRoot(SB),Gc]}),n})(),xB=(()=>{class n{constructor(t){this.authSevice=t,this.title="proyecto-final"}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(gf))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:15,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/",1,"nav-link"],[1,"d-flex"],["routerLink","/cuenta",1,"btn","btn-success"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),h._uU(3,"Peliculas"),h.qZA(),h.TgZ(4,"button",3),h._UZ(5,"span",4),h.qZA(),h.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),h._uU(10,"Inicio"),h.qZA()()(),h.TgZ(11,"form",9)(12,"a",10),h._uU(13,"Cuenta"),h.qZA()()()()(),h._UZ(14,"router-outlet"))},dependencies:[Vv,$c,bm,Xf,Ha]}),n})();var MB=F(5032);const xk="@firebase/database";let eR="";function Rk(n){eR=n}class PB{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class OB{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Nk=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new PB(e)}}catch{}return new OB},Og=Nk("localStorage"),tR=Nk("sessionStorage"),Oy=new Is.Yd("@firebase/database"),Pk=function(){let n=1;return function(){return n++}}(),Ok=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},K0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=K0.apply(null,r):e+="object"==typeof r?(0,O.Wl)(r):r,e+=" "}return e};let kg=null,kk=!0;const Fk=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Oy.logLevel=Is.in.VERBOSE,kg=Oy.log.bind(Oy),e&&tR.set("logging_enabled",!0)):"function"==typeof n?kg=n:(kg=null,tR.remove("logging_enabled"))},Ti=function(...n){if(!0===kk&&(kk=!1,null===kg&&!0===tR.get("logging_enabled")&&Fk(!0)),kg){const e=K0.apply(null,n);kg(e)}},Y0=function(n){return function(...e){Ti(n,...e)}},nR=function(...n){const e="FIREBASE INTERNAL ERROR: "+K0(...n);Oy.error(e)},Dl=function(...n){const e=`FIREBASE FATAL ERROR: ${K0(...n)}`;throw Oy.error(e),new Error(e)},es=function(...n){const e="FIREBASE WARNING: "+K0(...n);Oy.warn(e)},yD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},mf="[MIN_NAME]",yd="[MAX_NAME]",Fg=function(n,e){if(n===e)return 0;if(n===mf||e===yd)return-1;if(e===mf||n===yd)return 1;{const t=Uk(n),r=Uk(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},LB=function(n,e){return n===e?0:n<e?-1:1},Q0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Wl)(e))},rR=function(n){if("object"!=typeof n||null===n)return(0,O.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Wl)(e[r]),t+=":",t+=rR(n[e[r]]);return t+="}",t},Lk=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Si(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Vk=function(n){(0,O.hu)(!yD(n),"Invalid JSON number");const r=1023;let i,a,l,f,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const D=w.join("");let x="";for(_=0;_<64;_+=8){let P=parseInt(D.substr(_,8),2).toString(16);1===P.length&&(P="0"+P),x+=P}return x.toLowerCase()},jB=new RegExp("^-?(0*)\\d{1,10}$"),Uk=function(n){if(jB.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ky=function(n){try{n()}catch(e){setTimeout(()=>{throw es("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},GB=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},X0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class WB{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){es(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zB{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ti("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',es(e)}}let J0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Gk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,qk="websocket",Zk="long_polling";class sR{constructor(e,t,r,i,a=!1,l="",f=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Og.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Og.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Kk(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===qk)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Zk)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function qB(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Si(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class ZB{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const oR={},aR={};function uR(n){const e=n.toString();return oR[e]||(oR[e]=new ZB),oR[e]}class YB{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ky(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class _f{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Y0(e),this.stats_=uR(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),Kk(t,Zk,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new YB(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new lR((...a)=>{const[l,f,_,w,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Gk.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_f.forceAllow_=!0}static forceDisallow(){_f.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!_f.forceAllow_&&(_f.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=Lk(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class lR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Pk(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=lR.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){Ti("frame writing exception"),f.stack&&Ti(f.stack),Ti(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ti("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ti("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let wD=null;typeof MozWebSocket<"u"?wD=MozWebSocket:typeof WebSocket<"u"&&(wD=WebSocket);let Fy=(()=>{class n{constructor(t,r,i,a,l,f,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Y0(this.connId),this.stats_=uR(r),this.connURL=n.connectionURL_(r,f,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,O.Yr)()&&typeof location<"u"&&location.hostname&&Gk.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),Kk(t,qk,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Og.set("previous_websocket_failure",!0);try{let i;if((0,O.Yr)()){i={headers:{"User-Agent":`Firebase/5/${eR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new wD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==wD&&!n.forceDisallow_}static previouslyFailed(){return Og.isInMemoryStorage||!0===Og.get("previous_websocket_failure")}markConnectionHealthy(){Og.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Lk(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),n1=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[_f,Fy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Fy&&Fy.isAvailable();let i=r&&!Fy.previouslyFailed();if(t.webSocketOnly&&(r||es("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Fy];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class l1{constructor(e,t,r,i,a,l,f,_,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Y0("c:"+this.id+":"),this.transportManager_=new n1(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=X0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Q0("t",e),r=Q0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Q0("t",e),r=Q0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Q0("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?nR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&es("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),X0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):X0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Og.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class c1{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class d1{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ED extends d1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ED}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const h1=32,f1=768;class In{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function yn(){return new In("")}function en(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function yf(n){return n.pieces_.length-n.pieceNum_}function Bn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new In(n.pieces_,e)}function dR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function eE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function p1(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new In(e,0)}function ur(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof In)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new In(t,0)}function tn(n){return n.pieceNum_>=n.pieces_.length}function Ms(n,e){const t=en(n),r=en(e);if(null===t)return e;if(t===r)return Ms(Bn(n),Bn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function yj(n,e){const t=eE(n,0),r=eE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Fg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function hR(n,e){if(yf(n)!==yf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ha(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(yf(n)>yf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class vj{constructor(e,t){this.errorPrefix_=t,this.parts_=eE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);g1(this)}}function g1(n){if(n.byteLength_>f1)throw new Error(n.errorPrefix_+"has a key path longer than "+f1+" bytes ("+n.byteLength_+").");if(n.parts_.length>h1)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+h1+") or object contains a cycle "+Lg(n))}function Lg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class fR extends d1{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new fR}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const tE=1e3;let CD,Vg=(()=>{class n extends c1{constructor(t,r,i,a,l,f,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=Y0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ED.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,O.Wl)(l)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new O.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const _=f.d;"ok"===f.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,D=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();es(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):nR("Unrecognized action received from server: "+(0,O.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=tE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=tE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ge.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let _=!1,w=null;const D=function(){w?w.close():(_=!0,a())};t.realtime_={close:D,sendRequest:function(B){(0,O.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(B)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,Z]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);_?Ti("getToken() completed but was canceled"):(Ti("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=Z&&Z.token,w=new l1(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ce=>{es(ce+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(B){t.log_("Failed to get token: "+B),_||(t.repoInfo_.nodeAdmin&&es(B),D())}}})()}interrupt(t){Ti("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ti("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=tE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>rR(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new In(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ti("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ti("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+eR.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ED.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class sn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new sn(e,t)}}class ID{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new sn(mf,e),i=new sn(mf,t);return 0!==this.compare(r,i)}minPost(){return sn.MIN}}class y1 extends ID{static get __EMPTY_NODE(){return CD}static set __EMPTY_NODE(e){CD=e}compare(e,t){return Fg(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return sn.MIN}maxPost(){return new sn(yd,CD)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new sn(e,CD)}toString(){return".key"}}const Tl=new y1;class bD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let gR,lu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??eo.EMPTY_NODE,this.right=l??eo.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return eo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return eo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class eo{constructor(e,t=eo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new eo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,lu.BLACK,null,null))}remove(e){return new eo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,lu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new bD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new bD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new bD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new bD(this.root_,null,this.comparator_,!0,e)}}function Sj(n,e){return Fg(n.name,e.name)}function pR(n,e){return Fg(n,e)}eo.EMPTY_NODE=new class Tj{copy(e,t,r,i,a){return this}insert(e,t,r){return new lu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const v1=function(n){return"number"==typeof n?"number:"+Vk(n):"string:"+n},w1=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===gR||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===gR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let E1,I1,C1,Ly=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),w1(this.priorityNode_)}static set __childrenNodeConstructor(t){E1=t}static get __childrenNodeConstructor(){return E1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return tn(t)?this:".priority"===en(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=en(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===yf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Bn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+v1(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Vk(this.value_):this.value_,this.lazyHash_=Ok(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(a>=0,"Unknown leaf type: "+r),(0,O.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Kn=new class Rj extends ID{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Fg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return sn.MIN}maxPost(){return new sn(yd,new Ly("[PRIORITY-POST]",C1))}makePost(e,t){const r=I1(e);return new sn(t,new Ly("[PRIORITY-POST]",r))}toString(){return".priority"}},Nj=Math.log(2);class Pj{constructor(e){this.count=parseInt(Math.log(e+1)/Nj,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const DD=function(n,e,t,r){n.sort(e);const i=function(_,w){const D=w-_;let x,P;if(0===D)return null;if(1===D)return x=n[_],P=t?t(x):x,new lu(P,x.node,lu.BLACK,null,null);{const B=parseInt(D/2,10)+_,Z=i(_,B),ce=i(B+1,w);return x=n[B],P=t?t(x):x,new lu(P,x.node,lu.BLACK,Z,ce)}},f=function(_){let w=null,D=null,x=n.length;const P=function(Z,ce){const Me=x-Z,Tt=x;x-=Z;const Bt=i(Me+1,Tt),It=n[Me],Gt=t?t(It):It;B(new lu(Gt,It.node,ce,null,Bt))},B=function(Z){w?(w.left=Z,w=Z):(D=Z,w=Z)};for(let Z=0;Z<_.count;++Z){const ce=_.nextBitIsOne(),Me=Math.pow(2,_.count-(Z+1));ce?P(Me,lu.BLACK):(P(Me,lu.BLACK),P(Me,lu.RED))}return D}(new Pj(n.length));return new eo(r||e,f)};let mR;const Vy={};class vd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(Vy&&Kn,"ChildrenNode.ts has not been loaded"),mR=mR||new vd({".priority":Vy},{".priority":Kn}),mR}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof eo?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==Tl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(sn.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?DD(r,e.getCompare()):Vy;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const D=Object.assign({},this.indexes_);return D[_]=f,new vd(D,w)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,a)=>{const l=(0,O.DV)(this.indexSet_,a);if((0,O.hu)(l,"Missing index implementation for "+a),i===Vy){if(l.isDefinedOn(e.node)){const f=[],_=t.getIterator(sn.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&f.push(w),w=_.getNext();return f.push(e),DD(f,l.getCompare())}return Vy}{const f=t.get(e.name);let _=i;return f&&(_=_.remove(new sn(e.name,f))),_.insert(e,e.node)}});return new vd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===Vy)return i;{const a=t.get(e.name);return a?i.remove(new sn(e.name,a)):i}});return new vd(r,this.indexSet_)}}let nE,qt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&w1(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return nE||(nE=new n(new eo(pR),null,vd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?nE:r}}getChild(t){const r=en(t);return null===r?this:this.getImmediateChild(r).getChild(Bn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new sn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?nE:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=en(t);if(null===i)return r;{(0,O.hu)(".priority"!==en(t)||1===yf(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Bn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Kn,(f,_)=>{r[f]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const _ in r)f[_]=r[_];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+v1(this.getPriority().val())+":"),this.forEachChild(Kn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":Ok(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new sn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new sn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new sn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,sn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,sn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===rE?-1:0}withIndex(t){if(t===Tl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Tl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Kn),a=r.getIterator(Kn);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===Tl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const rE=new class Oj extends qt{constructor(){super(new eo(pR),qt.EMPTY_NODE,vd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(sn,{MIN:{value:new sn(mf,qt.EMPTY_NODE)},MAX:{value:new sn(yd,rE)}}),y1.__EMPTY_NODE=qt.EMPTY_NODE,Ly.__childrenNodeConstructor=qt,function Aj(n){gR=n}(rE),function Mj(n){C1=n}(rE);const kj=!0;function Er(n,e=null){if(null===n)return qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ly(n,Er(e));if(n instanceof Array||!kj){let t=qt.EMPTY_NODE;return Si(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const a=Er(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Er(e))}{const t=[];let r=!1;if(Si(n,(l,f)=>{if("."!==l.substring(0,1)){const _=Er(f);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new sn(l,_)))}}),0===t.length)return qt.EMPTY_NODE;const a=DD(t,Sj,l=>l.name,pR);if(r){const l=DD(t,Kn.getCompare());return new qt(a,Er(e),new vd({".priority":l},{".priority":Kn}))}return new qt(a,Er(e),vd.Default)}}!function xj(n){I1=n}(Er);class _R extends ID{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!tn(e)&&".priority"!==en(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Fg(e.name,t.name):a}makePost(e,t){const r=Er(e),i=qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new sn(t,i)}maxPost(){const e=qt.EMPTY_NODE.updateChild(this.indexPath_,rE);return new sn(yd,e)}toString(){return eE(this.indexPath_,0).join("/")}}const yR=new class Fj extends ID{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Fg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return sn.MIN}maxPost(){return sn.MAX}makePost(e,t){const r=Er(e);return new sn(t,r)}toString(){return".value"}};function b1(n){return{type:"value",snapshotNode:n}}function Uy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function iE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function sE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class vR{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(iE(t,f)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?l.trackChildChange(Uy(t,r)):l.trackChildChange(sE(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Kn,(i,a)=>{t.hasChild(i)||r.trackChildChange(iE(i,a))}),t.isLeafNode()||t.forEachChild(Kn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(sE(i,a,l))}else r.trackChildChange(Uy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?qt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class oE{constructor(e){this.indexedFilter_=new vR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=oE.getStartPost_(e),this.endPost_=oE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,l){return this.matches(new sn(t,r))||(r=qt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=qt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(qt.EMPTY_NODE);const a=this;return t.forEachChild(Kn,(l,f)=>{a.matches(new sn(l,f))||(i=i.updateImmediateChild(l,qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Vj{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new oE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new sn(t,r))||(r=qt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=qt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),l++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(qt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;a.hasNext();){const f=a.getNext();l<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?l++:i=i.updateImmediateChild(f.name,qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const x=this.index_.getCompare();l=(P,B)=>x(B,P)}else l=this.index_.getCompare();const f=e;(0,O.hu)(f.numChildren()===this.limit_,"");const _=new sn(t,r),w=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),D=this.rangedFilter_.matches(_);if(f.hasChild(t)){const x=f.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=P&&(P.name===t||f.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const B=null==P?1:l(P,_);if(D&&!r.isEmpty()&&B>=0)return a?.trackChildChange(sE(t,r,x)),f.updateImmediateChild(t,r);{a?.trackChildChange(iE(t,x));const ce=f.updateImmediateChild(t,qt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange(Uy(P.name,P.node)),ce.updateImmediateChild(P.name,P.node)):ce}}return r.isEmpty()?e:D&&l(w,_)>=0?(null!=a&&(a.trackChildChange(iE(w.name,w.node)),a.trackChildChange(Uy(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(w.name,qt.EMPTY_NODE)):e}}class TD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:mf}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kn}copy(){const e=new TD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function wR(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function ER(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function SD(n,e){const t=n.copy();return t.index_=e,t}function D1(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Kn?t="$priority":n.index_===yR?t="$value":n.index_===Tl?t="$key":((0,O.hu)(n.index_ instanceof _R,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,O.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,O.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function T1(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Kn&&(e.i=n.index_.toString()),e}class AD extends c1{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Y0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=AD.getListenId_(e,r),f={};this.listens_[l]=f;const _=D1(e._queryParams);this.restRequest_(a+".json",_,(w,D)=>{let x=D;if(404===w&&(x=null,w=null),null===w&&this.onDataUpdate_(a,x,!1,r),(0,O.DV)(this.listens_,l)===f){let P;P=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(P,null)}})}unlisten(e,t){const r=AD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=D1(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let _=null;if(f.status>=200&&f.status<300){try{_=(0,O.cI)(f.responseText)}catch{es("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,_)}else 401!==f.status&&404!==f.status&&es("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class Gj{constructor(){this.rootNode_=qt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function xD(){return{value:null,children:new Map}}function By(n,e,t){if(tn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=en(e);n.children.has(r)||n.children.set(r,xD()),By(n.children.get(r),e=Bn(e),t)}}function IR(n,e){if(tn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Kn,(r,i)=>{By(n,new In(r),i)}),IR(n,e)}}if(n.children.size>0){const t=en(e);return e=Bn(e),n.children.has(t)&&IR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function CR(n,e,t){null!==n.value?t(e,n.value):function Wj(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{CR(i,new In(e.toString()+"/"+r),t)})}class zj{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Si(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Kj{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new zj(e);const r=1e4+2e4*Math.random();X0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Si(e,(i,a)=>{a>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),X0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var fa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(fa||(fa={})),fa))();function TR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class MD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=fa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(tn(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new In(e));return new MD(yn(),t,this.revert)}}return(0,O.hu)(en(this.path)===e,"operationForChild called for unrelated child."),new MD(Bn(this.path),this.affectedTree,this.revert)}}class aE{constructor(e,t){this.source=e,this.path=t,this.type=fa.LISTEN_COMPLETE}operationForChild(e){return tn(this.path)?new aE(this.source,yn()):new aE(this.source,Bn(this.path))}}class Ug{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=fa.OVERWRITE}operationForChild(e){return tn(this.path)?new Ug(this.source,yn(),this.snap.getImmediateChild(e)):new Ug(this.source,Bn(this.path),this.snap)}}class jy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=fa.MERGE}operationForChild(e){if(tn(this.path)){const t=this.children.subtree(new In(e));return t.isEmpty()?null:t.value?new Ug(this.source,yn(),t.value):new jy(this.source,yn(),t)}return(0,O.hu)(en(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new jy(this.source,Bn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tn(e))return this.isFullyInitialized()&&!this.filtered_;const t=en(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Yj{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function uE(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,_)=>function Jj(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new sn(e.childName,e.snapshotNode),i=new sn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,_)),l.forEach(f=>{const _=function Xj(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(w=>{w.respondsTo(f.type)&&e.push(w.createEvent(_,n.query_))})})}function RD(n,e){return{eventCache:n,serverCache:e}}function lE(n,e,t,r){return RD(new vf(e,t,r),n.serverCache)}function A1(n,e,t,r){return RD(n.eventCache,new vf(e,t,r))}function ND(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Bg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let SR;class Yn{constructor(e,t=(()=>(SR||(SR=new eo(LB)),SR))()){this.value=e,this.children=t}static fromObject(e){let t=new Yn(null);return Si(e,(r,i)=>{t=t.set(new In(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:yn(),value:this.value};if(tn(e))return null;{const r=en(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Bn(e),t);return null!=a?{path:ur(new In(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tn(e))return this;{const t=en(e),r=this.children.get(t);return null!==r?r.subtree(Bn(e)):new Yn(null)}}set(e,t){if(tn(e))return new Yn(t,this.children);{const r=en(e),a=(this.children.get(r)||new Yn(null)).set(Bn(e),t),l=this.children.insert(r,a);return new Yn(this.value,l)}}remove(e){if(tn(e))return this.children.isEmpty()?new Yn(null):new Yn(null,this.children);{const t=en(e),r=this.children.get(t);if(r){const i=r.remove(Bn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Yn(null):new Yn(this.value,a)}return this}}get(e){if(tn(e))return this.value;{const t=en(e),r=this.children.get(t);return r?r.get(Bn(e)):null}}setTree(e,t){if(tn(e))return t;{const r=en(e),a=(this.children.get(r)||new Yn(null)).setTree(Bn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Yn(this.value,l)}}fold(e){return this.fold_(yn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(ur(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,yn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(tn(e))return null;{const a=en(e),l=this.children.get(a);return l?l.findOnPath_(Bn(e),ur(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,yn(),t)}foreachOnPath_(e,t,r){if(tn(e))return this;{this.value&&r(t,this.value);const i=en(e),a=this.children.get(i);return a?a.foreachOnPath_(Bn(e),ur(t,i),r):new Yn(null)}}foreach(e){this.foreach_(yn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(ur(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class cu{constructor(e){this.writeTree_=e}static empty(){return new cu(new Yn(null))}}function cE(n,e,t){if(tn(e))return new cu(new Yn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ms(i,e);return a=a.updateChild(l,t),new cu(n.writeTree_.set(i,a))}{const i=new Yn(t),a=n.writeTree_.setTree(e,i);return new cu(a)}}}function AR(n,e,t){let r=n;return Si(t,(i,a)=>{r=cE(r,ur(e,i),a)}),r}function x1(n,e){if(tn(e))return cu.empty();{const t=n.writeTree_.setTree(e,new Yn(null));return new cu(t)}}function xR(n,e){return null!=jg(n,e)}function jg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ms(t.path,e)):null}function M1(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Kn,(r,i)=>{e.push(new sn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new sn(r,i.value))}),e}function wf(n,e){if(tn(e))return n;{const t=jg(n,e);return new cu(null!=t?new Yn(t):n.writeTree_.subtree(e))}}function MR(n){return n.writeTree_.isEmpty()}function $y(n,e){return R1(yn(),n.writeTree_,e)}function R1(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,O.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=R1(ur(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(ur(n,".priority"),r)),t}}function PD(n,e){return F1(e,n)}function s$(n,e){if(n.snap)return ha(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ha(ur(n.path,t),e))return!0;return!1}function a$(n){return n.visible}function N1(n,e,t){let r=cu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)ha(t,l)?(f=Ms(t,l),r=cE(r,f,a.snap)):ha(l,t)&&(f=Ms(l,t),r=cE(r,yn(),a.snap.getChild(f)));else{if(!a.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(ha(t,l))f=Ms(t,l),r=AR(r,f,a.children);else if(ha(l,t))if(f=Ms(l,t),tn(f))r=AR(r,yn(),a.children);else{const _=(0,O.DV)(a.children,en(f));if(_){const w=_.getChild(Bn(f));r=cE(r,yn(),w)}}}}}return r}function P1(n,e,t,r,i){if(r||i){const a=wf(n.visibleWrites,e);return!i&&MR(a)?t:i||null!=t||xR(a,yn())?$y(N1(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(ha(w.path,e)||ha(e,w.path))},e),t||qt.EMPTY_NODE):null}{const a=jg(n.visibleWrites,e);if(null!=a)return a;{const l=wf(n.visibleWrites,e);return MR(l)?t:null!=t||xR(l,yn())?$y(l,t||qt.EMPTY_NODE):null}}}function OD(n,e,t,r){return P1(n.writeTree,n.treePath,e,t,r)}function RR(n,e){return function u$(n,e,t){let r=qt.EMPTY_NODE;const i=jg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Kn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=wf(n.visibleWrites,e);return t.forEachChild(Kn,(l,f)=>{const _=$y(wf(a,new In(l)),f);r=r.updateImmediateChild(l,_)}),M1(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return M1(wf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function O1(n,e,t,r){return function l$(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=ur(e,t);if(xR(n.visibleWrites,a))return null;{const l=wf(n.visibleWrites,a);return MR(l)?i.getChild(t):$y(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function kD(n,e){return function d$(n,e){return jg(n.visibleWrites,e)}(n.writeTree,ur(n.treePath,e))}function NR(n,e,t){return function c$(n,e,t,r){const i=ur(e,t),a=jg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?$y(wf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function k1(n,e){return F1(ur(n.treePath,e),n.writeTree)}function F1(n,e){return{treePath:n,writeTree:e}}class g${constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,sE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,iE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Uy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,sE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const L1=new class m${getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class PR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new vf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return NR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Bg(this.viewCache_),a=function p$(n,e,t,r,i,a){return function h$(n,e,t,r,i,a,l){let f;const _=wf(n.visibleWrites,e),w=jg(_,yn());if(null!=w)f=w;else{if(null==t)return[];f=$y(_,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const D=[],x=l.getCompare(),P=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let B=P.getNext();for(;B&&D.length<i;)0!==x(B,r)&&D.push(B),B=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function V1(n,e,t,r,i,a){const l=e.eventCache;if(null!=kD(r,t))return e;{let f,_;if(tn(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Bg(e),x=RR(r,w instanceof qt?w:qt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),x,a)}else{const w=OD(r,Bg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=en(t);if(".priority"===w){(0,O.hu)(1===yf(t),"Can't have a priority with additional path components");const D=l.getNode();_=e.serverCache.getNode();const x=O1(r,t,D,_);f=null!=x?n.filter.updatePriority(D,x):l.getNode()}else{const D=Bn(t);let x;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const P=O1(r,t,l.getNode(),_);x=null!=P?l.getNode().getImmediateChild(w).updateChild(D,P):l.getNode().getImmediateChild(w)}else x=NR(r,w,e.serverCache);f=null!=x?n.filter.updateChild(l.getNode(),w,x,D,i,a):l.getNode()}}return lE(e,f,l.isFullyInitialized()||tn(t),n.filter.filtersNodes())}}function FD(n,e,t,r,i,a,l,f){const _=e.serverCache;let w;const D=l?n.filter:n.filter.getIndexedFilter();if(tn(t))w=D.updateFullNode(_.getNode(),r,null);else if(D.filtersNodes()&&!_.isFiltered()){const B=_.getNode().updateChild(t,r);w=D.updateFullNode(_.getNode(),B,null)}else{const B=en(t);if(!_.isCompleteForPath(t)&&yf(t)>1)return e;const Z=Bn(t),Me=_.getNode().getImmediateChild(B).updateChild(Z,r);w=".priority"===B?D.updatePriority(_.getNode(),Me):D.updateChild(_.getNode(),B,Me,Z,L1,null)}const x=A1(e,w,_.isFullyInitialized()||tn(t),D.filtersNodes());return V1(n,x,t,i,new PR(i,x,a),f)}function OR(n,e,t,r,i,a,l){const f=e.eventCache;let _,w;const D=new PR(i,e,a);if(tn(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=lE(e,w,!0,n.filter.filtersNodes());else{const x=en(t);if(".priority"===x)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=lE(e,w,f.isFullyInitialized(),f.isFiltered());else{const P=Bn(t),B=f.getNode().getImmediateChild(x);let Z;if(tn(P))Z=r;else{const ce=D.getCompleteChild(x);Z=null!=ce?".priority"===dR(P)&&ce.getChild(p1(P)).isEmpty()?ce:ce.updateChild(P,r):qt.EMPTY_NODE}_=B.equals(Z)?e:lE(e,n.filter.updateChild(f.getNode(),x,Z,P,D,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return _}function U1(n,e){return n.eventCache.isCompleteForChild(e)}function B1(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function kR(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=tn(t)?r:new Yn(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((x,P)=>{if(D.hasChild(x)){const Z=B1(0,e.serverCache.getNode().getImmediateChild(x),P);_=FD(n,_,new In(x),Z,i,a,l,f)}}),w.children.inorderTraversal((x,P)=>{const B=!e.serverCache.isCompleteForChild(x)&&null===P.value;if(!D.hasChild(x)&&!B){const ce=B1(0,e.serverCache.getNode().getImmediateChild(x),P);_=FD(n,_,new In(x),ce,i,a,l,f)}}),_}class D${constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new vR(r.getIndex()),a=function Uj(n){return n.loadsAllData()?new vR(n.getIndex()):n.hasLimit()?new Vj(n):new oE(n)}(r);this.processor_=function _$(n){return{filter:n}}(a);const l=t.serverCache,f=t.eventCache,_=i.updateFullNode(qt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(qt.EMPTY_NODE,f.getNode(),null),D=new vf(_,l.isFullyInitialized(),i.filtersNodes()),x=new vf(w,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=RD(x,D),this.eventGenerator_=new Yj(this.query_)}get query(){return this.query_}}function A$(n,e){const t=Bg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!tn(e)&&!t.getImmediateChild(en(e)).isEmpty())?t.getChild(e):null}function j1(n){return 0===n.eventRegistrations_.length}function $1(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function H1(n,e,t,r){e.type===fa.MERGE&&null!==e.source.queryId&&((0,O.hu)(Bg(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(ND(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function v$(n,e,t,r,i){const a=new g$;let l,f;if(t.type===fa.OVERWRITE){const w=t;w.source.fromUser?l=OR(n,e,w.path,w.snap,r,i,a):((0,O.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered()&&!tn(w.path),l=FD(n,e,w.path,w.snap,r,i,f,a))}else if(t.type===fa.MERGE){const w=t;w.source.fromUser?l=function E$(n,e,t,r,i,a,l){let f=e;return r.foreach((_,w)=>{const D=ur(t,_);U1(e,en(D))&&(f=OR(n,f,D,w,i,a,l))}),r.foreach((_,w)=>{const D=ur(t,_);U1(e,en(D))||(f=OR(n,f,D,w,i,a,l))}),f}(n,e,w.path,w.children,r,i,a):((0,O.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered(),l=kR(n,e,w.path,w.children,r,i,f,a))}else if(t.type===fa.ACK_USER_WRITE){const w=t;l=w.revert?function b$(n,e,t,r,i,a){let l;if(null!=kD(r,t))return e;{const f=new PR(r,e,i),_=e.eventCache.getNode();let w;if(tn(t)||".priority"===en(t)){let D;if(e.serverCache.isFullyInitialized())D=OD(r,Bg(e));else{const x=e.serverCache.getNode();(0,O.hu)(x instanceof qt,"serverChildren would be complete if leaf node"),D=RR(r,x)}w=n.filter.updateFullNode(_,D,a)}else{const D=en(t);let x=NR(r,D,e.serverCache);null==x&&e.serverCache.isCompleteForChild(D)&&(x=_.getImmediateChild(D)),w=null!=x?n.filter.updateChild(_,D,x,Bn(t),f,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(_,D,qt.EMPTY_NODE,Bn(t),f,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=OD(r,Bg(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=kD(r,yn()),lE(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function I$(n,e,t,r,i,a,l){if(null!=kD(i,t))return e;const f=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(tn(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return FD(n,e,t,_.getNode().getChild(t),i,a,f,l);if(tn(t)){let w=new Yn(null);return _.getNode().forEachChild(Tl,(D,x)=>{w=w.set(new In(D),x)}),kR(n,e,t,w,i,a,f,l)}return e}{let w=new Yn(null);return r.foreach((D,x)=>{const P=ur(t,D);_.isCompleteForPath(P)&&(w=w.set(D,_.getNode().getChild(P)))}),kR(n,e,t,w,i,a,f,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==fa.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);l=function C$(n,e,t,r,i){const a=e.serverCache;return V1(n,A1(e,a.getNode(),a.isFullyInitialized()||tn(t),a.isFiltered()),t,r,L1,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function w$(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ND(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(b1(ND(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function y$(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,O.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,G1(n,a.changes,a.viewCache.eventCache.getNode(),null)}function G1(n,e,t,r){return function Qj(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function Lj(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),uE(n,i,"child_removed",e,r,t),uE(n,i,"child_added",e,r,t),uE(n,i,"child_moved",a,r,t),uE(n,i,"child_changed",e,r,t),uE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let LD,UD;class W1{constructor(){this.views=new Map}}function FR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,O.hu)(null!=a,"SyncTree gave us an op for an invalid query."),H1(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(H1(l,e,t,r));return a}}function z1(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let f=OD(t,i?r:null),_=!1;f?_=!0:r instanceof qt?(f=RR(t,r),_=!1):(f=qt.EMPTY_NODE,_=!1);const w=RD(new vf(f,_,!1),new vf(r,i,!1));return new D$(e,w)}return l}function q1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ef(n,e){let t=null;for(const r of n.views.values())t=t||A$(r,e);return t}function Z1(n,e){return e._queryParams.loadsAllData()?VD(n):n.views.get(e._queryIdentifier)}function K1(n,e){return null!=Z1(n,e)}function If(n){return null!=VD(n)}function VD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let V$=1;class Y1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Yn(null),this.pendingWriteTree_=function f$(){return{visibleWrites:cu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function LR(n,e,t,r,i){return function t$(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=cE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Hy(n,new Ug({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Cf(n,e,t=!1){const r=function r$(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function i$(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&s$(f,r.path)?i=!1:ha(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function o$(n){n.visibleWrites=N1(n.allWrites,a$,yn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=x1(n.visibleWrites,r.path):Si(r.children,_=>{n.visibleWrites=x1(n.visibleWrites,ur(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Yn(null);return null!=r.snap?a=a.set(yn(),!0):Si(r.children,l=>{a=a.set(new In(l),!0)}),Hy(n,new MD(r.path,a,t))}return[]}function dE(n,e,t){return Hy(n,new Ug({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function BD(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let f=[];if(l&&("default"===e._queryIdentifier||K1(l,e))){const _=function k$(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const f=If(n);if("default"===i)for(const[_,w]of n.views.entries())l=l.concat($1(w,t,r)),j1(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(l=l.concat($1(_,t,r)),j1(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return f&&!If(n)&&a.push(new(function N$(){return(0,O.hu)(LD,"Reference.ts has not been loaded"),LD}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function P$(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=_.removed;if(f=_.events,!i){const D=-1!==w.findIndex(P=>P._queryParams.loadsAllData()),x=n.syncPointTree_.findOnPath(a,(P,B)=>If(B));if(D&&!x){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const B=function W$(n){return n.fold((e,t,r)=>{if(t&&If(t))return[VD(t)];{let i=[];return t&&(i=q1(t)),Si(r,(a,l)=>{i=i.concat(l)}),i}})}(P);for(let Z=0;Z<B.length;++Z){const ce=B[Z],Me=ce.query,Tt=eF(n,ce);n.listenProvider_.startListening(fE(Me),hE(n,Me),Tt.hashFn,Tt.onComplete)}}}!x&&w.length>0&&!r&&(D?n.listenProvider_.stopListening(fE(e),null):w.forEach(P=>{const B=n.queryToTagMap.get($D(P));n.listenProvider_.stopListening(fE(P),B)}))}!function z$(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=$D(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return f}function Q1(n,e,t,r){const i=UR(n,r);if(null!=i){const a=BR(i),l=a.path,f=a.queryId,_=Ms(l,e);return jR(n,l,new Ug(TR(f),_,t))}return[]}function VR(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(P,B)=>{const Z=Ms(P,i);a=a||Ef(B,Z),l=l||If(B)});let _,f=n.syncPointTree_.get(i);f?(l=l||If(f),a=a||Ef(f,yn())):(f=new W1,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?_=!0:(_=!1,a=qt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((B,Z)=>{const ce=Ef(Z,yn());ce&&(a=a.updateImmediateChild(B,ce))}));const w=K1(f,e);if(!w&&!e._queryParams.loadsAllData()){const P=$D(e);(0,O.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const B=function q$(){return V$++}();n.queryToTagMap.set(P,B),n.tagToQueryMap.set(B,P)}let x=function O$(n,e,t,r,i,a){const l=z1(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function x$(n,e){n.eventRegistrations_.push(e)}(l,t),function M$(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Kn,(a,l)=>{r.push(Uy(a,l))}),t.isFullyInitialized()&&r.push(b1(t.getNode())),G1(n,r,t.getNode(),e)}(l,t)}(f,e,t,PD(n.pendingWriteTree_,i),a,_);if(!w&&!l&&!r){const P=Z1(f,e);x=x.concat(function Z$(n,e,t){const r=e._path,i=hE(n,e),a=eF(n,t),l=n.listenProvider_.startListening(fE(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!If(f.value),"If we're adding a query, it shouldn't be shadowed");else{const _=f.fold((w,D,x)=>{if(!tn(w)&&D&&If(D))return[VD(D).query];{let P=[];return D&&(P=P.concat(q1(D).map(B=>B.query))),Si(x,(B,Z)=>{P=P.concat(Z)}),P}});for(let w=0;w<_.length;++w){const D=_[w];n.listenProvider_.stopListening(fE(D),hE(n,D))}}return l}(n,e,P))}return x}function jD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const w=Ef(f,Ms(l,e));if(w)return w});return P1(i,e,a,t,!0)}function Hy(n,e){return X1(e,n.syncPointTree_,null,PD(n.pendingWriteTree_,yn()))}function X1(n,e,t,r){if(tn(n.path))return J1(n,e,t,r);{const i=e.get(yn());null==t&&null!=i&&(t=Ef(i,yn()));let a=[];const l=en(n.path),f=n.operationForChild(l),_=e.children.get(l);if(_&&f){const w=t?t.getImmediateChild(l):null,D=k1(r,l);a=a.concat(X1(f,_,w,D))}return i&&(a=a.concat(FR(i,n,r,t))),a}}function J1(n,e,t,r){const i=e.get(yn());null==t&&null!=i&&(t=Ef(i,yn()));let a=[];return e.children.inorderTraversal((l,f)=>{const _=t?t.getImmediateChild(l):null,w=k1(r,l),D=n.operationForChild(l);D&&(a=a.concat(J1(D,f,_,w)))}),i&&(a=a.concat(FR(i,n,r,t))),a}function eF(n,e){const t=e.query,r=hE(n,t);return{hashFn:()=>(function T$(n){return n.viewCache_.serverCache.getNode()}(e)||qt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function $$(n,e,t){const r=UR(n,t);if(r){const i=BR(r),a=i.path,l=i.queryId,f=Ms(a,e);return jR(n,a,new aE(TR(l),f))}return[]}(n,t._path,r):function j$(n,e){return Hy(n,new aE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function BB(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return BD(n,t,null,a)}}}}function hE(n,e){const t=$D(e);return n.queryToTagMap.get(t)}function $D(n){return n._path.toString()+"$"+n._queryIdentifier}function UR(n,e){return n.tagToQueryMap.get(e)}function BR(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new In(n.substr(0,e))}}function jR(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),FR(r,t,PD(n.pendingWriteTree_,e),null)}function fE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function L$(){return(0,O.hu)(UD,"Reference.ts has not been loaded"),UD}())(n._repo,n._path):n}class $R{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new $R(t)}node(){return this.node_}}class HR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ur(this.path_,e);return new HR(this.syncTree_,t)}node(){return jD(this.syncTree_,this.path_)}}const K$=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},tF=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Y$(n[".sv"],e,t):"object"==typeof n[".sv"]?Q$(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Y$=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},Q$=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},nF=function(n,e,t,r){return WR(e,new HR(t,n),r)},GR=function(n,e,t){return WR(n,new $R(e),t)};function WR(n,e,t){const r=n.getPriority().val(),i=tF(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=tF(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new Ly(f,Er(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Ly(i))),l.forEachChild(Kn,(f,_)=>{const w=WR(_,e.getImmediateChild(f),t);w!==_&&(a=a.updateImmediateChild(f,w))}),a}}class zR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function HD(n,e){let t=e instanceof In?e:new In(e),r=n,i=en(t);for(;null!==i;){const a=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new zR(i,r,a),t=Bn(t),i=en(t)}return r}function $g(n){return n.node.value}function qR(n,e){n.node.value=e,ZR(n)}function rF(n){return n.node.childCount>0}function GD(n,e){Si(n.node.children,(t,r)=>{e(new zR(t,n,r))})}function iF(n,e,t,r){t&&!r&&e(n),GD(n,i=>{iF(i,e,!0,r)}),t&&r&&e(n)}function pE(n){return new In(null===n.parent?n.name:pE(n.parent)+"/"+n.name)}function ZR(n){null!==n.parent&&function eH(n,e,t){const r=function X$(n){return void 0===$g(n)&&!rF(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,ZR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,ZR(n))}(n.parent,n.name,n)}const tH=/[\[\].#$\/\u0000-\u001F\u007F]/,nH=/[\[\].#$\u0000-\u001F\u007F]/,KR=10485760,WD=function(n){return"string"==typeof n&&0!==n.length&&!tH.test(n)},sF=function(n){return"string"==typeof n&&0!==n.length&&!nH.test(n)},gE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!yD(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},Sl=function(n,e,t,r){r&&void 0===e||mE((0,O.gK)(n,"value"),e,t)},mE=function(n,e,t){const r=t instanceof In?new vj(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Lg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Lg(r)+" with contents = "+e.toString());if(yD(e))throw new Error(n+"contains "+e.toString()+" "+Lg(r));if("string"==typeof e&&e.length>KR/3&&(0,O.ug)(e)>KR)throw new Error(n+"contains a string greater than "+KR+" utf8 bytes "+Lg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Si(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!WD(l)))throw new Error(n+" contains an invalid key ("+l+") "+Lg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function wj(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),g1(n)})(r,l),mE(n,f,r),function Ej(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Lg(r)+" in addition to actual children.")}},oF=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Si(e,(l,f)=>{const _=new In(l);if(mE(i,f,ur(t,_)),".priority"===dR(_)&&!gE(f))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=eE(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!WD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(yj);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ha(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},YR=function(n,e,t){if(!t||void 0!==e){if(yD(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!gE(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},_E=function(n,e,t,r){if(!(r&&void 0===t||WD(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},yE=function(n,e,t,r){if(!(r&&void 0===t||sF(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},sH=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yE(n,e,t,r)},pa=function(n,e){if(".info"===en(e))throw new Error(n+" failed = Can't modify data under /.info/")},aF=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!WD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sF(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class oH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function zD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!hR(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function uF(n,e,t){zD(n,t),lF(n,r=>hR(r,e))}function Mo(n,e,t){zD(n,t),lF(n,r=>ha(r,e)||ha(e,r))}function lF(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(aH(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function aH(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();kg&&Ti("event: "+t.toString()),ky(r)}}}const cF="repo_interrupt",uH=25;class lH{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new oH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xD(),this.transactionQueueTree_=new zR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dF(n){const t=n.infoData_.getNode(new In(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function vE(n){return K$({timestamp:dF(n)})}function hF(n,e,t,r,i){n.dataUpdateCount++;const a=new In(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,O.UI)(t,w=>Er(w));l=function H$(n,e,t,r){const i=UR(n,r);if(i){const a=BR(i),l=a.path,f=a.queryId,_=Ms(l,e),w=Yn.fromObject(t);return jR(n,l,new jy(TR(f),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=Er(t);l=Q1(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,O.UI)(t,w=>Er(w));l=function B$(n,e,t){const r=Yn.fromObject(t);return Hy(n,new jy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=Er(t);l=dE(n.serverSyncTree_,a,_)}let f=a;l.length>0&&(f=Wy(n,a)),Mo(n.eventQueue_,f,l)}function fF(n,e){QR(n,"connected",e),!1===e&&function pH(n){Gy(n,"onDisconnectEvents");const e=vE(n),t=xD();CR(n.onDisconnect_,yn(),(i,a)=>{const l=nF(i,a,n.serverSyncTree_,e);By(t,i,l)});let r=[];CR(t,yn(),(i,a)=>{r=r.concat(dE(n.serverSyncTree_,i,a));const l=tN(n,i);Wy(n,l)}),n.onDisconnect_=xD(),Mo(n.eventQueue_,yn(),r)}(n)}function QR(n,e,t){const r=new In("/.info/"+e),i=Er(t);n.infoData_.updateSnapshot(r,i);const a=dE(n.infoSyncTree_,r,i);Mo(n.eventQueue_,r,a)}function qD(n){return n.nextWriteId_++}function XR(n,e,t,r,i){Gy(n,"set",{path:e.toString(),value:t,priority:r});const a=vE(n),l=Er(t,r),f=jD(n.serverSyncTree_,e),_=GR(l,f,a),w=qD(n),D=LR(n.serverSyncTree_,e,_,w,!0);zD(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(P,B)=>{const Z="ok"===P;Z||es("set at "+e+" failed: "+P);const ce=Cf(n.serverSyncTree_,w,!Z);Mo(n.eventQueue_,e,ce),bf(0,i,P,B)});const x=tN(n,e);Wy(n,x),Mo(n.eventQueue_,x,[])}function gH(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&IR(n.onDisconnect_,e),bf(0,t,r,i)})}function pF(n,e,t,r){const i=Er(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&By(n.onDisconnect_,e,i),bf(0,r,a,l)})}function JR(n,e,t){let r;r=".info"===en(e._path)?BD(n.infoSyncTree_,e,t):BD(n.serverSyncTree_,e,t),uF(n.eventQueue_,e._path,r)}function gF(n){n.persistentConnection_&&n.persistentConnection_.interrupt(cF)}function Gy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ti(t,...e)}function bf(n,e,t,r){e&&ky(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function eN(n,e,t){return jD(n.serverSyncTree_,e,t)||qt.EMPTY_NODE}function ZD(n,e=n.transactionQueueTree_){if(e||KD(n,e),$g(e)){const t=_F(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function EH(n,e,t){const r=t.map(w=>w.currentWriteId),i=eN(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,O.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const x=Ms(e,D.path);a=a.updateChild(x,D.currentOutputSnapshotRaw)}const f=a.val(!0),_=e;n.server_.put(_.toString(),f,w=>{Gy(n,"transaction put response",{path:_.toString(),status:w});let D=[];if("ok"===w){const x=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(Cf(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&x.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();KD(n,HD(n.transactionQueueTree_,e)),ZD(n,n.transactionQueueTree_),Mo(n.eventQueue_,e,D);for(let P=0;P<x.length;P++)ky(x[P])}else{if("datastale"===w)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{es("transaction at "+_.toString()+" failed: "+w);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=w}Wy(n,e)}},l)}(n,pE(e),t)}else rF(e)&&GD(e,t=>{ZD(n,t)})}function Wy(n,e){const t=mF(n,e),r=pE(t);return function IH(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const _=e[f],w=Ms(t,_.path);let x,D=!1;if((0,O.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)D=!0,x=_.abortReason,i=i.concat(Cf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=uH)D=!0,x="maxretry",i=i.concat(Cf(n.serverSyncTree_,_.currentWriteId,!0));else{const P=eN(n,_.path,l);_.currentInputSnapshot=P;const B=e[f].update(P.val());if(void 0!==B){mE("transaction failed: Data returned ",B,_.path);let Z=Er(B);"object"==typeof B&&null!=B&&(0,O.r3)(B,".priority")||(Z=Z.updatePriority(P.getPriority()));const Me=_.currentWriteId,Tt=vE(n),Bt=GR(Z,P,Tt);_.currentOutputSnapshotRaw=Z,_.currentOutputSnapshotResolved=Bt,_.currentWriteId=qD(n),l.splice(l.indexOf(Me),1),i=i.concat(LR(n.serverSyncTree_,_.path,Bt,_.currentWriteId,_.applyLocally)),i=i.concat(Cf(n.serverSyncTree_,Me,!0))}else D=!0,x="nodata",i=i.concat(Cf(n.serverSyncTree_,_.currentWriteId,!0))}Mo(n.eventQueue_,t,i),i=[],D&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===x?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(x),!1,null)))}KD(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)ky(r[f]);ZD(n,n.transactionQueueTree_)}(n,_F(n,t),r),r}function mF(n,e){let t,r=n.transactionQueueTree_;for(t=en(e);null!==t&&void 0===$g(r);)r=HD(r,t),t=en(e=Bn(e));return r}function _F(n,e){const t=[];return yF(n,e,t),t.sort((r,i)=>r.order-i.order),t}function yF(n,e,t){const r=$g(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);GD(e,i=>{yF(n,i,t)})}function KD(n,e){const t=$g(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,qR(e,t.length>0?t:void 0)}GD(e,r=>{KD(n,r)})}function tN(n,e){const t=pE(mF(n,e)),r=HD(n.transactionQueueTree_,e);return function J$(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{nN(n,i)}),nN(n,r),iF(r,i=>{nN(n,i)}),t}function nN(n,e){const t=$g(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,O.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,O.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Cf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?qR(e,void 0):t.length=a+1,Mo(n.eventQueue_,pE(e),i);for(let l=0;l<r.length;l++)ky(r[l])}}const rN=function(n,e){const t=DH(n),r=t.namespace;return"firebase.com"===t.domain&&Dl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Dl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&es("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new sR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new In(t.pathString)}},DH=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(f=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(D,x)),D<x&&(i=function CH(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,x)));const P=function bH(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):es(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));w=e.indexOf(":"),w>=0?(l="https"===f||"wss"===f,_=parseInt(e.substring(w+1),10)):w=e.length;const B=e.slice(0,w);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}},vF="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",TH=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=vF.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=vF.charAt(e[i]);return(0,O.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class wF{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Wl)(this.snapshot.exportVal())}}class EF{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class iN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class IF{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return gH(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){pa("OnDisconnect.remove",this._path);const e=new O.BH;return pF(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){pa("OnDisconnect.set",this._path),Sl("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return pF(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){pa("OnDisconnect.setWithPriority",this._path),Sl("OnDisconnect.setWithPriority",e,this._path,!1),YR("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function mH(n,e,t,r,i){const a=Er(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,f)=>{"ok"===l&&By(n.onDisconnect_,e,a),bf(0,i,l,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){pa("OnDisconnect.update",this._path),oF("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function _H(n,e,t,r){if((0,O.xb)(t))return Ti("onDisconnect().update() called with empty data.  Don't do anything."),void bf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Si(t,(l,f)=>{const _=Er(f);By(n.onDisconnect_,ur(e,l),_)}),bf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class to{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return tn(this._path)?null:dR(this._path)}get ref(){return new ga(this._repo,this._path)}get _queryIdentifier(){const e=T1(this._queryParams),t=rR(e);return"{}"===t?"default":t}get _queryObject(){return T1(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof to))return!1;const t=this._repo===e._repo,r=hR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function _j(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function YD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Df(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Tl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==mf)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==yd)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Kn){if(null!=e&&!gE(e)||null!=t&&!gE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof _R||n.getIndex()===yR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function QD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ga extends to{constructor(e,t){super(e,t,new TD,!1)}get parent(){const e=p1(this._path);return null===e?null:new ga(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Hg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new In(e),r=Gg(this.ref,e);return new Hg(this._node.getChild(t),r,Kn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Hg(i,Gg(this.ref,r),Kn)))}hasChild(e){const t=new In(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function CF(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?Gg(n._root,e):n._root}function bF(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=rN(e,n._repo.repoInfo_.nodeAdmin);aF("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Dl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),CF(n,t.path.toString())}function Gg(n,e){return null===en((n=(0,O.m9)(n))._path)?sH("child","path",e,!1):yE("child","path",e,!1),new ga(n._repo,ur(n._path,e))}function sN(n,e){n=(0,O.m9)(n),pa("set",n._path),Sl("set",e,n._path,!1);const t=new O.BH;return XR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function RH(n,e){oF("update",e,n._path,!1);const t=new O.BH;return function fH(n,e,t,r){Gy(n,"update",{path:e.toString(),value:t});let i=!0;const a=vE(n),l={};if(Si(t,(f,_)=>{i=!1,l[f]=nF(ur(e,f),Er(_),n.serverSyncTree_,a)}),i)Ti("update() called with empty data.  Don't do anything."),bf(0,r,"ok",void 0);else{const f=qD(n),_=function U$(n,e,t,r){!function n$(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=AR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Yn.fromObject(t);return Hy(n,new jy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,f);zD(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,D)=>{const x="ok"===w;x||es("update at "+e+" failed: "+w);const P=Cf(n.serverSyncTree_,f,!x),B=P.length>0?Wy(n,e):e;Mo(n.eventQueue_,B,P),bf(0,r,w,D)}),Si(t,w=>{const D=tN(n,ur(e,w));Wy(n,D)}),Mo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function NH(n){n=(0,O.m9)(n);const e=new iN(()=>{}),t=new wE(e);return function hH(n,e,t){const r=function G$(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const x=Ms(w,t);r=r||Ef(D,x)});let i=n.syncPointTree_.get(t);i?r=r||Ef(i,yn()):(i=new W1,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new vf(r,!0,!1):null;return function S$(n){return ND(n.viewCache_)}(z1(i,e,PD(n.pendingWriteTree_,e._path),a?l.getNode():qt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Er(i).withIndex(e._queryParams.getIndex());let l;if(VR(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=dE(n.serverSyncTree_,e._path,a);else{const f=hE(n.serverSyncTree_,e);l=Q1(n.serverSyncTree_,e._path,a,f)}return Mo(n.eventQueue_,e._path,l),BD(n.serverSyncTree_,e,t,null,!0),a},i=>(Gy(n,"get for query "+(0,O.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Hg(r,new ga(n._repo,n._path),n._queryParams.getIndex()))}class wE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new wF("value",this,new Hg(e.snapshotNode,new ga(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new EF(this,e,t):null}matches(e){return e instanceof wE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class XD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new EF(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=Gg(new ga(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new wF(e.type,this,new Hg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof XD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function EE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(D,x)=>{JR(n._repo,n,f),_(D,x)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new iN(t,a||void 0),f="value"===e?new wE(l):new XD(e,l);return function yH(n,e,t){let r;r=".info"===en(e._path)?VR(n.infoSyncTree_,e,t):VR(n.serverSyncTree_,e,t),uF(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>JR(n._repo,n,f)}function oN(n,e,t,r){return EE(n,"value",e,t,r)}function DF(n,e,t,r){return EE(n,"child_added",e,t,r)}function TF(n,e,t,r){return EE(n,"child_changed",e,t,r)}function SF(n,e,t,r){return EE(n,"child_moved",e,t,r)}function AF(n,e,t,r){return EE(n,"child_removed",e,t,r)}function xF(n,e,t){let r=null;const i=t?new iN(t):null;"value"===e?r=new wE(i):e&&(r=new XD(e,i)),JR(n._repo,n,r)}class du{}class MF extends du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sl("endAt",this._value,e._path,!0);const t=ER(e._queryParams,this._value,this._key);if(QD(t),Df(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new to(e._repo,e._path,t,e._orderByCalled)}}class OH extends du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sl("endBefore",this._value,e._path,!1);const t=function Hj(n,e,t){let r;return r=ER(n,e,n.index_===Tl||t?t:mf),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(QD(t),Df(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new to(e._repo,e._path,t,e._orderByCalled)}}class RF extends du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sl("startAt",this._value,e._path,!0);const t=wR(e._queryParams,this._value,this._key);if(QD(t),Df(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new to(e._repo,e._path,t,e._orderByCalled)}}class LH extends du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sl("startAfter",this._value,e._path,!1);const t=function $j(n,e,t){let r;return r=wR(n,e,n.index_===Tl||t?t:yd),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(QD(t),Df(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new to(e._repo,e._path,t,e._orderByCalled)}}class UH extends du{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new to(e._repo,e._path,function Bj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class jH extends du{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new to(e._repo,e._path,function jj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class HH extends du{constructor(e){super(),this._path=e}_apply(e){YD(e,"orderByChild");const t=new In(this._path);if(tn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new _R(t),i=SD(e._queryParams,r);return Df(i),new to(e._repo,e._path,i,!0)}}class WH extends du{_apply(e){YD(e,"orderByKey");const t=SD(e._queryParams,Tl);return Df(t),new to(e._repo,e._path,t,!0)}}class qH extends du{_apply(e){YD(e,"orderByPriority");const t=SD(e._queryParams,Kn);return Df(t),new to(e._repo,e._path,t,!0)}}class KH extends du{_apply(e){YD(e,"orderByValue");const t=SD(e._queryParams,yR);return Df(t),new to(e._repo,e._path,t,!0)}}class QH extends du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Sl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new MF(this._value,this._key)._apply(new RF(this._value,this._key)._apply(e))}}function hu(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function R$(n){(0,O.hu)(!LD,"__referenceConstructor has already been defined"),LD=n})(ga),function F$(n){(0,O.hu)(!UD,"__referenceConstructor has already been defined"),UD=n}(ga);const JH="FIREBASE_DATABASE_EMULATOR_HOST",aN={};let NF=!1;function PF(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Dl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ti("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=rN(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env[JH]),w?(_=!0,a=`http://${w}?ns=${f.namespace}`,l=rN(a,i),f=l.repoInfo):_=!l.repoInfo.secure;const D=i&&_?new J0(J0.OWNER):new zB(n.name,n.options,e);aF("Invalid Firebase Database URL",l),tn(l.path)||Dl("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function nG(n,e,t,r){let i=aN[e.name];i||(i={},aN[e.name]=i);let a=i[n.toURLString()];return a&&Dl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new lH(n,NF,t,r),i[n.toURLString()]=a,a}(f,n,D,new WB(n.name,t));return new iG(x,n)}class iG{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function cH(n,e,t){if(n.stats_=uR(n.repoInfo_),n.forceRestClient_||GB())n.server_=new AD(n.repoInfo_,(r,i,a,l)=>{hF(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>fF(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Vg(n.repoInfo_,e,(r,i,a,l)=>{hF(n,r,i,a,l)},r=>{fF(n,r)},r=>{!function dH(n,e){Si(e,(t,r)=>{QR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function KB(n,e){const t=n.toString();return aR[t]||(aR[t]=e()),aR[t]}(n.repoInfo_,()=>new Kj(n.stats_,n.server_)),n.infoData_=new Gj,n.infoSyncTree_=new Y1({startListening:(r,i,a,l)=>{let f=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(f=dE(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),QR(n,"connected",!1),n.serverSyncTree_=new Y1({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,_)=>{const w=l(f,_);Mo(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ga(this._repo,yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function tG(n,e){const t=aN[e];(!t||t[n.key]!==n)&&Dl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),gF(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Dl("Cannot call "+e+" on a deleted database.")}}function OF(){n1.IS_TRANSPORT_INITIALIZED&&es("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function sG(){OF(),_f.forceDisallow()}function oG(){OF(),Fy.forceDisallow(),_f.forceAllow()}function lG(n,e){Fk(n,e)}const dG={".sv":"timestamp"};class pG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Vg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Vg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function cG(n){Rk(So.SDK_VERSION),(0,So._registerComponent)(new Ka.wA("database",(e,{instanceIdentifier:t})=>PF(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,So.registerVersion)(xk,"0.14.4",n),(0,So.registerVersion)(xk,"0.14.4","esm2017")}();const yG=new Is.Yd("@firebase/database-compat"),FF=function(n){yG.warn("FIREBASE WARNING: "+n)};class EG{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,FF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class IG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Tf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),yE("DataSnapshot.child","path",e,!1),new Tf(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),yE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Tf(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ro(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ui{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const l=Ui.getCancelAndContextArgs_("Query.on",r,i),f=(w,D)=>{t.call(l.context,new Tf(this.database,w),D)};f.userCallback=t,f.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return oN(this._delegate,f,_),t;case"child_added":return DF(this._delegate,f,_),t;case"child_removed":return AF(this._delegate,f,_),t;case"child_changed":return TF(this._delegate,f,_),t;case"child_moved":return SF(this._delegate,f,_),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,xF(this._delegate,e,i)}else xF(this._delegate,e)}get(){return NH(this._delegate).then(e=>new Tf(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const a=Ui.getCancelAndContextArgs_("Query.once",r,i),l=new O.BH,f=(w,D)=>{const x=new Tf(this.database,w);t&&t.call(a.context,x,D),l.resolve(x)};f.userCallback=t,f.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":oN(this._delegate,f,_,{onlyOnce:!0});break;case"child_added":DF(this._delegate,f,_,{onlyOnce:!0});break;case"child_removed":AF(this._delegate,f,_,{onlyOnce:!0});break;case"child_changed":TF(this._delegate,f,_,{onlyOnce:!0});break;case"child_moved":SF(this._delegate,f,_,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new Ui(this.database,hu(this._delegate,function BH(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new UH(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new Ui(this.database,hu(this._delegate,function $H(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new jH(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new Ui(this.database,hu(this._delegate,function GH(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return yE("orderByChild","path",n,!1),new HH(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new Ui(this.database,hu(this._delegate,function zH(){return new WH}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new Ui(this.database,hu(this._delegate,function ZH(){return new qH}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new Ui(this.database,hu(this._delegate,function YH(){return new KH}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new Ui(this.database,hu(this._delegate,function FH(n=null,e){return _E("startAt","key",e,!0),new RF(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new Ui(this.database,hu(this._delegate,function VH(n,e){return _E("startAfter","key",e,!0),new LH(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new Ui(this.database,hu(this._delegate,function PH(n,e){return _E("endAt","key",e,!0),new MF(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new Ui(this.database,hu(this._delegate,function kH(n,e){return _E("endBefore","key",e,!0),new OH(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new Ui(this.database,hu(this._delegate,function XH(n,e){return _E("equalTo","key",e,!0),new QH(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ui))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ro(this.database,new ga(this._delegate._repo,this._delegate._path))}}class Ro extends Ui{constructor(e,t){super(e,new to(t._repo,t._path,new TD,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ro(this.database,Gg(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ro(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new Ro(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=sN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,FF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}pa("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=RH(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function MH(n,e,t){if(pa("setWithPriority",n._path),Sl("setWithPriority",e,n._path,!1),YR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return XR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function AH(n){return pa("remove",n._path),sN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function gG(n,e,t){var r;if(n=(0,O.m9)(n),pa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new O.BH,f=oN(n,()=>{});return function wH(n,e,t,r,i,a){Gy(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:Pk(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=eN(n,e,void 0);l.currentInputSnapshot=f;const _=l.update(f.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{mE("transaction failed: Data returned ",_,l.path),l.status=0;const w=HD(n.transactionQueueTree_,e),D=$g(w)||[];let x;D.push(l),qR(w,D),"object"==typeof _&&null!==_&&(0,O.r3)(_,".priority")?(x=(0,O.DV)(_,".priority"),(0,O.hu)(gE(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(jD(n.serverSyncTree_,e)||qt.EMPTY_NODE).getPriority().val();const P=vE(n),B=Er(_,x),Z=GR(B,f,P);l.currentOutputSnapshotRaw=B,l.currentOutputSnapshotResolved=Z,l.currentWriteId=qD(n);const ce=LR(n.serverSyncTree_,e,Z,l.currentWriteId,l.applyLocally);Mo(n.eventQueue_,e,ce),ZD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,D)=>{let x=null;_?a.reject(_):(x=new Hg(D,new ga(n._repo,n._path),Kn),a.resolve(new pG(w,x)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new IG(a.committed,new Tf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function xH(n,e){n=(0,O.m9)(n),pa("setPriority",n._path),YR("setPriority",e,!1);const t=new O.BH;return XR(n._repo,ur(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function SH(n,e){n=(0,O.m9)(n),pa("push",n._path),Sl("push",e,n._path,!0);const t=dF(n._repo),r=TH(t),i=Gg(n,r),a=Gg(n,r);let l;return l=null!=e?sN(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Ro(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Ro(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return pa("Reference.onDisconnect",this._delegate._path),new EG(new IF(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class IE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:sG,forceLongPolling:oG}}useEmulator(e,t,r={}){!function kF(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Dl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Dl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new J0(J0.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);a=new J0(l)}!function eG(n,e,t,r){n.repoInfo_=new sR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof Ro){const t=bF(this._delegate,e.toString());return new Ro(this,t)}{const t=CF(this._delegate,e);return new Ro(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=bF(this._delegate,e);return new Ro(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function aG(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),gF(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function uG(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function vH(n){n.persistentConnection_&&n.persistentConnection_.resume(cF)}(n._repo)}(this._delegate)}}IE.ServerValue={TIMESTAMP:function hG(){return dG}(),increment:n=>function fG(n){return{".sv":{increment:n}}}(n)};var bG=Object.freeze({__proto__:null,initStandalone:function CG({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Rk(t);const l=new Ka.zt("auth-internal",new Ka.H0("database-standalone"));return l.setComponent(new Ka.wA("auth-internal",()=>r,"PRIVATE")),{instance:new IE(PF(n,l,void 0,e,a),n),namespace:i}}});const DG=IE.ServerValue;function LF(n){return null==n}function VF(n){return"function"==typeof n.set}function UF(n,e){return VF(e)?e:n.ref(e)}function BF(n,e){if(function SG(n){return"string"==typeof n}(n))return e.stringCase();if(VF(n))return e.firebaseCase();if(function AG(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function CE(n,e,t="on",r=QI.z){return new fr.y(i=>{let a=null;return a=n[t](e,(l,f)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,dt.U)(i=>{const{snapshot:a,prevKey:l}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:l,key:f}}),(0,YO.B)())}function jF(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function RG(n,e){const{payload:t,prevKey:r,key:i}=e,a=jF(n,i),l=function MG(n,e){if(LF(e))return 0;{const t=jF(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:f,key:_.key};return f=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,f),n}return n;default:return n}}function $F(n){return(LF(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function HF(n,e,t){return function xG(n,e,t){return CE(n,"value","once",t).pipe(gr(r=>{const i=[mt(r)];return e.forEach(a=>i.push(CE(n,a,"on",t))),(0,wM.T)(...i).pipe(ch(RG,[]))}),Ks())}(n,e=$F(e),t)}function GF(n,e,t){const r=(e=$F(e)).map(i=>CE(n,i,"on",t));return(0,wM.T)(...r)}function WF(n,e){return function(r,i){return BF(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function kG(n){return function(t){return t?BF(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function zF(n,e){return function(){return CE(n,"value","on",e)}}!function TG(n){n.INTERNAL.registerComponent(new Ka.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new IE(i,r)},"PUBLIC").setServiceProps({Reference:Ro,Query:Ui,Database:IE,DataSnapshot:Tf,enableLogging:lG,INTERNAL:bG,ServerValue:DG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(XI.Z);const VG=new h.OlP("angularfire2.realtimeDatabaseURL"),UG=new h.OlP("angularfire2.database.use-emulator");let BG=(()=>{class n{constructor(t,r,i,a,l,f,_,w,D,x,P,B,Z,ce,Me){this.schedulers=f;const Tt=_,Bt=(0,Ei.on)(t,l,r);w&&qM(Bt,l,D,P,B,Z,x,ce),this.database=(0,Ei.cc)(`${Bt.name}.database.${i}`,"AngularFireDatabase",Bt.name,()=>{const It=l.runOutsideAngular(()=>Bt.database(i||void 0));return Tt&&It.useEmulator(...Tt),It},[Tt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>UF(this.database,t));let a=i;return r&&(a=r(i)),function FG(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:WF(r,"update"),set:WF(r,"set"),push:i=>r.push(i),remove:kG(r),snapshotChanges:i=>HF(n,i,t).pipe(Ln.iC),stateChanges:i=>GF(n,i,t).pipe(Ln.iC),auditTrail:i=>function NG(n,e,t){return function OG(n,e,t){return function PG(n,e){return CE(n,"value","on",e).pipe((0,dt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function RB(...n){const e=(0,$s.jO)(n);return(0,br.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),f=!1;for(let _=0;_<i;_++)(0,Lu.Xf)(n[_]).subscribe((0,Fn.x)(r,w=>{a[_]=w,!f&&!l[_]&&(l[_]=!0,(f=l.every(Ec.y))&&(l=null))},MB.Z));t.subscribe((0,Fn.x)(r,_=>{if(f){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,dt.U)(([i,a])=>{const l=i.lastKeyToLoad,f=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:f}}),function NB(n){return(0,br.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Fn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,dt.U)(i=>i.actions))}(n,GF(n,e).pipe(ch((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Ln.iC),valueChanges:(i,a)=>HF(n,i,t).pipe((0,dt.U)(f=>f.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),Ln.iC)}}(a,this)}object(t){return function LG(n,e){return{query:n,snapshotChanges:()=>zF(n,e.schedulers.outsideAngular)().pipe(Ln.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>zF(n,e.schedulers.outsideAngular)().pipe(Ln.iC,(0,dt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>UF(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ei.Dh),h.LFG(Ei.xv,8),h.LFG(VG,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Ln.HU),h.LFG(UG,8),h.LFG(Z0,8),h.LFG(jM,8),h.LFG($M,8),h.LFG(HM,8),h.LFG(GM,8),h.LFG(WM,8),h.LFG(zM,8),h.LFG(mD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jG=(()=>{class n{constructor(){qs.Z.registerVersion("angularfire",Ln.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[BG]}),n})();const $G_firebaseConfig={apiKey:"AIzaSyC6yaN_jhbLoWFSqhzd7v87OzanRLEVJnU",authDomain:"peliculas-8e840.firebaseapp.com",projectId:"peliculas-8e840",storageBucket:"peliculas-8e840.appspot.com",messagingSenderId:"772714604463",appId:"1:772714604463:web:f8e0a181cc3afdd9a9b15a"};let HG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[xB]}),n.\u0275inj=h.cJS({providers:[gf],imports:[ka,AB,gv,vu,Ei.hO.initializeApp($G_firebaseConfig),jG,sB]}),n})();Pu().bootstrapModule(HG).catch(n=>console.error(n))},9751:(lt,Ee,F)=>{F.d(Ee,{y:()=>le});var h=F(930),Q=F(727),k=F(8822),ne=F(9635),te=F(2416),re=F(576),he=F(2806);let le=(()=>{class K{constructor(Ce){Ce&&(this._subscribe=Ce)}lift(Ce){const Ge=new K;return Ge.source=this,Ge.operator=Ce,Ge}subscribe(Ce,Ge,ot){const fe=function G(K){return K&&K instanceof h.Lv||function H(K){return K&&(0,re.m)(K.next)&&(0,re.m)(K.error)&&(0,re.m)(K.complete)}(K)&&(0,Q.Nn)(K)}(Ce)?Ce:new h.Hp(Ce,Ge,ot);return(0,he.x)(()=>{const{operator:be,source:De}=this;fe.add(be?be.call(fe,De):De?this._subscribe(fe):this._trySubscribe(fe))}),fe}_trySubscribe(Ce){try{return this._subscribe(Ce)}catch(Ge){Ce.error(Ge)}}forEach(Ce,Ge){return new(Ge=ae(Ge))((ot,fe)=>{const be=new h.Hp({next:De=>{try{Ce(De)}catch(Fe){fe(Fe),be.unsubscribe()}},error:fe,complete:ot});this.subscribe(be)})}_subscribe(Ce){var Ge;return null===(Ge=this.source)||void 0===Ge?void 0:Ge.subscribe(Ce)}[k.L](){return this}pipe(...Ce){return(0,ne.U)(Ce)(this)}toPromise(Ce){return new(Ce=ae(Ce))((Ge,ot)=>{let fe;this.subscribe(be=>fe=be,be=>ot(be),()=>Ge(fe))})}}return K.create=Be=>new K(Be),K})();function ae(K){var Be;return null!==(Be=K??te.v.Promise)&&void 0!==Be?Be:Promise}},7579:(lt,Ee,F)=>{F.d(Ee,{x:()=>he});var h=F(9751),Q=F(727);const ne=(0,F(3888).d)(ae=>function(){ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=F(8737),re=F(2806);let he=(()=>{class ae extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const K=new le(this,this);return K.operator=G,K}_throwIfClosed(){if(this.closed)throw new ne}next(G){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(G)}})}error(G){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:K}=this;for(;K.length;)K.shift().error(G)}})}complete(){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:K,isStopped:Be,observers:Ce}=this;return K||Be?Q.Lc:(this.currentObservers=null,Ce.push(G),new Q.w0(()=>{this.currentObservers=null,(0,te.P)(Ce,G)}))}_checkFinalizedStatuses(G){const{hasError:K,thrownError:Be,isStopped:Ce}=this;K?G.error(Be):Ce&&G.complete()}asObservable(){const G=new h.y;return G.source=this,G}}return ae.create=(H,G)=>new le(H,G),ae})();class le extends he{constructor(H,G){super(),this.destination=H,this.source=G}next(H){var G,K;null===(K=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===K||K.call(G,H)}error(H){var G,K;null===(K=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===K||K.call(G,H)}complete(){var H,G;null===(G=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===G||G.call(H)}_subscribe(H){var G,K;return null!==(K=null===(G=this.source)||void 0===G?void 0:G.subscribe(H))&&void 0!==K?K:Q.Lc}}},930:(lt,Ee,F)=>{F.d(Ee,{Hp:()=>ot,Lv:()=>K});var h=F(576),Q=F(727),k=F(2416),ne=F(7849),te=F(5032);const re=ae("C",void 0,void 0);function ae(Ie,ve,Ae){return{kind:Ie,value:ve,error:Ae}}var H=F(3410),G=F(2806);class K extends Q.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,Q.Nn)(ve)&&ve.add(this)):this.destination=Fe}static create(ve,Ae,Ve){return new ot(ve,Ae,Ve)}next(ve){this.isStopped?De(function le(Ie){return ae("N",Ie,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?De(function he(Ie){return ae("E",void 0,Ie)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?De(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Ce(Ie,ve){return Be.call(Ie,ve)}class Ge{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(ve)}catch(Ve){fe(Ve)}}error(ve){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(ve)}catch(Ve){fe(Ve)}else fe(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ae){fe(Ae)}}}class ot extends K{constructor(ve,Ae,Ve){let Pe;if(super(),(0,h.m)(ve)||!ve)Pe={next:ve??void 0,error:Ae??void 0,complete:Ve??void 0};else{let j;this&&k.v.useDeprecatedNextContext?(j=Object.create(ve),j.unsubscribe=()=>this.unsubscribe(),Pe={next:ve.next&&Ce(ve.next,j),error:ve.error&&Ce(ve.error,j),complete:ve.complete&&Ce(ve.complete,j)}):Pe=ve}this.destination=new Ge(Pe)}}function fe(Ie){k.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Ie):(0,ne.h)(Ie)}function De(Ie,ve){const{onStoppedNotification:Ae}=k.v;Ae&&H.z.setTimeout(()=>Ae(Ie,ve))}const Fe={closed:!0,next:te.Z,error:function be(Ie){throw Ie},complete:te.Z}},727:(lt,Ee,F)=>{F.d(Ee,{Lc:()=>re,w0:()=>te,Nn:()=>he});var h=F(576);const k=(0,F(3888).d)(ae=>function(G){ae(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((K,Be)=>`${Be+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ne=F(8737);class te{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Ce of G)Ce.remove(this);else G.remove(this);const{initialTeardown:K}=this;if((0,h.m)(K))try{K()}catch(Ce){H=Ce instanceof k?Ce.errors:[Ce]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Ce of Be)try{le(Ce)}catch(Ge){H=H??[],Ge instanceof k?H=[...H,...Ge.errors]:H.push(Ge)}}if(H)throw new k(H)}}add(H){var G;if(H&&H!==this)if(this.closed)le(H);else{if(H instanceof te){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(H)}}_hasParent(H){const{_parentage:G}=this;return G===H||Array.isArray(G)&&G.includes(H)}_addParent(H){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(H),G):G?[G,H]:H}_removeParent(H){const{_parentage:G}=this;G===H?this._parentage=null:Array.isArray(G)&&(0,ne.P)(G,H)}remove(H){const{_finalizers:G}=this;G&&(0,ne.P)(G,H),H instanceof te&&H._removeParent(this)}}te.EMPTY=(()=>{const ae=new te;return ae.closed=!0,ae})();const re=te.EMPTY;function he(ae){return ae instanceof te||ae&&"closed"in ae&&(0,h.m)(ae.remove)&&(0,h.m)(ae.add)&&(0,h.m)(ae.unsubscribe)}function le(ae){(0,h.m)(ae)?ae():ae.unsubscribe()}},2416:(lt,Ee,F)=>{F.d(Ee,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Ee,F)=>{F.d(Ee,{E:()=>Q});const Q=new(F(9751).y)(te=>te.complete())},8996:(lt,Ee,F)=>{F.d(Ee,{D:()=>ve});var h=F(8421),Q=F(5363),k=F(9468),re=F(9751),le=F(2202),ae=F(576),H=F(9672);function K(Ae,Ve){if(!Ae)throw new Error("Iterable cannot be null");return new re.y(Pe=>{(0,H.f)(Pe,Ve,()=>{const j=Ae[Symbol.asyncIterator]();(0,H.f)(Pe,Ve,()=>{j.next().then(_e=>{_e.done?Pe.complete():Pe.next(_e.value)})},0,!0)})})}var Be=F(3670),Ce=F(8239),Ge=F(1144),ot=F(6495),fe=F(2206),be=F(4532),De=F(3260);function ve(Ae,Ve){return Ve?function Ie(Ae,Ve){if(null!=Ae){if((0,Be.c)(Ae))return function ne(Ae,Ve){return(0,h.Xf)(Ae).pipe((0,k.R)(Ve),(0,Q.Q)(Ve))}(Ae,Ve);if((0,Ge.z)(Ae))return function he(Ae,Ve){return new re.y(Pe=>{let j=0;return Ve.schedule(function(){j===Ae.length?Pe.complete():(Pe.next(Ae[j++]),Pe.closed||this.schedule())})})}(Ae,Ve);if((0,Ce.t)(Ae))return function te(Ae,Ve){return(0,h.Xf)(Ae).pipe((0,k.R)(Ve),(0,Q.Q)(Ve))}(Ae,Ve);if((0,fe.D)(Ae))return K(Ae,Ve);if((0,ot.T)(Ae))return function G(Ae,Ve){return new re.y(Pe=>{let j;return(0,H.f)(Pe,Ve,()=>{j=Ae[le.h](),(0,H.f)(Pe,Ve,()=>{let _e,Ue;try{({value:_e,done:Ue}=j.next())}catch(We){return void Pe.error(We)}Ue?Pe.complete():Pe.next(_e)},0,!0)}),()=>(0,ae.m)(j?.return)&&j.return()})}(Ae,Ve);if((0,De.L)(Ae))return function Fe(Ae,Ve){return K((0,De.Q)(Ae),Ve)}(Ae,Ve)}throw(0,be.z)(Ae)}(Ae,Ve):(0,h.Xf)(Ae)}},8421:(lt,Ee,F)=>{F.d(Ee,{Xf:()=>Be});var h=F(655),Q=F(1144),k=F(8239),ne=F(9751),te=F(3670),re=F(2206),he=F(4532),le=F(6495),ae=F(3260),H=F(576),G=F(7849),K=F(8822);function Be(Ie){if(Ie instanceof ne.y)return Ie;if(null!=Ie){if((0,te.c)(Ie))return function Ce(Ie){return new ne.y(ve=>{const Ae=Ie[K.L]();if((0,H.m)(Ae.subscribe))return Ae.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,Q.z)(Ie))return function Ge(Ie){return new ne.y(ve=>{for(let Ae=0;Ae<Ie.length&&!ve.closed;Ae++)ve.next(Ie[Ae]);ve.complete()})}(Ie);if((0,k.t)(Ie))return function ot(Ie){return new ne.y(ve=>{Ie.then(Ae=>{ve.closed||(ve.next(Ae),ve.complete())},Ae=>ve.error(Ae)).then(null,G.h)})}(Ie);if((0,re.D)(Ie))return be(Ie);if((0,le.T)(Ie))return function fe(Ie){return new ne.y(ve=>{for(const Ae of Ie)if(ve.next(Ae),ve.closed)return;ve.complete()})}(Ie);if((0,ae.L)(Ie))return function De(Ie){return be((0,ae.Q)(Ie))}(Ie)}throw(0,he.z)(Ie)}function be(Ie){return new ne.y(ve=>{(function Fe(Ie,ve){var Ae,Ve,Pe,j;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,h.KL)(Ie);!(Ve=yield Ae.next()).done;)if(ve.next(Ve.value),ve.closed)return}catch(_e){Pe={error:_e}}finally{try{Ve&&!Ve.done&&(j=Ae.return)&&(yield j.call(Ae))}finally{if(Pe)throw Pe.error}}ve.complete()})})(Ie,ve).catch(Ae=>ve.error(Ae))})}},6451:(lt,Ee,F)=>{F.d(Ee,{T:()=>re});var h=F(8189),Q=F(8421),k=F(515),ne=F(7669),te=F(8996);function re(...he){const le=(0,ne.yG)(he),ae=(0,ne._6)(he,1/0),H=he;return H.length?1===H.length?(0,Q.Xf)(H[0]):(0,h.J)(ae)((0,te.D)(H,le)):k.E}},5403:(lt,Ee,F)=>{F.d(Ee,{x:()=>Q});var h=F(930);function Q(ne,te,re,he,le){return new k(ne,te,re,he,le)}class k extends h.Lv{constructor(te,re,he,le,ae,H){super(te),this.onFinalize=ae,this.shouldUnsubscribe=H,this._next=re?function(G){try{re(G)}catch(K){te.error(K)}}:super._next,this._error=le?function(G){try{le(G)}catch(K){te.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(G){te.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:re}=this;super.unsubscribe(),!re&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(lt,Ee,F)=>{F.d(Ee,{U:()=>k});var h=F(4482),Q=F(5403);function k(ne,te){return(0,h.e)((re,he)=>{let le=0;re.subscribe((0,Q.x)(he,ae=>{he.next(ne.call(te,ae,le++))}))})}},8189:(lt,Ee,F)=>{F.d(Ee,{J:()=>k});var h=F(5577),Q=F(4671);function k(ne=1/0){return(0,h.z)(Q.y,ne)}},5577:(lt,Ee,F)=>{F.d(Ee,{z:()=>le});var h=F(4004),Q=F(8421),k=F(4482),ne=F(9672),te=F(5403),he=F(576);function le(ae,H,G=1/0){return(0,he.m)(H)?le((K,Be)=>(0,h.U)((Ce,Ge)=>H(K,Ce,Be,Ge))((0,Q.Xf)(ae(K,Be))),G):("number"==typeof H&&(G=H),(0,k.e)((K,Be)=>function re(ae,H,G,K,Be,Ce,Ge,ot){const fe=[];let be=0,De=0,Fe=!1;const Ie=()=>{Fe&&!fe.length&&!be&&H.complete()},ve=Ve=>be<K?Ae(Ve):fe.push(Ve),Ae=Ve=>{Ce&&H.next(Ve),be++;let Pe=!1;(0,Q.Xf)(G(Ve,De++)).subscribe((0,te.x)(H,j=>{Be?.(j),Ce?ve(j):H.next(j)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(be--;fe.length&&be<K;){const j=fe.shift();Ge?(0,ne.f)(H,Ge,()=>Ae(j)):Ae(j)}Ie()}catch(j){H.error(j)}}))};return ae.subscribe((0,te.x)(H,ve,()=>{Fe=!0,Ie()})),()=>{ot?.()}}(K,Be,ae,G)))}},5363:(lt,Ee,F)=>{F.d(Ee,{Q:()=>ne});var h=F(9672),Q=F(4482),k=F(5403);function ne(te,re=0){return(0,Q.e)((he,le)=>{he.subscribe((0,k.x)(le,ae=>(0,h.f)(le,te,()=>le.next(ae),re),()=>(0,h.f)(le,te,()=>le.complete(),re),ae=>(0,h.f)(le,te,()=>le.error(ae),re)))})}},3099:(lt,Ee,F)=>{F.d(Ee,{B:()=>te});var h=F(8421),Q=F(7579),k=F(930),ne=F(4482);function te(he={}){const{connector:le=(()=>new Q.x),resetOnError:ae=!0,resetOnComplete:H=!0,resetOnRefCountZero:G=!0}=he;return K=>{let Be,Ce,Ge,ot=0,fe=!1,be=!1;const De=()=>{Ce?.unsubscribe(),Ce=void 0},Fe=()=>{De(),Be=Ge=void 0,fe=be=!1},Ie=()=>{const ve=Be;Fe(),ve?.unsubscribe()};return(0,ne.e)((ve,Ae)=>{ot++,!be&&!fe&&De();const Ve=Ge=Ge??le();Ae.add(()=>{ot--,0===ot&&!be&&!fe&&(Ce=re(Ie,G))}),Ve.subscribe(Ae),!Be&&ot>0&&(Be=new k.Hp({next:Pe=>Ve.next(Pe),error:Pe=>{be=!0,De(),Ce=re(Fe,ae,Pe),Ve.error(Pe)},complete:()=>{fe=!0,De(),Ce=re(Fe,H),Ve.complete()}}),(0,h.Xf)(ve).subscribe(Be))})(K)}}function re(he,le,...ae){if(!0===le)return void he();if(!1===le)return;const H=new k.Hp({next:()=>{H.unsubscribe(),he()}});return(0,h.Xf)(le(...ae)).subscribe(H)}},9468:(lt,Ee,F)=>{F.d(Ee,{R:()=>Q});var h=F(4482);function Q(k,ne=0){return(0,h.e)((te,re)=>{re.add(k.schedule(()=>te.subscribe(re),ne))})}},8505:(lt,Ee,F)=>{F.d(Ee,{b:()=>te});var h=F(576),Q=F(4482),k=F(5403),ne=F(4671);function te(re,he,le){const ae=(0,h.m)(re)||he||le?{next:re,error:he,complete:le}:re;return ae?(0,Q.e)((H,G)=>{var K;null===(K=ae.subscribe)||void 0===K||K.call(ae);let Be=!0;H.subscribe((0,k.x)(G,Ce=>{var Ge;null===(Ge=ae.next)||void 0===Ge||Ge.call(ae,Ce),G.next(Ce)},()=>{var Ce;Be=!1,null===(Ce=ae.complete)||void 0===Ce||Ce.call(ae),G.complete()},Ce=>{var Ge;Be=!1,null===(Ge=ae.error)||void 0===Ge||Ge.call(ae,Ce),G.error(Ce)},()=>{var Ce,Ge;Be&&(null===(Ce=ae.unsubscribe)||void 0===Ce||Ce.call(ae)),null===(Ge=ae.finalize)||void 0===Ge||Ge.call(ae)}))}):ne.y}},4408:(lt,Ee,F)=>{F.d(Ee,{o:()=>te});var h=F(727);class Q extends h.w0{constructor(he,le){super()}schedule(he,le=0){return this}}const k={setInterval(re,he,...le){const{delegate:ae}=k;return ae?.setInterval?ae.setInterval(re,he,...le):setInterval(re,he,...le)},clearInterval(re){const{delegate:he}=k;return(he?.clearInterval||clearInterval)(re)},delegate:void 0};var ne=F(8737);class te extends Q{constructor(he,le){super(he,le),this.scheduler=he,this.work=le,this.pending=!1}schedule(he,le=0){var ae;if(this.closed)return this;this.state=he;const H=this.id,G=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId(G,H,le)),this.pending=!0,this.delay=le,this.id=null!==(ae=this.id)&&void 0!==ae?ae:this.requestAsyncId(G,this.id,le),this}requestAsyncId(he,le,ae=0){return k.setInterval(he.flush.bind(he,this),ae)}recycleAsyncId(he,le,ae=0){if(null!=ae&&this.delay===ae&&!1===this.pending)return le;null!=le&&k.clearInterval(le)}execute(he,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ae=this._execute(he,le);if(ae)return ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,le){let H,ae=!1;try{this.work(he)}catch(G){ae=!0,H=G||new Error("Scheduled action threw falsy error")}if(ae)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:he,scheduler:le}=this,{actions:ae}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(ae,this),null!=he&&(this.id=this.recycleAsyncId(le,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Ee,F)=>{F.d(Ee,{v:()=>k});var h=F(6063);class Q{constructor(te,re=Q.now){this.schedulerActionCtor=te,this.now=re}schedule(te,re=0,he){return new this.schedulerActionCtor(this,te).schedule(he,re)}}Q.now=h.l.now;class k extends Q{constructor(te,re=Q.now){super(te,re),this.actions=[],this._active=!1}flush(te){const{actions:re}=this;if(this._active)return void re.push(te);let he;this._active=!0;do{if(he=te.execute(te.state,te.delay))break}while(te=re.shift());if(this._active=!1,he){for(;te=re.shift();)te.unsubscribe();throw he}}}},4986:(lt,Ee,F)=>{F.d(Ee,{z:()=>k});var h=F(4408);const k=new(F(7565).v)(h.o)},6063:(lt,Ee,F)=>{F.d(Ee,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(lt,Ee,F)=>{F.d(Ee,{z:()=>h});const h={setTimeout(Q,k,...ne){const{delegate:te}=h;return te?.setTimeout?te.setTimeout(Q,k,...ne):setTimeout(Q,k,...ne)},clearTimeout(Q){const{delegate:k}=h;return(k?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(lt,Ee,F)=>{F.d(Ee,{h:()=>Q});const Q=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Ee,F)=>{F.d(Ee,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,Ee,F)=>{F.d(Ee,{_6:()=>re,jO:()=>ne,yG:()=>te});var h=F(576);function k(he){return he[he.length-1]}function ne(he){return(0,h.m)(k(he))?he.pop():void 0}function te(he){return function Q(he){return he&&(0,h.m)(he.schedule)}(k(he))?he.pop():void 0}function re(he,le){return"number"==typeof k(he)?he.pop():le}},8737:(lt,Ee,F)=>{function h(Q,k){if(Q){const ne=Q.indexOf(k);0<=ne&&Q.splice(ne,1)}}F.d(Ee,{P:()=>h})},3888:(lt,Ee,F)=>{function h(Q){const ne=Q(te=>{Error.call(te),te.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}F.d(Ee,{d:()=>h})},2806:(lt,Ee,F)=>{F.d(Ee,{O:()=>ne,x:()=>k});var h=F(2416);let Q=null;function k(te){if(h.v.useDeprecatedSynchronousErrorHandling){const re=!Q;if(re&&(Q={errorThrown:!1,error:null}),te(),re){const{errorThrown:he,error:le}=Q;if(Q=null,he)throw le}}else te()}function ne(te){h.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=te)}},9672:(lt,Ee,F)=>{function h(Q,k,ne,te=0,re=!1){const he=k.schedule(function(){ne(),re?Q.add(this.schedule(null,te)):this.unsubscribe()},te);if(Q.add(he),!re)return he}F.d(Ee,{f:()=>h})},4671:(lt,Ee,F)=>{function h(Q){return Q}F.d(Ee,{y:()=>h})},1144:(lt,Ee,F)=>{F.d(Ee,{z:()=>h});const h=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(lt,Ee,F)=>{F.d(Ee,{D:()=>Q});var h=F(576);function Q(k){return Symbol.asyncIterator&&(0,h.m)(k?.[Symbol.asyncIterator])}},576:(lt,Ee,F)=>{function h(Q){return"function"==typeof Q}F.d(Ee,{m:()=>h})},3670:(lt,Ee,F)=>{F.d(Ee,{c:()=>k});var h=F(8822),Q=F(576);function k(ne){return(0,Q.m)(ne[h.L])}},6495:(lt,Ee,F)=>{F.d(Ee,{T:()=>k});var h=F(2202),Q=F(576);function k(ne){return(0,Q.m)(ne?.[h.h])}},8239:(lt,Ee,F)=>{F.d(Ee,{t:()=>Q});var h=F(576);function Q(k){return(0,h.m)(k?.then)}},3260:(lt,Ee,F)=>{F.d(Ee,{L:()=>ne,Q:()=>k});var h=F(655),Q=F(576);function k(te){return(0,h.FC)(this,arguments,function*(){const he=te.getReader();try{for(;;){const{value:le,done:ae}=yield(0,h.qq)(he.read());if(ae)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(le)}}finally{he.releaseLock()}})}function ne(te){return(0,Q.m)(te?.getReader)}},4482:(lt,Ee,F)=>{F.d(Ee,{A:()=>Q,e:()=>k});var h=F(576);function Q(ne){return(0,h.m)(ne?.lift)}function k(ne){return te=>{if(Q(te))return te.lift(function(re){try{return ne(re,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(lt,Ee,F)=>{function h(){}F.d(Ee,{Z:()=>h})},9635:(lt,Ee,F)=>{F.d(Ee,{U:()=>k,z:()=>Q});var h=F(4671);function Q(...ne){return k(ne)}function k(ne){return 0===ne.length?h.y:1===ne.length?ne[0]:function(re){return ne.reduce((he,le)=>le(he),re)}}},7849:(lt,Ee,F)=>{F.d(Ee,{h:()=>k});var h=F(2416),Q=F(3410);function k(ne){Q.z.setTimeout(()=>{const{onUnhandledError:te}=h.v;if(!te)throw ne;te(ne)})}},4532:(lt,Ee,F)=>{function h(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ee,{z:()=>h})},655:(lt,Ee,F)=>{function ne(se,de){var ye={};for(var xe in se)Object.prototype.hasOwnProperty.call(se,xe)&&de.indexOf(xe)<0&&(ye[xe]=se[xe]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(xe=Object.getOwnPropertySymbols(se);ke<xe.length;ke++)de.indexOf(xe[ke])<0&&Object.prototype.propertyIsEnumerable.call(se,xe[ke])&&(ye[xe[ke]]=se[xe[ke]])}return ye}function K(se,de,ye,xe){return new(ye||(ye=Promise))(function(je,Qe){function Ze(nn){try{wt(xe.next(nn))}catch(tt){Qe(tt)}}function un(nn){try{wt(xe.throw(nn))}catch(tt){Qe(tt)}}function wt(nn){nn.done?je(nn.value):function ke(je){return je instanceof ye?je:new ye(function(Qe){Qe(je)})}(nn.value).then(Ze,un)}wt((xe=xe.apply(se,de||[])).next())})}function Ie(se){return this instanceof Ie?(this.v=se,this):new Ie(se)}function ve(se,de,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,xe=ye.apply(se,de||[]),je=[];return ke={},Qe("next"),Qe("throw"),Qe("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function Qe(xt){xe[xt]&&(ke[xt]=function(jn){return new Promise(function(_n,Cn){je.push([xt,jn,_n,Cn])>1||Ze(xt,jn)})})}function Ze(xt,jn){try{!function un(xt){xt.value instanceof Ie?Promise.resolve(xt.value.v).then(wt,nn):tt(je[0][2],xt)}(xe[xt](jn))}catch(_n){tt(je[0][3],_n)}}function wt(xt){Ze("next",xt)}function nn(xt){Ze("throw",xt)}function tt(xt,jn){xt(jn),je.shift(),je.length&&Ze(je[0][0],je[0][1])}}function Ve(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,de=se[Symbol.asyncIterator];return de?de.call(se):(se=function ot(se){var de="function"==typeof Symbol&&Symbol.iterator,ye=de&&se[de],xe=0;if(ye)return ye.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&xe>=se.length&&(se=void 0),{value:se&&se[xe++],done:!se}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),ye={},xe("next"),xe("throw"),xe("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function xe(je){ye[je]=se[je]&&function(Qe){return new Promise(function(Ze,un){!function ke(je,Qe,Ze,un){Promise.resolve(un).then(function(wt){je({value:wt,done:Ze})},Qe)}(Ze,un,(Qe=se[je](Qe)).done,Qe.value)})}}}F.d(Ee,{FC:()=>ve,KL:()=>Ve,_T:()=>ne,mG:()=>K,qq:()=>Ie})},4650:(lt,Ee,F)=>{F.d(Ee,{$8M:()=>Zo,$WT:()=>ks,$Z:()=>rI,AFp:()=>ub,AaK:()=>le,CHM:()=>Td,CRH:()=>G_,CZH:()=>or,CqO:()=>kI,D6c:()=>vA,EJc:()=>pg,EpF:()=>OI,F4k:()=>Rp,FYo:()=>fh,FiY:()=>b,GfV:()=>VE,Gpc:()=>G,JOm:()=>ms,KtG:()=>Pf,LFG:()=>He,LSH:()=>NE,Lbi:()=>lb,Lck:()=>$S,MAs:()=>Uc,MGl:()=>Np,MMx:()=>A_,NdJ:()=>sw,OlP:()=>dn,Oqu:()=>Op,P3R:()=>iT,PXZ:()=>lA,Q6J:()=>Mp,QGY:()=>iw,Qsj:()=>dT,R0b:()=>Ur,RDi:()=>qu,Rgc:()=>$h,SBq:()=>bc,Sil:()=>ad,Suo:()=>hl,TTD:()=>ho,TgZ:()=>Bc,X6Q:()=>su,XFs:()=>ft,Xpm:()=>fu,Xts:()=>gv,Y36:()=>vh,YKP:()=>Xc,YNc:()=>o_,Yjl:()=>Ml,Yz7:()=>tt,Z0I:()=>Cn,ZZ4:()=>fd,_Bn:()=>Vw,_UZ:()=>a_,_Vd:()=>dh,_c5:()=>nf,_uU:()=>JI,aQg:()=>vl,c2e:()=>ty,cJS:()=>jn,cg1:()=>w_,dDg:()=>pb,dqk:()=>Pt,eFA:()=>h0,eJc:()=>W_,ekj:()=>YI,eoX:()=>a0,f3M:()=>nt,g9A:()=>J_,h0i:()=>Qc,hGG:()=>w0,hij:()=>f_,iGM:()=>Oe,ifc:()=>ee,ip1:()=>ab,jDz:()=>x_,kL8:()=>yw,lG2:()=>xl,lqb:()=>za,lri:()=>o0,n5z:()=>ic,oAB:()=>gu,oxw:()=>wi,q4F:()=>Co,qLn:()=>mr,qOj:()=>Wv,qZA:()=>jc,rWj:()=>oy,s9C:()=>ow,sBO:()=>dy,s_b:()=>ag,soG:()=>bs,tb:()=>d0,tp0:()=>M,uIk:()=>Qv,vHH:()=>fe,vpe:()=>xo,wAp:()=>Ct,xp6:()=>ZE,z2F:()=>ld,zSh:()=>gp,zs3:()=>Sc});var h=F(7579),Q=F(727),k=F(9751),ne=F(6451),te=F(3099);function re(s){for(let o in s)if(s[o]===re)return o;throw Error("Could not find renamed property on target object.")}function he(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ae(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=re({__forward_ref__:re});function G(s){return s.__forward_ref__=G,s.toString=function(){return le(this())},s}function K(s){return Be(s)?s():s}function Be(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===G}function Ce(s){return s&&!!s.\u0275providers}const ot="https://g.co/ng/security#xss";class fe extends Error{constructor(o,u){super(be(o,u)),this.code=o}}function be(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function De(s){return"string"==typeof s?s:null==s?"":String(s)}function Ve(s,o){throw new fe(-201,!1)}function Qe(s,o){null==s&&function Ze(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function tt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function jn(s){return{providers:s.providers||[],imports:s.imports||[]}}function _n(s){return An(s,$r)||An(s,wn)}function Cn(s){return null!==_n(s)}function An(s,o){return s.hasOwnProperty(o)?s[o]:null}function di(s){return s&&(s.hasOwnProperty(Ns)||s.hasOwnProperty(ei))?s[Ns]:null}const $r=re({\u0275prov:re}),Ns=re({\u0275inj:re}),wn=re({ngInjectableDef:re}),ei=re({ngInjectorDef:re});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Ps;function xn(s){const o=Ps;return Ps=s,o}function Sr(s,o,u){const c=_n(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&ft.Optional?null:void 0!==o?o:void Ve(le(s))}const Pt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),En={},$n="__NG_DI_FLAG__",Ar="ngTempTokenPath",xr="ngTokenPath",No=/\n/gm,cn="\u0275",Bi="__source";let Qt;function Hr(s){const o=Qt;return Qt=s,o}function ji(s,o=ft.Default){if(void 0===Qt)throw new fe(-203,!1);return null===Qt?Sr(s,void 0,o):Qt.get(s,o&ft.Optional?null:void 0,o)}function He(s,o=ft.Default){return(function xi(){return Ps}()||ji)(K(s),o)}function nt(s,o=ft.Default){return He(s,bt(o))}function bt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Nt(s){const o=[];for(let u=0;u<s.length;u++){const c=K(s[u]);if(Array.isArray(c)){if(0===c.length)throw new fe(900,!1);let d,g=ft.Default;for(let v=0;v<c.length;v++){const I=c[v],C=Mr(I);"number"==typeof C?-1===C?d=I.token:g|=C:d=I}o.push(He(d,g))}else o.push(He(c))}return o}function jt(s,o){return s[$n]=o,s.prototype[$n]=o,s}function Mr(s){return s[$n]}function z(s){return{toString:s}.toString()}var pe=(()=>((pe=pe||{})[pe.OnPush=0]="OnPush",pe[pe.Default=1]="Default",pe))(),ee=(()=>{return(s=ee||(ee={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ee;var s})();const Xe={},ze=[],gn=re({\u0275cmp:re}),Mn=re({\u0275dir:re}),Pn=re({\u0275pipe:re}),ir=re({\u0275mod:re}),Ot=re({\u0275fac:re}),Gr=re({__NG_ELEMENT_ID__:re});let $i=0;function fu(s){return z(()=>{const o=Rr(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===pe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||ee.Emulated,id:"c"+$i++,styles:s.styles||ze,_:null,schemas:s.schemas||null,tView:null};mu(u);const c=s.dependencies;return u.directiveDefs=ro(c,!1),u.pipeDefs=ro(c,!0),u})}function Al(s){return Xt(s)||Qn(s)}function pu(s){return null!==s}function gu(s){return z(()=>({type:s.type,bootstrap:s.bootstrap||ze,declarations:s.declarations||ze,imports:s.imports||ze,exports:s.exports||ze,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function On(s,o){if(null==s)return Xe;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=c,o&&(o[d]=g)}return u}function xl(s){return z(()=>{const o=Rr(s);return mu(o),o})}function Ml(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Xt(s){return s[gn]||null}function Qn(s){return s[Mn]||null}function lr(s){return s[Pn]||null}function ks(s){const o=Xt(s)||Qn(s)||lr(s);return null!==o&&o.standalone}function sr(s,o){const u=s[ir]||null;if(!u&&!0===o)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return u}function Rr(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||ze,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:On(s.inputs,o),outputs:On(s.outputs)}}function mu(s){s.features?.forEach(o=>o(s))}function ro(s,o){if(!s)return null;const u=o?lr:Al;return()=>("function"==typeof s?s():s).map(c=>u(c)).filter(pu)}const hi=0,et=1,kt=2,vn=3,ti=4,Hi=5,bn=6,io=7,Dn=8,so=9,ma=10,Ht=11,Po=12,Oo=13,oo=14,_a=15,cr=16,ko=17,ao=18,ni=19,fi=20,Rl=21,Zt=22,Nl=1,_u=2,uo=7,pi=8,Fo=9,dr=10;function ri(s){return Array.isArray(s)&&"object"==typeof s[Nl]}function ii(s){return Array.isArray(s)&&!0===s[Nl]}function ns(s){return 0!=(4&s.flags)}function yu(s){return s.componentOffset>-1}function Lo(s){return 1==(1&s.flags)}function Nr(s){return!!s.template}function wd(s){return 0!=(256&s[kt])}function si(s,o){return s.hasOwnProperty(Ot)?s[Ot]:null}class Id{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function ho(){return va}function va(s){return s.type.prototype.ngOnChanges&&(s.setInput=Bo),Uo}function Uo(){const s=Fl(this),o=s?.current;if(o){const u=s.previous;if(u===Xe)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Bo(s,o,u,c){const d=this.declaredInputs[u],g=Fl(s)||function Iu(s,o){return s[wa]=o}(s,{previous:Xe,current:null}),v=g.current||(g.current={}),I=g.previous,C=I[d];v[d]=new Id(C&&C.currentValue,o,I===Xe),s[c]=o}ho.ngInherit=!0;const wa="__ngSimpleChanges__";function Fl(s){return s[wa]||null}const on=function(s,o,u){};function Rn(s){for(;Array.isArray(s);)s=s[hi];return s}function Wi(s,o){return Rn(o[s])}function Pr(s,o){return Rn(o[s.index])}function Ll(s,o){return s.data[o]}function hr(s,o){const u=o[s];return ri(u)?u:u[hi]}function fo(s){return 64==(64&s[kt])}function Mi(s,o){return null==o?null:s[o]}function Du(s){s[ao]=0}function Ca(s,o){s[Hi]+=o;let u=s,c=s[vn];for(;null!==c&&(1===o&&1===u[Hi]||-1===o&&0===u[Hi]);)c[Hi]+=o,u=c,c=c[vn]}const Mt={lFrame:Yg(null),bindingsEnabled:!0};function Dd(){return Mt.bindingsEnabled}function Se(){return Mt.lFrame.lView}function Kt(){return Mt.lFrame.tView}function Td(s){return Mt.lFrame.contextLView=s,s[Dn]}function Pf(s){return Mt.lFrame.contextLView=null,s}function Hn(){let s=Of();for(;null!==s&&64===s.type;)s=s.parent;return s}function Of(){return Mt.lFrame.currentTNode}function Ri(s,o){const u=Mt.lFrame;u.currentTNode=s,u.isParent=o}function Su(){return Mt.lFrame.isParent}function po(){return Mt.lFrame.bindingIndex++}function zl(s,o){const u=Mt.lFrame;u.bindingIndex=u.bindingRootIndex=s,is(o)}function is(s){Mt.lFrame.currentDirectiveIndex=s}function Ad(){return Mt.lFrame.currentQueryIndex}function Ru(s){Mt.lFrame.currentQueryIndex=s}function Kg(s){const o=s[et];return 2===o.type?o.declTNode:1===o.type?s[bn]:null}function Zl(s,o,u){if(u&ft.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||u&ft.Host||(d=Kg(g),null===d||(g=g[_a],10&d.type))););if(null===d)return!1;o=d,s=g}const c=Mt.lFrame=zy();return c.currentTNode=o,c.lView=s,!0}function xd(s){const o=zy(),u=s[et];Mt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function zy(){const s=Mt.lFrame,o=null===s?null:s.child;return null===o?Yg(s):o}function Yg(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Kl(){const s=Mt.lFrame;return Mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const qy=Kl;function Ff(){const s=Kl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Wr(){return Mt.lFrame.selectedIndex}function Vs(s){Mt.lFrame.selectedIndex=s}function pn(){const s=Mt.lFrame;return Ll(s.tView,s.selectedIndex)}function go(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:R}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),S&&((s.viewHooks||(s.viewHooks=[])).push(u,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function Ql(s,o,u){$o(s,o,3,u)}function ss(s,o,u,c){(3&s[kt])===u&&$o(s,o,u,c)}function jo(s,o){let u=s[kt];(3&u)===o&&(u&=2047,u+=1,s[kt]=u)}function $o(s,o,u,c){const g=c??-1,v=o.length-1;let I=0;for(let C=void 0!==c?65535&s[ao]:0;C<v;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(s[ao]+=65536),(I<g||-1==g)&&(Vf(s,u,o,C),s[ao]=(4294901760&s[ao])+C+2),C++}function Vf(s,o,u,c){const d=u[c]<0,g=u[c+1],I=s[d?-u[c]:u[c]];if(d){if(s[kt]>>11<s[ao]>>16&&(3&s[kt])===o){s[kt]+=2048,on(4,I,g);try{g.call(I)}finally{on(5,I,g)}}}else{on(4,I,g);try{g.call(I)}finally{on(5,I,g)}}}const os=-1;class Cr{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Ho(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const g=u[c++],v=u[c++],I=u[c++];s.setAttribute(o,v,I,g)}else{const g=d,v=u[++c];Go(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),c++}}return c}function as(s){return 3===s||4===s||6===s}function Go(s){return 64===s.charCodeAt(0)}function us(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Xl(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Xl(s,o,u,c,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}function Jl(s){return s!==os}function mo(s){return 32767&s}function ls(s,o){let u=function jf(s){return s>>16}(s),c=o;for(;u>0;)c=c[_a],u--;return c}let Sa=!0;function Ki(s){const o=Sa;return Sa=s,o}const Aa=255,xa=5;let Wo=0;const zr={};function cs(s,o){const u=nc(s,o);if(-1!==u)return u;const c=o[et];c.firstCreatePass&&(s.injectorIndex=o.length,zo(c.data,s),zo(o,null),zo(c.blueprint,null));const d=Ma(s,o),g=s.injectorIndex;if(Jl(d)){const v=mo(d),I=ls(d,o),C=I[et].data;for(let S=0;S<8;S++)o[g+S]=I[v+S]|C[v+S]}return o[g+8]=d,g}function zo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function nc(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ma(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=sc(d),null===c)return os;if(u++,d=d[_a],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return os}function Ra(s,o,u){!function tc(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Gr)&&(c=u[Gr]),null==c&&(c=u[Gr]=Wo++);const d=c&Aa;o.data[s+(d>>xa)]|=1<<d}(s,o,u)}function Na(s,o,u){if(u&ft.Optional||void 0!==s)return s;Ve()}function Nd(s,o,u,c){if(u&ft.Optional&&void 0===c&&(c=null),!(u&(ft.Self|ft.Host))){const d=s[so],g=xn(void 0);try{return d?d.get(o,c,u&ft.Optional):Sr(o,c,u&ft.Optional)}finally{xn(g)}}return Na(c,0,u)}function Yi(s,o,u,c=ft.Default,d){if(null!==s){if(1024&o[kt]){const v=function Pd(s,o,u,c,d){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[kt]&&!(256&v[kt]);){const I=Pa(g,v,u,c|ft.Self,zr);if(I!==zr)return I;let C=g.parent;if(!C){const S=v[Rl];if(S){const R=S.get(u,zr,c);if(R!==zr)return R}C=sc(v),v=v[_a]}g=C}return d}(s,o,u,c,zr);if(v!==zr)return v}const g=Pa(s,o,u,c,zr);if(g!==zr)return g}return Nd(o,u,c,d)}function Pa(s,o,u,c,d){const g=function rc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Gr)?s[Gr]:void 0;return"number"==typeof o?o>=0?o&Aa:$f:o}(u);if("function"==typeof g){if(!Zl(o,s,c))return c&ft.Host?Na(d,0,c):Nd(o,u,c,d);try{const v=g(c);if(null!=v||c&ft.Optional)return v;Ve()}finally{qy()}}else if("number"==typeof g){let v=null,I=nc(s,o),C=os,S=c&ft.Host?o[cr][bn]:null;for((-1===I||c&ft.SkipSelf)&&(C=-1===I?Ma(s,o):o[I+8],C!==os&&yo(c,!1)?(v=o[et],I=mo(C),o=ls(C,o)):I=-1);-1!==I;){const R=o[et];if(ds(g,I,R.data)){const L=Nu(I,o,u,v,c,S);if(L!==zr)return L}C=o[I+8],C!==os&&yo(c,o[et].data[I+8]===S)&&ds(g,I,o)?(v=R,I=mo(C),o=ls(C,o)):I=-1}}return d}function Nu(s,o,u,c,d,g){const v=o[et],I=v.data[s+8],R=_o(I,v,u,null==c?yu(I)&&Sa:c!=v&&0!=(3&I.type),d&ft.Host&&g===I);return null!==R?Bs(o,v,R,I):zr}function _o(s,o,u,c,d){const g=s.providerIndexes,v=o.data,I=1048575&g,C=s.directiveStart,R=g>>20,W=d?I+R:s.directiveEnd;for(let J=c?I:I+R;J<W;J++){const me=v[J];if(J<C&&u===me||J>=C&&me.type===u)return J}if(d){const J=v[C];if(J&&Nr(J)&&J.type===u)return C}return null}function Bs(s,o,u,c){let d=s[u];const g=o.data;if(function Da(s){return s instanceof Cr}(d)){const v=d;v.resolving&&function Ie(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new fe(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Fe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():De(s)}(g[u]));const I=Ki(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?xn(v.injectImpl):null;Zl(s,c,ft.Default);try{d=s[u]=v.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Rd(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const v=va(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==C&&xn(C),Ki(I),v.resolving=!1,qy()}}return d}function ds(s,o,u){return!!(u[o+(s>>xa)]&1<<s)}function yo(s,o){return!(s&ft.Self||s&ft.Host&&o)}class Oa{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Yi(this._tNode,this._lView,o,bt(c),u)}}function $f(){return new Oa(Hn(),Se())}function ic(s){return z(()=>{const o=s.prototype.constructor,u=o[Ot]||Pu(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[Ot]||Pu(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Pu(s){return Be(s)?()=>{const o=Pu(K(s));return o&&o()}:si(s)}function sc(s){const o=s[et],u=o.type;return 2===u?o.declTNode:1===u?s[bn]:null}function Zo(s){return function qo(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const g=u[d];if(as(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(g===o)return u[d+1];d+=2}}}return null}(Hn(),s)}const Ou="__parameters__";function vo(s,o,u){return z(()=>{const c=function Od(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const v=new d(...g);return I.annotation=v,I;function I(C,S,R){const L=C.hasOwnProperty(Ou)?C[Ou]:Object.defineProperty(C,Ou,{value:[]})[Ou];for(;L.length<=R;)L.push(null);return(L[R]=L[R]||[]).push(v),C}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class dn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=tt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function fs(s,o){s.forEach(u=>Array.isArray(u)?fs(u,o):o(u))}function ac(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function La(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Wt(s,o,u){let c=Ni(s,o);return c>=0?s[1|c]=u:(c=~c,function rm(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function fr(s,o){const u=Ni(s,o);if(u>=0)return s[1|u]}function Ni(s,o){return function Ud(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const g=c+(d-c>>1),v=s[g<<u];if(o===v)return g<<u;v>o?d=g:c=g+1}return~(d<<u)}(s,o,1)}const b=jt(vo("Optional"),8),M=jt(vo("SkipSelf"),4);var ms=(()=>((ms=ms||{})[ms.Important=1]="Important",ms[ms.DashCase=2]="DashCase",ms))();const cm=new Map;let dm=0;const hm="__ngContext__";function ai(s,o){ri(o)?(s[hm]=o[fi],function Xf(s){cm.set(s[fi],s)}(o)):s[hm]=o}let Bu;function Jo(s,o){return Bu(s,o)}function ja(s){const o=s[vn];return ii(o)?o[vn]:o}function ep(s){return tp(s[Oo])}function ju(s){return tp(s[ti])}function tp(s){for(;null!==s&&!ii(s);)s=s[ti];return s}function $a(s,o,u,c,d){if(null!=c){let g,v=!1;ii(c)?g=c:ri(c)&&(v=!0,c=c[hi]);const I=Rn(c);0===s&&null!==u?null==d?rp(o,u,I):_s(o,u,I,d||null,!0):1===s&&null!==u?_s(o,u,I,d||null,!0):2===s?function Ha(s,o,u){const c=Gu(s,o);c&&function DE(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,I,v):3===s&&o.destroyNode(I),null!=g&&function Em(s,o,u,c,d){const g=u[uo];g!==Rn(u)&&$a(o,s,c,g,d);for(let I=dr;I<u.length;I++){const C=u[I];na(C[et],C,s,o,c,g)}}(o,s,g,u,d)}}function mm(s,o,u){return s.createElement(o,u)}function gc(s,o){const u=s[Fo],c=u.indexOf(o),d=o[vn];512&o[kt]&&(o[kt]&=-513,Ca(d,-1)),u.splice(c,1)}function $u(s,o){if(s.length<=dr)return;const u=dr+o,c=s[u];if(c){const d=c[ko];null!==d&&d!==s&&gc(d,c),o>0&&(s[u-1][ti]=c[ti]);const g=La(s,dr+o);!function lv(s,o){na(s,o,o[Ht],2,null,null),o[hi]=null,o[bn]=null}(c[et],c);const v=g[ni];null!==v&&v.detachView(g[et]),c[vn]=null,c[ti]=null,c[kt]&=-65}return c}function ym(s,o){if(!(128&o[kt])){const u=o[Ht];u.destroyNode&&na(s,o,u,3,null,null),function Xd(s){let o=s[Oo];if(!o)return Hu(s[et],s);for(;o;){let u=null;if(ri(o))u=o[Oo];else{const c=o[dr];c&&(u=c)}if(!u){for(;o&&!o[ti]&&o!==s;)ri(o)&&Hu(o[et],o),o=o[vn];null===o&&(o=s),ri(o)&&Hu(o[et],o),u=o&&o[ti]}o=u}}(o)}}function Hu(s,o){if(!(128&o[kt])){o[kt]&=-65,o[kt]|=128,function cv(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Cr)){const g=u[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=d[g[v]],C=g[v+1];on(4,I,C);try{C.call(I)}finally{on(5,I,C)}}else{on(4,d,g);try{g.call(d)}finally{on(5,d,g)}}}}}(s,o),function eh(s,o){const u=s.cleanup,c=o[io];let d=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+3];v>=0?c[d=v]():c[d=-v].unsubscribe(),g+=2}else{const v=c[d=u[g+1]];u[g].call(v)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[io]=null}}(s,o),1===o[et].type&&o[Ht].destroy();const u=o[ko];if(null!==u&&ii(o[vn])){u!==o[vn]&&gc(u,o);const c=o[ni];null!==c&&c.detachView(s)}!function Uu(s){cm.delete(s[fi])}(o)}}function vm(s,o,u){return function np(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[hi];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=s.data[c.directiveStart+d];if(g===ee.None||g===ee.Emulated)return null}return Pr(c,u)}}(s,o.parent,u)}function _s(s,o,u,c,d){s.insertBefore(o,u,c,d)}function rp(s,o,u){s.appendChild(o,u)}function ip(s,o,u,c,d){null!==c?_s(s,o,u,c,d):rp(s,o,u)}function Gu(s,o){return s.parentNode(o)}let mc,vs,oh,th=function Wu(s,o,u){return 40&s.type?Pr(s,u):null};function zu(s,o,u,c){const d=vm(s,c,o),g=o[Ht],I=function wm(s,o,u){return th(s,o,u)}(c.parent||o[bn],c,o);if(null!=d)if(Array.isArray(u))for(let C=0;C<u.length;C++)ip(g,d,u[C],I,!1);else ip(g,d,u,I,!1);void 0!==mc&&mc(g,c,o,u,d)}function sp(s,o){if(null!==o){const u=o.type;if(3&u)return Pr(o,s);if(4&u)return ys(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return sp(s,c);{const d=s[o.index];return ii(d)?ys(-1,d):Rn(d)}}if(32&u)return Jo(o,s)()||Rn(s[o.index]);{const c=_i(s,o);return null!==c?Array.isArray(c)?c[0]:sp(ja(s[cr]),c):sp(s,o.next)}}return null}function _i(s,o){return null!==o?s[cr][bn].projection[o.projection]:null}function ys(s,o){const u=dr+s+1;if(u<o.length){const c=o[u],d=c[et].firstChild;if(null!==d)return sp(c,d)}return o[uo]}function rh(s,o,u,c,d,g,v){for(;null!=u;){const I=c[u.index],C=u.type;if(v&&0===o&&(I&&ai(Rn(I),c),u.flags|=2),32!=(32&u.flags))if(8&C)rh(s,o,u.child,c,d,g,!1),$a(o,s,d,I,g);else if(32&C){const S=Jo(u,c);let R;for(;R=S();)$a(o,s,d,R,g);$a(o,s,d,I,g)}else 16&C?dv(s,o,c,u,d,g):$a(o,s,d,I,g);u=v?u.projectionNext:u.next}}function na(s,o,u,c,d,g){rh(u,c,s.firstChild,o,d,g,!1)}function dv(s,o,u,c,d,g){const v=u[cr],C=v[bn].projection[c.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)$a(o,s,d,C[S],g);else rh(s,o,C,v[vn],d,g,!0)}function Cm(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function hv(s,o,u){const{mergedAttrs:c,classes:d,styles:g}=u;null!==c&&Ho(s,o,c),null!==d&&Cm(s,o,d),null!==g&&function Ga(s,o,u){s.setAttribute(o,"style",u)}(s,o,g)}function qu(s){vs=s}function Dm(s){return function ah(){if(void 0===oh&&(oh=null,Pt.trustedTypes))try{oh=Pt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return oh}()?.createScriptURL(s)||s}class cp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ot})`}}function A(s){return s instanceof cp?s.changingThisBreaksApplicationSecurity:s}function N(s,o){const u=function q(s){return s instanceof cp&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${ot})`)}return u===o}const dp=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var pr=(()=>((pr=pr||{})[pr.NONE=0]="NONE",pr[pr.HTML=1]="HTML",pr[pr.STYLE=2]="STYLE",pr[pr.SCRIPT=3]="SCRIPT",pr[pr.URL=4]="URL",pr[pr.RESOURCE_URL=5]="RESOURCE_URL",pr))();function NE(s){const o=Rm();return o?o.sanitize(pr.URL,s)||"":N(s,"URL")?A(s):function yc(s){return(s=String(s)).match(dp)?s:"unsafe:"+s}(De(s))}function PE(s){const o=Rm();if(o)return Dm(o.sanitize(pr.RESOURCE_URL,s)||"");if(N(s,"ResourceURL"))return Dm(A(s));throw new fe(904,!1)}function iT(s,o,u){return function fN(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?PE:NE}(o,u)(s)}function Rm(){const s=Se();return s&&s[Po]}const gv=new dn("ENVIRONMENT_INITIALIZER"),sT=new dn("INJECTOR",-1),mt=new dn("INJECTOR_DEF_TYPES");class Wa{get(o,u=En){if(u===En){const c=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw c.name="NullInjectorError",c}return u}}function oT(...s){return{\u0275providers:pp(0,s),\u0275fromNgModule:!0}}function pp(s,...o){const u=[],c=new Set;let d;return fs(o,g=>{const v=g;mv(v,u,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&Ec(d,u),u}function Ec(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];_v(d,g=>{o.push(g)})}}function mv(s,o,u,c){if(!(s=K(s)))return!1;let d=null,g=di(s);const v=!g&&Xt(s);if(g||v){if(v&&!v.standalone)return!1;d=s}else{const C=s.ngModule;if(g=di(C),!g)return!1;d=C}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of C)mv(S,o,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let S;c.add(d);try{fs(g.imports,R=>{mv(R,o,u,c)&&(S||(S=[]),S.push(R))})}finally{}void 0!==S&&Ec(S,o)}if(!I){const S=si(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:ze},{provide:mt,useValue:d,multi:!0},{provide:gv,useValue:()=>He(d),multi:!0})}const C=g.providers;null==C||I||_v(C,R=>{o.push(R)})}}return d!==s&&void 0!==s.providers}function _v(s,o){for(let u of s)Ce(u)&&(u=u.\u0275providers),Array.isArray(u)?_v(u,o):o(u)}const OE=re({provide:String,useValue:re});function Ic(s){return null!==s&&"object"==typeof s&&OE in s}function Qu(s){return"function"==typeof s}const gp=new dn("Set Injector scope."),Xu={},Ju={};let Pm;function br(){return void 0===Pm&&(Pm=new Wa),Pm}class za{}class yv extends za{get destroyed(){return this._destroyed}constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Io(o,v=>this.processProvider(v)),this.records.set(sT,Dr(void 0,this)),d.has("environment")&&this.records.set(za,Dr(void 0,this));const g=this.records.get(gp);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(mt.multi,ze,ft.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Hr(this),c=xn(void 0);try{return o()}finally{Hr(u),xn(c)}}get(o,u=En,c=ft.Default){this.assertNotDestroyed(),c=bt(c);const d=Hr(this),g=xn(void 0);try{if(!(c&ft.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function lT(s){return"function"==typeof s||"object"==typeof s&&s instanceof dn}(o)&&_n(o);I=C&&this.injectableDefInScope(C)?Dr(gr(o),Xu):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&ft.Self?br():this.parent).get(o,u=c&ft.Optional&&u===En?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Ar]=v[Ar]||[]).unshift(le(o)),d)throw v;return function $(s,o,u,c){const d=s[Ar];throw o[Bi]&&d.unshift(o[Bi]),s.message=function U(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==cn?s.slice(2):s;let d=le(o);if(Array.isArray(o))d=o.map(le).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):le(I)))}d=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(No,"\n  ")}`}("\n"+s.message,d,u,c),s[xr]=d,s[Ar]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{xn(g),Hr(d)}}resolveInjectorInitializers(){const o=Hr(this),u=xn(void 0);try{const c=this.get(gv.multi,ze,ft.Self);for(const d of c)d()}finally{Hr(o),xn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(le(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(o){let u=Qu(o=K(o))?o:K(o&&o.provide);const c=function Om(s){return Ic(s)?Dr(void 0,s.useValue):Dr(Ws(s),Xu)}(o);if(Qu(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Dr(void 0,Xu,!0),d.factory=()=>Nt(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===Xu&&(u.value=Ju,u.value=u.factory()),"object"==typeof u.value&&u.value&&function FE(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=K(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function gr(s){const o=_n(s),u=null!==o?o.factory:si(s);if(null!==u)return u;if(s instanceof dn)throw new fe(204,!1);if(s instanceof Function)return function mp(s){const o=s.length;if(o>0)throw function js(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new fe(204,!1);const u=function Jr(s){const o=s&&(s[$r]||s[wn]);return o?(function Rs(s){if(s.hasOwnProperty("name"))return s.name;(""+s).match(/^function\s*([^\s(]+)/)}(s),o):null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new fe(204,!1)}function Ws(s,o,u){let c;if(Qu(s)){const d=K(s);return si(d)||gr(d)}if(Ic(s))c=()=>K(s.useValue);else if(function Nm(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Nt(s.deps||[]));else if(function kE(s){return!(!s||!s.useExisting)}(s))c=()=>He(K(s.useExisting));else{const d=K(s&&(s.useClass||s.provide));if(!function km(s){return!!s.deps}(s))return si(d)||gr(d);c=()=>new d(...Nt(s.deps))}return c}function Dr(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Io(s,o){for(const u of s)Array.isArray(u)?Io(u,o):u&&Ce(u)?Io(u.\u0275providers,o):o(u)}class Cc{}class ui{}class vv{resolveComponentFactory(o){throw function el(s){const o=Error(`No component factory found for ${le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let dh=(()=>{class s{}return s.NULL=new vv,s})();function cT(){return hh(Hn(),Se())}function hh(s,o){return new bc(Pr(s,o))}let bc=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=cT,s})();function zt(s){return s instanceof bc?s.nativeElement:s}class fh{}let dT=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function ph(){const s=Se(),u=hr(Hn().index,s);return(ri(u)?u:s)[Ht]}(),s})(),hT=(()=>{class s{}return s.\u0275prov=tt({token:s,providedIn:"root",factory:()=>null}),s})();class VE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Co=new VE("15.2.5"),Fm={},Lm="ngOriginalError";function BE(s){return s[Lm]}class mr{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&BE(o);for(;u&&BE(u);)u=BE(u);return u||null}}function sa(s){return s instanceof Function?s():s}function nl(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}u=d+1}}const WE="ng-template";function _p(s,o,u){let c=0,d=!0;for(;c<s.length;){let g=s[c++];if("string"==typeof g&&d){const v=s[c++];if(u&&"class"===g&&-1!==nl(v.toLowerCase(),o,0))return!0}else{if(1===g){for(;c<s.length&&"string"==typeof(g=s[c++]);)if(g.toLowerCase()===o)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function Bm(s){return 4===s.type&&s.value!==WE}function gT(s,o,u){return o===(4!==s.type||u?s.value:WE)}function jm(s,o,u){let c=4;const d=s.attrs||[],g=function wv(s){for(let o=0;o<s.length;o++)if(as(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!gT(s,C,u)||""===C&&1===o.length){if(Oi(c))return!1;v=!0}}else{const S=8&c?C:o[++I];if(8&c&&null!==s.attrs){if(!_p(s.attrs,S,u)){if(Oi(c))return!1;v=!0}continue}const L=zE(8&c?"class":C,d,Bm(s),u);if(-1===L){if(Oi(c))return!1;v=!0;continue}if(""!==S){let W;W=L>g?"":d[L+1].toLowerCase();const J=8&c?W:null;if(J&&-1!==nl(J,S,0)||2&c&&S!==W){if(Oi(c))return!1;v=!0}}}}else{if(!v&&!Oi(c)&&!Oi(C))return!1;if(v&&Oi(C))continue;v=!1,c=C|1&c}}return Oi(c)||v}function Oi(s){return 0==(1&s)}function zE(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function $m(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function yp(s,o,u=!1){for(let c=0;c<o.length;c++)if(jm(s,o[c],u))return!0;return!1}function Ev(s,o){return s?":not("+o.trim()+")":o}function _T(s){let o=s[0],u=1,c=2,d="",g=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const I=s[++u];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Oi(v)&&(o+=Ev(g,d),d=""),c=v,g=g||!Oi(c);u++}return""!==d&&(o+=Ev(g,d)),o}const Lt={};function ZE(s){KE(Kt(),Se(),Wr()+s,!1)}function KE(s,o,u,c){if(!c)if(3==(3&o[kt])){const g=s.preOrderCheckHooks;null!==g&&Ql(o,g,u)}else{const g=s.preOrderHooks;null!==g&&ss(o,g,0,u)}Vs(u)}function Cv(s,o=null,u=null,c){const d=bv(s,o,u,c);return d.resolveInjectorInitializers(),d}function bv(s,o=null,u=null,c,d=new Set){const g=[u||ze,oT(s)];return c=c||("object"==typeof s?void 0:le(s)),new yv(g,o||br(),c||null,d)}let Sc=(()=>{class s{static create(u,c){if(Array.isArray(u))return Cv({name:""},c,u,"");{const d=u.name??"";return Cv({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=En,s.NULL=new Wa,s.\u0275prov=tt({token:s,providedIn:"any",factory:()=>He(sT)}),s.__NG_ELEMENT_ID__=-1,s})();function vh(s,o=ft.Default){const u=Se();return null===u?He(s,o):Yi(Hn(),u,K(s),o)}function rI(){throw new Error("invalid")}function iI(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const g=u[c+1];if(-1!==g){const v=s.data[g];Ru(u[c]),v.contentQueries(2,o[g],g)}}}function qm(s,o,u,c,d,g,v,I,C,S,R){const L=o.blueprint.slice();return L[hi]=d,L[kt]=76|c,(null!==R||s&&1024&s[kt])&&(L[kt]|=1024),Du(L),L[vn]=L[_a]=s,L[Dn]=u,L[ma]=v||s&&s[ma],L[Ht]=I||s&&s[Ht],L[Po]=C||s&&s[Po]||null,L[so]=S||s&&s[so]||null,L[bn]=g,L[fi]=function Qf(){return dm++}(),L[Rl]=R,L[cr]=2==o.type?s[cr]:L,L}function wh(s,o,u,c,d){let g=s.data[o];if(null===g)g=function xv(s,o,u,c,d){const g=Of(),v=Su(),C=s.data[o]=function NT(s,o,u,c,d,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C,C.prev=g)),C}(s,o,u,c,d),function Mu(){return Mt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=c,g.attrs=d;const v=function Ls(){const s=Mt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Ri(g,!0),g}function Cp(s,o,u,c){if(0===u)return-1;const d=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function Mv(s,o,u){xd(o);try{const c=s.viewQuery;null!==c&&e_(1,c,u);const d=s.template;null!==d&&Zm(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&iI(s,o),s.staticViewQueries&&e_(2,s.viewQuery,u);const g=s.components;null!==g&&function sI(s,o){for(let u=0;u<o.length;u++)$v(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[kt]&=-5,Ff()}}function bp(s,o,u,c){const d=o[kt];if(128!=(128&d)){xd(o);try{Du(o),function Gl(s){return Mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Zm(s,o,u,2,c);const v=3==(3&d);if(v){const S=s.preOrderCheckHooks;null!==S&&Ql(o,S,null)}else{const S=s.preOrderHooks;null!==S&&ss(o,S,0,null),jo(o,0)}if(function VT(s){for(let o=ep(s);null!==o;o=ju(o)){if(!o[_u])continue;const u=o[Fo];for(let c=0;c<u.length;c++){const d=u[c];512&d[kt]||Ca(d[vn],1),d[kt]|=512}}}(o),function Bv(s){for(let o=ep(s);null!==o;o=ju(o))for(let u=dr;u<o.length;u++){const c=o[u],d=c[et];fo(c)&&bp(d,c,d.template,c[Dn])}}(o),null!==s.contentQueries&&iI(s,o),v){const S=s.contentCheckHooks;null!==S&&Ql(o,S)}else{const S=s.contentHooks;null!==S&&ss(o,S,1),jo(o,1)}!function xT(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Vs(~d);else{const g=d,v=u[++c],I=u[++c];zl(v,g),I(2,o[g])}}}finally{Vs(-1)}}(s,o);const I=s.components;null!==I&&function MT(s,o){for(let u=0;u<o.length;u++)UT(s,o[u])}(o,I);const C=s.viewQuery;if(null!==C&&e_(2,C,c),v){const S=s.viewCheckHooks;null!==S&&Ql(o,S)}else{const S=s.viewHooks;null!==S&&ss(o,S,2),jo(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[kt]&=-41,512&o[kt]&&(o[kt]&=-513,Ca(o[vn],-1))}finally{Ff()}}}function Zm(s,o,u,c,d){const g=Wr(),v=2&c;try{Vs(-1),v&&o.length>Zt&&KE(s,o,Zt,!1),on(v?2:0,d),u(c,d)}finally{Vs(g),on(v?3:1,d)}}function Dp(s,o,u){if(ns(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}function bo(s,o,u){Dd()&&(function lI(s,o,u,c){const d=u.directiveStart,g=u.directiveEnd;yu(u)&&function Uv(s,o,u){const c=Pr(o,s),d=Rv(u),g=s[ma],v=Sp(s,qm(s,d,null,u.onPush?32:16,c,o,g,g.createRenderer(c,u),null,null,null));s[o.index]=v}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||cs(u,o),ai(c,o);const v=u.initialInputs;for(let I=d;I<g;I++){const C=s.data[I],S=Bs(o,s,I,u);ai(S,o),null!==v&&_N(0,I-d,S,C,0,v),Nr(C)&&(hr(u.index,o)[Dn]=Bs(o,s,I,u))}}(s,o,u,Pr(u,o)),64==(64&u.flags)&&Lv(s,o,u))}function sl(s,o,u=Pr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],I=-1===v?u(o,s):s[v];s[d++]=I}}}function Rv(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Km(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Km(s,o,u,c,d,g,v,I,C,S){const R=Zt+c,L=R+d,W=function RT(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Lt);return u}(R,L),J="function"==typeof S?S():S;return W[et]={type:s,blueprint:W,template:u,queries:null,viewQuery:I,declTNode:o,data:W.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:J,incompleteFirstPass:!1}}function Nv(s,o,u,c){const d=hI(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&fI(s).push(c,d.length-1))}function Tp(s,o,u,c){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const g=s[d];null===c?Pv(u,o,d,g):c.hasOwnProperty(d)&&Pv(u,o,c[d],g)}return u}function Pv(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function ki(s,o,u,c,d,g,v,I){const C=Pr(o,u);let R,S=o.inputs;!I&&null!=S&&(R=S[c])?(Gv(s,u,R,c,d),yu(o)&&Ym(u,o.index)):3&o.type&&(c=function oI(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,g.setProperty(C,c,d))}function Ym(s,o){const u=hr(o,s);16&u[kt]||(u[kt]|=32)}function kv(s,o,u,c){if(Dd()){const d=null===c?null:{"":-1},g=function OT(s,o){const u=s.directiveRegistry;let c=null,d=null;if(u)for(let g=0;g<u.length;g++){const v=u[g];if(yp(o,v.selectors,!1))if(c||(c=[]),Nr(v))if(null!==v.findHostDirectiveDefs){const I=[];d=d||new Map,v.findHostDirectiveDefs(v,I,d),c.unshift(...I,v),Rc(s,o,I.length)}else c.unshift(v),Rc(s,o,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,c,d),c.push(v)}return null===c?null:[c,d]}(s,u);let v,I;null===g?v=I=null:[v,I]=g,null!==v&&aI(s,o,u,v,d,I),d&&function Xm(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=u[o[d+1]];if(null==g)throw new fe(-301,!1);c.push(o[d],g)}}}(u,c,d)}u.mergedAttrs=us(u.mergedAttrs,u.attrs)}function aI(s,o,u,c,d,g){for(let S=0;S<c.length;S++)Ra(cs(u,o),s,c[S].type);!function kT(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let S=0;S<c.length;S++){const R=c[S];R.providersResolver&&R.providersResolver(R)}let v=!1,I=!1,C=Cp(s,o,c.length,null);for(let S=0;S<c.length;S++){const R=c[S];u.mergedAttrs=us(u.mergedAttrs,R.hostAttrs),FT(s,u,o,C,R),Vv(C,R,d),null!==R.contentQueries&&(u.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(u.flags|=64);const L=R.type.prototype;!v&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),v=!0),!I&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),C++}!function Ov(s,o,u){const d=o.directiveEnd,g=s.data,v=o.attrs,I=[];let C=null,S=null;for(let R=o.directiveStart;R<d;R++){const L=g[R],W=u?u.get(L):null,me=W?W.outputs:null;C=Tp(L.inputs,R,C,W?W.inputs:null),S=Tp(L.outputs,R,S,me);const Le=null===C||null===v||Bm(o)?null:yN(C,R,v);I.push(Le)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=C,o.outputs=S}(s,u,g)}function Lv(s,o,u){const c=u.directiveStart,d=u.directiveEnd,g=u.index,v=function kf(){return Mt.lFrame.currentDirectiveIndex}();try{Vs(g);for(let I=c;I<d;I++){const C=s.data[I],S=o[I];is(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&cI(C,S)}}finally{Vs(-1),is(v)}}function cI(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Rc(s,o,u){o.componentOffset=u,(s.components||(s.components=[])).push(o.index)}function Vv(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Nr(o)&&(u[""]=s)}}function FT(s,o,u,c,d){s.data[c]=d;const g=d.factory||(d.factory=si(d.type)),v=new Cr(g,Nr(d),vh);s.blueprint[c]=v,u[c]=v,function Fv(s,o,u,c,d){const g=d.hostBindings;if(g){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const I=~o.index;(function uI(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(v)!=I&&v.push(I),v.push(u,c,g)}}(s,o,c,Cp(s,u,d.hostVars,Lt),d)}function Do(s,o,u,c,d,g){const v=Pr(s,o);!function dI(s,o,u,c,d,g,v){if(null==g)s.removeAttribute(o,d,u);else{const I=null==v?De(g):v(g,c||"",d);s.setAttribute(o,d,I,u)}}(o[Ht],v,g,s.value,u,c,d)}function _N(s,o,u,c,d,g){const v=g[o];if(null!==v){const I=c.setInput;for(let C=0;C<v.length;){const S=v[C++],R=v[C++],L=v[C++];null!==I?c.setInput(u,L,S,R):u[R]=L}}}function yN(s,o,u){let c=null,d=0;for(;d<u.length;){const g=u[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===c&&(c=[]);const v=s[g];for(let I=0;I<v.length;I+=2)if(v[I]===o){c.push(g,v[I+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function LT(s,o,u,c){return[s,!0,!1,o,null,0,c,u,null,null]}function UT(s,o){const u=hr(o,s);if(fo(u)){const c=u[et];48&u[kt]?bp(c,u,c.template,u[Dn]):u[Hi]>0&&jv(u)}}function jv(s){for(let c=ep(s);null!==c;c=ju(c))for(let d=dr;d<c.length;d++){const g=c[d];if(fo(g))if(512&g[kt]){const v=g[et];bp(v,g,v.template,g[Dn])}else g[Hi]>0&&jv(g)}const u=s[et].components;if(null!==u)for(let c=0;c<u.length;c++){const d=hr(u[c],s);fo(d)&&d[Hi]>0&&jv(d)}}function $v(s,o){const u=hr(o,s),c=u[et];(function zs(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Mv(c,u,u[Dn])}function Sp(s,o){return s[Oo]?s[oo][ti]=o:s[Oo]=o,s[oo]=o,o}function Nc(s){for(;s;){s[kt]|=32;const o=ja(s);if(wd(s)&&!o)return s;s=o}return null}function Jm(s,o,u,c=!0){const d=o[ma];d.begin&&d.begin();try{bp(s,o,s.template,u)}catch(v){throw c&&Eh(o,v),v}finally{d.end&&d.end()}}function e_(s,o,u){Ru(0),o(s,u)}function hI(s){return s[io]||(s[io]=[])}function fI(s){return s.cleanup||(s.cleanup=[])}function Eh(s,o){const u=s[so],c=u?u.get(mr,null):null;c&&c.handleError(o)}function Gv(s,o,u,c,d){for(let g=0;g<u.length;){const v=u[g++],I=u[g++],C=o[v],S=s.data[v];null!==S.setInput?S.setInput(C,d,c,I):C[I]=d}}function ol(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?g=I:1==g?d=ae(d,I):2==g&&(c=ae(c,I+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function al(s,o,u,c,d=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(Rn(g)),ii(g))for(let I=dr;I<g.length;I++){const C=g[I],S=C[et].firstChild;null!==S&&al(C[et],C,S,c)}const v=u.type;if(8&v)al(s,o,u.child,c);else if(32&v){const I=Jo(u,o);let C;for(;C=I();)c.push(C)}else if(16&v){const I=_i(o,u);if(Array.isArray(I))c.push(...I);else{const C=ja(o[cr]);al(C[et],C,I,c,!0)}}u=d?u.projectionNext:u.next}return c}class Ap{get rootNodes(){const o=this._lView,u=o[et];return al(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Dn]}set context(o){this._lView[Dn]=o}get destroyed(){return 128==(128&this._lView[kt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[vn];if(ii(o)){const u=o[pi],c=u?u.indexOf(this):-1;c>-1&&($u(o,c),La(u,c))}this._attachedToViewContainer=!1}ym(this._lView[et],this._lView)}onDestroy(o){Nv(this._lView[et],this._lView,null,o)}markForCheck(){Nc(this._cdRefInjectingView||this._lView)}detach(){this._lView[kt]&=-65}reattach(){this._lView[kt]|=64}detectChanges(){Jm(this._lView[et],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ea(s,o){na(s,o,o[Ht],2,null,null)}(this._lView[et],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=o}}class BT extends Ap{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Jm(o[et],o,o[Dn],!1)}checkNoChanges(){}get context(){return null}}class pI extends dh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Xt(o);return new t_(u,this.ngModule)}}function gI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class $T{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=bt(c);const d=this.injector.get(o,Fm,c);return d!==Fm||u===Fm?d:this.parentInjector.get(o,u,c)}}class t_ extends ui{get inputs(){return gI(this.componentDef.inputs)}get outputs(){return gI(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function yT(s){return s.map(_T).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,c,d){let g=(d=d||this.ngModule)instanceof za?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new $T(o,g):o,I=v.get(fh,null);if(null===I)throw new fe(407,!1);const C=v.get(hT,null),S=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",L=c?function Mc(s,o,u){return s.selectRootElement(o,u===ee.ShadowDom)}(S,c,this.componentDef.encapsulation):mm(S,R,function jT(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),W=this.componentDef.onPush?288:272,J=Km(0,null,null,1,0,null,null,null,null,null),me=qm(null,J,null,W,null,null,I,S,C,v,null);let Le,Ye;xd(me);try{const at=this.componentDef;let At,Ne=null;at.findHostDirectiveDefs?(At=[],Ne=new Map,at.findHostDirectiveDefs(at,At,Ne),At.push(at)):At=[at];const Rt=function n_(s,o){const u=s[et],c=Zt;return s[c]=o,wh(u,c,2,"#host",null)}(me,L),Un=function Ih(s,o,u,c,d,g,v,I){const C=d[et];!function GT(s,o,u,c){for(const d of s)o.mergedAttrs=us(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(ol(o,o.mergedAttrs,!0),null!==u&&hv(c,u,o))}(c,s,o,v);const S=g.createRenderer(o,u),R=qm(d,Rv(u),null,u.onPush?32:16,d[s.index],s,g,S,I||null,null,null);return C.firstCreatePass&&Rc(C,s,c.length-1),Sp(d,R),d[s.index]=R}(Rt,L,at,At,me,I,S);Ye=Ll(J,Zt),L&&function zT(s,o,u,c){if(c)Ho(s,u,["ng-version",Co.full]);else{const{attrs:d,classes:g}=function vT(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++c]):8===d&&u.push(g);else{if(!Oi(d))break;d=g}c++}return{attrs:o,classes:u}}(o.selectors[0]);d&&Ho(s,u,d),g&&g.length>0&&Cm(s,u,g.join(" "))}}(S,at,L,c),void 0!==u&&function qT(s,o,u){const c=s.projection=[];for(let d=0;d<o.length;d++){const g=u[d];c.push(null!=g?Array.from(g):null)}}(Ye,this.ngContentSelectors,u),Le=function WT(s,o,u,c,d,g){const v=Hn(),I=d[et],C=Pr(v,d);aI(I,d,v,u,null,c);for(let R=0;R<u.length;R++)ai(Bs(d,I,v.directiveStart+R,v),d);Lv(I,d,v),C&&ai(C,d);const S=Bs(d,I,v.directiveStart+v.componentOffset,v);if(s[Dn]=d[Dn]=S,null!==g)for(const R of g)R(S,o);return Dp(I,v,s),S}(Un,at,At,Ne,me,[ZT]),Mv(J,me,null)}finally{Ff()}return new HT(this.componentType,Le,hh(Ye,me),me,Ye)}}class HT extends Cc{constructor(o,u,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new BT(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;Gv(g[et],g,d,o,u),Ym(g,this._tNode.index)}}get injector(){return new Oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function ZT(){const s=Hn();go(Se()[et],s)}function Wv(s){let o=function _I(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(Nr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new fe(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const v=s;v.inputs=zv(s.inputs),v.declaredInputs=zv(s.declaredInputs),v.outputs=zv(s.outputs);const I=d.hostBindings;I&&qv(s,I);const C=d.viewQuery,S=d.contentQueries;if(C&&yI(s,C),S&&YT(s,S),he(s.inputs,d.inputs),he(s.declaredInputs,d.declaredInputs),he(s.outputs,d.outputs),Nr(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const I=g[v];I&&I.ngInherit&&I(s),I===Wv&&(u=!1)}}o=Object.getPrototypeOf(o)}!function KT(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=us(d.hostAttrs,u=us(u,d.hostAttrs))}}(c)}function zv(s){return s===Xe?{}:s===ze?[]:s}function yI(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function YT(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,g)=>{o(c,d,g),u(c,d,g)}:o}function qv(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}function Oc(s){return!!kc(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function kc(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function vi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Qv(s,o,u,c){const d=Se();return vi(d,po(),o)&&(Kt(),Do(pn(),d,s,o,u,c)),Qv}function bh(s,o,u,c){return vi(s,po(),u)?o+De(u)+c:Lt}function o_(s,o,u,c,d,g,v,I){const C=Se(),S=Kt(),R=s+Zt,L=S.firstCreatePass?function xI(s,o,u,c,d,g,v,I,C){const S=o.consts,R=wh(o,s,4,v||null,Mi(S,I));kv(o,u,R,Mi(S,C)),go(o,R);const L=R.tView=Km(2,R,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),L.queries=o.queries.embeddedTView(R)),R}(R,S,C,o,u,c,d,g,v):S.data[R];Ri(L,!1);const W=C[Ht].createComment("");zu(S,C,W,L),ai(W,C),Sp(C,C[R]=LT(W,C,W,L)),Lo(L)&&bo(S,C,L),null!=v&&sl(C,L,I)}function Uc(s){return function zi(s,o){return s[o]}(function xu(){return Mt.lFrame.contextLView}(),Zt+s)}function Mp(s,o,u){const c=Se();return vi(c,po(),o)&&ki(Kt(),pn(),c,s,o,c[Ht],u,!1),Mp}function tw(s,o,u,c,d){const v=d?"class":"style";Gv(s,u,o.inputs[v],v,c)}function Bc(s,o,u,c){const d=Se(),g=Kt(),v=Zt+s,I=d[Ht],C=g.firstCreatePass?function RI(s,o,u,c,d,g){const v=o.consts,C=wh(o,s,2,c,Mi(v,d));return kv(o,u,C,Mi(v,g)),null!==C.attrs&&ol(C,C.attrs,!1),null!==C.mergedAttrs&&ol(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(v,g,d,o,u,c):g.data[v],S=d[v]=mm(I,o,function Jg(){return Mt.lFrame.currentNamespace}()),R=Lo(C);return Ri(C,!0),hv(I,S,C),32!=(32&C.flags)&&zu(g,d,S,C),0===function Bl(){return Mt.lFrame.elementDepthCount}()&&ai(S,d),function jl(){Mt.lFrame.elementDepthCount++}(),R&&(bo(g,d,C),Dp(g,C,d)),null!==c&&sl(d,C),Bc}function jc(){let s=Hn();Su()?function Au(){Mt.lFrame.isParent=!1}():(s=s.parent,Ri(s,!1));const o=s;!function $l(){Mt.lFrame.elementDepthCount--}();const u=Kt();return u.firstCreatePass&&(go(u,s),ns(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Bf(s){return 0!=(8&s.flags)}(o)&&tw(u,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Us(s){return 0!=(16&s.flags)}(o)&&tw(u,o,Se(),o.stylesWithoutHost,!1),jc}function a_(s,o,u,c){return Bc(s,o,u,c),jc(),a_}function OI(){return Se()}function iw(s){return!!s&&"function"==typeof s.then}function Rp(s){return!!s&&"function"==typeof s.subscribe}const kI=Rp;function sw(s,o,u,c){const d=Se(),g=Kt(),v=Hn();return function FI(s,o,u,c,d,g,v){const I=Lo(c),S=s.firstCreatePass&&fI(s),R=o[Dn],L=hI(o);let W=!0;if(3&c.type||v){const Le=Pr(c,o),Ye=v?v(Le):Le,at=L.length,At=v?Rt=>v(Rn(Rt[c.index])):c.index;let Ne=null;if(!v&&I&&(Ne=function nS(s,o,u,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===u&&d[g+1]===c){const I=o[io],C=d[g+2];return I.length>C?I[C]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,c.index)),null!==Ne)(Ne.__ngLastListenerFn__||Ne).__ngNextListenerFn__=g,Ne.__ngLastListenerFn__=g,W=!1;else{g=VI(c,o,R,g,!1);const Rt=u.listen(Ye,d,g);L.push(g,Rt),S&&S.push(d,At,at,at+1)}}else g=VI(c,o,R,g,!1);const J=c.outputs;let me;if(W&&null!==J&&(me=J[d])){const Le=me.length;if(Le)for(let Ye=0;Ye<Le;Ye+=2){const Un=o[me[Ye]][me[Ye+1]].subscribe(g),wr=L.length;L.push(g,Un),S&&S.push(d,c.index,wr,-(wr+1))}}}(g,d,d[Ht],v,s,o,c),sw}function LI(s,o,u,c){try{return on(6,o,u),!1!==u(c)}catch(d){return Eh(s,d),!1}finally{on(7,o,u)}}function VI(s,o,u,c,d){return function g(v){if(v===Function)return c;Nc(s.componentOffset>-1?hr(s.index,o):o);let C=LI(o,u,c,v),S=g.__ngNextListenerFn__;for(;S;)C=LI(o,u,S,v)&&C,S=S.__ngNextListenerFn__;return d&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function wi(s=1){return function Md(s){return(Mt.lFrame.contextLView=function Qg(s,o){for(;s>0;)o=o[_a],s--;return o}(s,Mt.lFrame.contextLView))[Dn]}(s)}function ow(s,o,u){return Np(s,"",o,"",u),ow}function Np(s,o,u,c,d){const g=Se(),v=bh(g,o,u,c);return v!==Lt&&ki(Kt(),pn(),g,s,v,g[Ht],d,!1),Np}function uw(s,o){return s<<17|o<<2}function Za(s){return s>>17&32767}function cw(s){return 2|s}function Mh(s){return(131068&s)>>2}function jI(s,o){return-131069&s|o<<2}function c_(s){return 1|s}function dw(s,o,u,c,d){const g=s[u+1],v=null===o;let I=c?Za(g):Mh(g),C=!1;for(;0!==I&&(!1===C||v);){const R=s[I+1];lS(s[I],o)&&(C=!0,s[I+1]=c?c_(R):cw(R)),I=c?Za(R):Mh(R)}C&&(s[u+1]=c?cw(g):c_(g))}function lS(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ni(s,o)>=0}function YI(s,o){return function Ks(s,o,u,c){const d=Se(),g=Kt(),v=function qi(s){const o=Mt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);g.firstUpdatePass&&function mS(s,o,u,c){const d=s.data;if(null===d[u+1]){const g=d[Wr()],v=function Ei(s,o){return o>=s.expandoStartIndex}(s,u);(function Rh(s,o){return 0!=(s.flags&(o?8:16))})(g,c)&&null===o&&!v&&(o=!1),o=function XI(s,o,u,c){const d=function ql(s){const o=Mt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=O(u=Is(null,s,o,u,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(u=Is(d,s,o,u,c),null===g){let C=function ge(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Mh(c))return s[Za(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=Is(null,s,o,C[1],c),C=O(C,o.attrs,c),function So(s,o,u,c){s[Za(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else g=function Ka(s,o,u){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=O(c,s[g].hostAttrs,u);return O(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(d,g,o,c),function aS(s,o,u,c,d,g){let v=g?o.classBindings:o.styleBindings,I=Za(v),C=Mh(v);s[c]=u;let R,S=!1;if(Array.isArray(u)?(R=u[1],(null===R||Ni(u,R)>0)&&(S=!0)):R=u,d)if(0!==C){const W=Za(s[I+1]);s[c+1]=uw(W,I),0!==W&&(s[W+1]=jI(s[W+1],c)),s[I+1]=function lw(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=uw(I,0),0!==I&&(s[I+1]=jI(s[I+1],c)),I=c;else s[c+1]=uw(C,0),0===I?I=c:s[C+1]=jI(s[C+1],c),C=c;S&&(s[c+1]=cw(s[c+1])),dw(s,R,c,!0),dw(s,R,c,!1),function uS(s,o,u,c,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&Ni(g,o)>=0&&(u[c+1]=c_(u[c+1]))}(o,R,s,c,g),v=uw(I,C),g?o.classBindings=v:o.styleBindings=v}(d,g,o,u,v,c)}}(g,s,v,c),o!==Lt&&vi(d,v,o)&&function d_(s,o,u,c,d,g,v,I){if(!(3&o.type))return;const C=s.data,S=C[I+1],R=function $I(s){return 1==(1&s)}(S)?Vt(C,o,u,d,Mh(S),v):void 0;Wc(R)||(Wc(g)||function ul(s){return 2==(2&s)}(S)&&(g=Vt(C,null,u,d,I,v)),function Im(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:ms.DashCase;null==d?s.removeStyle(u,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=ms.Important),s.setStyle(u,c,d,g))}}(c,v,Wi(Wr(),u),d,g))}(g,g.data[Wr()],d,d[Ht],s,d[v+1]=function h_(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=le(A(s)))),s}(o,u),c,v)}(s,o,null,!0),YI}function Is(s,o,u,c,d){let g=null;const v=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<v&&(g=o[I],c=O(c,g.hostAttrs,d),g!==s);)I++;return null!==s&&(u.directiveStylingLast=I),c}function O(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Wt(s,v,!!u||o[++g]))}return void 0===s?null:s}function Vt(s,o,u,c,d,g){const v=null===o;let I;for(;d>0;){const C=s[d],S=Array.isArray(C),R=S?C[1]:C,L=null===R;let W=u[d+1];W===Lt&&(W=L?ze:void 0);let J=L?fr(W,c):R===c?W:void 0;if(S&&!Wc(J)&&(J=fr(C,c)),Wc(J)&&(I=J,v))return I;const me=s[d+1];d=v?Za(me):Mh(me)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(I=fr(C,c))}return I}function Wc(s){return void 0!==s}function JI(s,o=""){const u=Se(),c=Kt(),d=s+Zt,g=c.firstCreatePass?wh(c,d,1,o,null):c.data[d],v=u[d]=function Qd(s,o){return s.createText(o)}(u[Ht],o);zu(c,u,v,g),Ri(g,!1)}function Op(s){return f_("",s,""),Op}function f_(s,o,u){const c=Se(),d=bh(c,s,o,u);return d!==Lt&&function qa(s,o,u){const c=Wi(o,s);!function pc(s,o,u){s.setValue(o,u)}(s[Ht],c,u)}(c,Wr(),d),f_}const Ao=void 0;var CS=["en",[["a","p"],["AM","PM"],Ao],[["AM","PM"],Ao,Ao],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ao,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ao,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ao,"{1} 'at' {0}",Ao],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function IS(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Qa={};function w_(s){const o=function vw(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Lp(o);if(u)return u;const c=o.split("-")[0];if(u=Lp(c),u)return u;if("en"===c)return CS;throw new fe(701,!1)}function yw(s){return w_(s)[Ct.PluralCase]}function Lp(s){return s in Qa||(Qa[s]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[s]),Qa[s]}var Ct=(()=>((Ct=Ct||{})[Ct.LocaleId=0]="LocaleId",Ct[Ct.DayPeriodsFormat=1]="DayPeriodsFormat",Ct[Ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ct[Ct.DaysFormat=3]="DaysFormat",Ct[Ct.DaysStandalone=4]="DaysStandalone",Ct[Ct.MonthsFormat=5]="MonthsFormat",Ct[Ct.MonthsStandalone=6]="MonthsStandalone",Ct[Ct.Eras=7]="Eras",Ct[Ct.FirstDayOfWeek=8]="FirstDayOfWeek",Ct[Ct.WeekendRange=9]="WeekendRange",Ct[Ct.DateFormat=10]="DateFormat",Ct[Ct.TimeFormat=11]="TimeFormat",Ct[Ct.DateTimeFormat=12]="DateTimeFormat",Ct[Ct.NumberSymbols=13]="NumberSymbols",Ct[Ct.NumberFormats=14]="NumberFormats",Ct[Ct.CurrencyCode=15]="CurrencyCode",Ct[Ct.CurrencySymbol=16]="CurrencySymbol",Ct[Ct.CurrencyName=17]="CurrencyName",Ct[Ct.Currencies=18]="Currencies",Ct[Ct.Directionality=19]="Directionality",Ct[Ct.PluralCase=20]="PluralCase",Ct[Ct.ExtraData=21]="ExtraData",Ct))();const zc="en-US";let gC=zc;function S_(s,o,u,c,d){if(s=K(s),Array.isArray(s))for(let g=0;g<s.length;g++)S_(s[g],o,u,c,d);else{const g=Kt(),v=Se();let I=Qu(s)?s:K(s.provide),C=Ws(s);const S=Hn(),R=1048575&S.providerIndexes,L=S.directiveStart,W=S.providerIndexes>>20;if(Qu(s)||!s.multi){const J=new Cr(C,d,vh),me=Lw(I,o,d?R:R+W,L);-1===me?(Ra(cs(S,v),g,I),Fw(g,s,o.length),o.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),u.push(J),v.push(J)):(u[me]=J,v[me]=J)}else{const J=Lw(I,o,R+W,L),me=Lw(I,o,R,R+W),Ye=me>=0&&u[me];if(d&&!Ye||!d&&!(J>=0&&u[J])){Ra(cs(S,v),g,I);const at=function RC(s,o,u,c,d){const g=new Cr(s,u,vh);return g.multi=[],g.index=o,g.componentProviders=0,MC(g,d,c&&!u),g}(d?ng:jS,u.length,d,c,C);!d&&Ye&&(u[me].providerFactory=at),Fw(g,s,o.length,0),o.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),u.push(at),v.push(at)}else Fw(g,s,J>-1?J:me,MC(u[d?me:J],C,!d&&c));!d&&c&&Ye&&u[me].componentProviders++}}}function Fw(s,o,u,c){const d=Qu(o),g=function uT(s){return!!s.useClass}(o);if(d||g){const C=(g?K(o.useClass):o).prototype.ngOnDestroy;if(C){const S=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=S.indexOf(u);-1===R?S.push(u,[c,C]):S[R+1].push(c,C)}else S.push(u,C)}}}function MC(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Lw(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function jS(s,o,u,c){return ca(this.multi,[])}function ng(s,o,u,c){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Bs(u,u[et],this.providerFactory.index,c);g=I.slice(0,v),ca(d,g);for(let C=v;C<I.length;C++)g.push(I[C])}else g=[],ca(d,g);return g}function ca(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Vw(s,o=[]){return u=>{u.providersResolver=(c,d)=>function BS(s,o,u){const c=Kt();if(c.firstCreatePass){const d=Nr(s);S_(u,c.data,c.blueprint,d,!0),S_(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Qc{}class Xc{}function $S(s,o){return new Uw(s,o??null)}class Uw extends Qc{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pI(this);const c=sr(o);this._bootstrapComponents=sa(c.bootstrap),this._r3Injector=bv(o,u,[{provide:Qc,useValue:this},{provide:dh,useValue:this.componentFactoryResolver}],le(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Bw extends Xc{constructor(o){super(),this.moduleType=o}create(o){return new Uw(this.moduleType,o)}}class NC extends Qc{constructor(o,u,c){super(),this.componentFactoryResolver=new pI(this),this.instance=null;const d=new yv([...o,{provide:Qc,useValue:this},{provide:dh,useValue:this.componentFactoryResolver}],u||br(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function A_(s,o,u=null){return new NC(s,o,u).injector}let jw=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=pp(0,u.type),d=c.length>0?A_([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=tt({token:s,providedIn:"environment",factory:()=>new s(He(za))}),s})();function x_(s){s.getStandaloneInjector=o=>o.get(jw).getOrCreateStandaloneInjector(s)}function U_(s){return o=>{setTimeout(s,void 0,o)}}const xo=class V_ extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,g=u||(()=>null),v=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),g=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(g=U_(g),d&&(d=U_(d)),v&&(v=U_(v)));const I=super.subscribe({next:d,error:g,complete:v});return o instanceof Q.w0&&o.add(I),I}};function ed(){return this._results[Symbol.iterator]()}class B_{get changes(){return this._changes||(this._changes=new xo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=B_.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=ed)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=function kr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Vd(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=o[c];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let $h=(()=>{class s{}return s.__NG_ELEMENT_ID__=j_,s})();const GC=$h,WC=class extends GC{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tView,d=qm(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[ko]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[ni];return null!==v&&(d[ni]=v.createEmbeddedView(c)),Mv(c,d,o),new Ap(d)}};function j_(){return Ci(Hn(),Se())}function Ci(s,o){return 4&s.type?new WC(o,s,hh(s,o)):null}let ag=(()=>{class s{}return s.__NG_ELEMENT_ID__=zC,s})();function zC(){return KC(Hn(),Se())}const Hh=ag,qC=class extends Hh{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return hh(this._hostTNode,this._hostLView)}get injector(){return new Oa(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ma(this._hostTNode,this._hostLView);if(Jl(o)){const u=ls(o,this._hostLView),c=mo(o);return new Oa(u[et].data[c+8],u)}return new Oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=ZC(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-dr}createEmbeddedView(o,u,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const v=o.createEmbeddedView(u||{},g);return this.insert(v,d),v}createComponent(o,u,c,d,g){const v=o&&!function wo(s){return"function"==typeof s}(o);let I;if(v)I=u;else{const L=u||{};I=L.index,c=L.injector,d=L.projectableNodes,g=L.environmentInjector||L.ngModuleRef}const C=v?o:new t_(Xt(o)),S=c||this.parentInjector;if(!g&&null==C.ngModule){const W=(v?S:this.parentInjector).get(za,null);W&&(g=W)}const R=C.create(S,d,void 0,g);return this.insert(R.hostView,I),R}insert(o,u){const c=o._lView,d=c[et];if(function bd(s){return ii(s[vn])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const L=c[vn],W=new qC(L,L[bn],L[vn]);W.detach(W.indexOf(o))}}const g=this._adjustIndex(u),v=this._lContainer;!function Jd(s,o,u,c){const d=dr+c,g=u.length;c>0&&(u[d-1][ti]=o),c<g-dr?(o[ti]=u[d],ac(u,dr+c,o)):(u.push(o),o[ti]=null),o[vn]=u;const v=o[ko];null!==v&&u!==v&&function ta(s,o){const u=s[Fo];o[cr]!==o[vn][vn][cr]&&(s[_u]=!0),null===u?s[Fo]=[o]:u.push(o)}(v,o);const I=o[ni];null!==I&&I.insertView(s),o[kt]|=64}(d,c,v,g);const I=ys(g,v),C=c[Ht],S=Gu(C,v[uo]);return null!==S&&function _m(s,o,u,c,d,g){c[hi]=d,c[bn]=o,na(s,c,u,1,d,g)}(d,v[bn],C,c,S,I),o.attachToViewContainerRef(),ac(ug(v),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=ZC(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=$u(this._lContainer,u);c&&(La(ug(this._lContainer),u),ym(c[et],c))}detach(o){const u=this._adjustIndex(o,-1),c=$u(this._lContainer,u);return c&&null!=La(ug(this._lContainer),u)?new Ap(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function ZC(s){return s[pi]}function ug(s){return s[pi]||(s[pi]=[])}function KC(s,o){let u;const c=o[s.index];if(ii(c))u=c;else{let d;if(8&s.type)d=Rn(c);else{const g=o[Ht];d=g.createComment("");const v=Pr(s,o);_s(g,Gu(g,v),d,function SE(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=u=LT(c,o,d,s),Sp(o,u)}return new qC(u,s,o)}class qw{constructor(o){this.queryList=o,this.matches=null}clone(){return new qw(this.queryList)}setDirty(){this.queryList.setDirty()}}class $_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let g=0;g<c;g++){const v=u.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new $_(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==oe(o,u).matches&&this.queries[u].setDirty()}}class YC{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Gh{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new Gh(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Zw{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Zw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,u,QC(u,g)),this.matchTNodeWithReadOption(o,u,_o(u,o,g,!1,!1))}else c===$h?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,_o(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===bc||d===ag||d===$h&&4&u.type)this.addMatch(u.index,-2);else{const g=_o(u,o,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function QC(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Wh(s,o,u,c){return-1===u?function Qr(s,o){return 11&s.type?hh(s,o):4&s.type?Ci(s,o):null}(o,s):-2===u?function dl(s,o,u){return u===bc?hh(o,s):u===$h?Ci(o,s):u===ag?KC(o,s):void 0}(s,o,c):Bs(s,s[et],u,o)}function H_(s,o,u,c){const d=o[ni].queries[c];if(null===d.matches){const g=s.data,v=u.matches,I=[];for(let C=0;C<v.length;C+=2){const S=v[C];I.push(S<0?null:Wh(o,g[S],v[C+1],u.metadata.read))}d.matches=I}return d.matches}function Kw(s,o,u,c){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const v=H_(s,o,d,u);for(let I=0;I<g.length;I+=2){const C=g[I];if(C>0)c.push(v[I/2]);else{const S=g[I+1],R=o[-C];for(let L=dr;L<R.length;L++){const W=R[L];W[ko]===W[vn]&&Kw(W[et],W,S,c)}if(null!==R[Fo]){const L=R[Fo];for(let W=0;W<L.length;W++){const J=L[W];Kw(J[et],J,S,c)}}}}}return c}function Oe(s){const o=Se(),u=Kt(),c=Ad();Ru(c+1);const d=oe(u,c);if(s.dirty&&function Vl(s){return 4==(4&s[kt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Kw(u,o,c,[]):H_(u,o,d,c);s.reset(g,zt),s.notifyOnChanges()}return!0}return!1}function hl(s,o,u,c){const d=Kt();if(d.firstCreatePass){const g=Hn();(function XC(s,o,u){null===s.queries&&(s.queries=new Gh),s.queries.track(new Zw(o,u))})(d,new YC(o,u,c),g.index),function Ke(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function ht(s,o,u){const c=new B_(4==(4&u));Nv(s,o,c,c.destroy),null===o[ni]&&(o[ni]=new $_),o[ni].queries.push(new qw(c))}(d,Se(),u)}function G_(){return function st(s,o){return s[ni].queries[o].queryList}(Se(),Ad())}function oe(s,o){return s.queries.getByIndex(o)}function W_(s){return!!sr(s)}function fg(...s){}const ab=new dn("Application Initializer");let or=(()=>{class s{constructor(u){this.appInits=u,this.resolve=fg,this.reject=fg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(iw(g))u.push(g);else if(kI(g)){const v=new Promise((I,C)=>{g.subscribe({complete:I,error:C})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(He(ab,8))},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const ub=new dn("AppId",{providedIn:"root",factory:function nu(){return`${ru()}${ru()}${ru()}`}});function ru(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const J_=new dn("Platform Initializer"),lb=new dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let ty=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const bs=new dn("LocaleId",{providedIn:"root",factory:()=>nt(bs,ft.Optional|ft.SkipSelf)||function sd(){return typeof $localize<"u"&&$localize.locale||zc}()}),pg=new dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class e0{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let ad=(()=>{class s{compileModuleSync(u){return new Bw(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=sa(sr(u).declarations).reduce((v,I)=>{const C=Xt(I);return C&&v.push(new t_(C)),v},[]);return new e0(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const oA=(()=>Promise.resolve(0))();function r0(s){typeof Zone>"u"?oA.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ur{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xo(!1),this.onMicrotaskEmpty=new xo(!1),this.onStable=new xo(!1),this.onError=new xo(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function db(){let s=Pt.requestAnimationFrame,o=Pt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function rn(s){const o=()=>{!function fb(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Pt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,mn(s),s.isCheckStableRunning=!0,iy(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),mn(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,g,v,I)=>{try{return ud(s),u.invokeTask(d,g,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),sy(s)}},onInvoke:(u,c,d,g,v,I,C)=>{try{return ud(s),u.invoke(d,g,v,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),sy(s)}},onHasTask:(u,c,d,g)=>{u.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,mn(s),iy(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ur.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(Ur.isInAngularZone())throw new fe(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,hb,fg,fg);try{return g.runTask(v,u,c)}finally{g.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const hb={};function iy(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function mn(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function ud(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function sy(s){s._nesting--,iy(s)}class s0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xo,this.onMicrotaskEmpty=new xo,this.onStable=new xo,this.onError=new xo}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const o0=new dn(""),oy=new dn("");let u0,pb=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,u0||(function gb(s){u0=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ur.assertNotInAngularZone(),r0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())r0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(He(Ur),He(a0),He(oy))},s.\u0275prov=tt({token:s,factory:s.\u0275fac}),s})(),a0=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return u0?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const iu=!1;let gl=null;const l0=new dn("AllowMultipleToken"),c0=new dn("PlatformDestroyListeners"),d0=new dn("appBootstrapListener");class lA{constructor(o,u){this.name=o,this.token=u}}function h0(s,o,u=[]){const c=`Platform: ${o}`,d=new dn(c);return(g=[])=>{let v=uy();if(!v||v.injector.get(l0,!1)){const I=[...u,...g,{provide:d,useValue:!0}];s?s(I):function ar(s){if(gl&&!gl.get(l0,!1))throw new fe(400,!1);gl=s;const o=s.get(Nn);(function Xr(s){const o=s.get(J_,null);o&&o.forEach(u=>u())})(s)}(function Fi(s=[],o){return Sc.create({name:o,providers:[{provide:gp,useValue:"platform"},{provide:c0,useValue:new Set([()=>gl=null])},...s]})}(I,c))}return function Qh(s){const o=uy();if(!o)throw new fe(401,!1);return o}()}}function uy(){return gl?.get(Nn)??null}let Nn=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function ly(s,o){let u;return u="noop"===s?new s0:("zone.js"===s?void 0:s)||new Ur(o),u}(c?.ngZone,function mb(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Ur,useValue:d}];return d.run(()=>{const v=Sc.create({providers:g,parent:this.injector,name:u.moduleType.name}),I=u.create(v),C=I.injector.get(mr,null);if(!C)throw new fe(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:R=>{C.handleError(R)}});I.onDestroy(()=>{cd(this._modules,I),S.unsubscribe()})}),function ml(s,o,u){try{const c=u();return iw(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,d,()=>{const S=I.injector.get(or);return S.runInitializers(),S.donePromise.then(()=>(function E_(s){Qe(s,"Expected localeId to be defined"),"string"==typeof s&&(gC=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(bs,zc)||zc),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,c=[]){const d=Xh({},c);return function uA(s,o,u){const c=new Bw(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const c=u.injector.get(ld);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new fe(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fe(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(c0,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(He(Sc))},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Xh(s,o){return Array.isArray(o)?o.reduce(Xh,s):{...s,...o}}let ld=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new k.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Ur.assertNotInAngularZone(),r0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Ur.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ne.T)(g,v.pipe((0,te.B)()))}bootstrap(u,c){const d=u instanceof ui;if(!this._injector.get(or).done){!d&&ks(u);throw new fe(405,iu)}let v;v=d?u:this._injector.get(dh).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const I=function Yh(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Qc),S=v.create(Sc.NULL,[],c||v.selector,I),R=S.location.nativeElement,L=S.injector.get(o0,null);return L?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),cd(this.components,S),L?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new fe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;cd(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(d0,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>cd(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new fe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(He(Ur),He(za),He(mr))},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function cd(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function su(){return!1}let dy=(()=>{class s{}return s.__NG_ELEMENT_ID__=p0,s})();function p0(s){return function dd(s,o,u){if(yu(s)&&!u){const c=hr(s.index,o);return new Ap(c,c)}return 47&s.type?new Ap(o[cr],o):null}(Hn(),Se(),16==(16&s))}class hd{constructor(){}supports(o){return Oc(o)}create(o){return new Cb(o)}}const Ib=(s,o)=>o;class Cb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Ib}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,g=null;for(;u||c;){const v=!c||u&&u.currentIndex<Vn(c,d,g)?u:c,I=Vn(v,d,g),C=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{g||(g=[]);const S=I-d,R=C-d;if(S!=R){for(let W=0;W<S;W++){const J=W<g.length?g[W]:g[W]=0,me=J+W;R<=me&&me<S&&(g[W]=J+1)}g[v.previousIndex]=R-S}}I!==C&&o(v,I,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Oc(o))throw new fe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],v=this._trackByFn(I,g),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,g,v,I)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,I),c=!0),u=u._next}else d=0,function II(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,I,v,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,v,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,d)):o=this._addAfter(new yg(u,c),g,d),o}_verifyReinsertion(o,u,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new bb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class yg{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class bb{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new mA,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Vn(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class vg{constructor(){}supports(o){return o instanceof Map||kc(o)}create(){return new gy}}class gy{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||kc(o)))throw new fe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const c=new Db(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Db{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Tb(){return new fd([new hd])}let fd=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Tb()),deps:[[s,new M,new b]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new fe(901,!1)}}return s.\u0275prov=tt({token:s,providedIn:"root",factory:Tb}),s})();function v0(){return new vl([new vg])}let vl=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||v0()),deps:[[s,new M,new b]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new fe(901,!1)}}return s.\u0275prov=tt({token:s,providedIn:"root",factory:v0}),s})();const nf=h0(null,"core",[]);let w0=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(He(ld))},s.\u0275mod=gu({type:s}),s.\u0275inj=jn({}),s})();function vA(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(lt,Ee,F)=>{F.d(Ee,{Z:()=>Ge});var h=F(2090),Q=F(4859),k=F(9681),ne=F(1877);class te{constructor(fe,be){this._delegate=fe,this.firebase=be,(0,k._addComponent)(fe,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(fe,be=k._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const Fe=this._delegate.container.getProvider(fe);return!Fe.isInitialized()&&"EXPLICIT"===(null===(De=Fe.getComponent())||void 0===De?void 0:De.instantiationMode)&&Fe.initialize(),Fe.getImmediate({identifier:be})}_removeServiceInstance(fe,be=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(be)}_addComponent(fe){(0,k._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,k._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function ae(){const ot=function le(ot){const fe={},be={__esModule:!0,initializeApp:function Ie(Pe,j={}){const _e=k.initializeApp(Pe,j);if((0,h.r3)(fe,_e.name))return fe[_e.name];const Ue=new ot(_e,be);return fe[_e.name]=Ue,Ue},app:Fe,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ae(Pe){const j=Pe.name,_e=j.replace("-compat","");if(k._registerComponent(Pe)&&"PUBLIC"===Pe.type){const Ue=(We=Fe())=>{if("function"!=typeof We[_e])throw he.create("invalid-app-argument",{appName:j});return We[_e]()};void 0!==Pe.serviceProps&&(0,h.ZB)(Ue,Pe.serviceProps),be[_e]=Ue,ot.prototype[_e]=function(...We){return this._getService.bind(this,j).apply(this,Pe.multipleInstances?We:[])}}return"PUBLIC"===Pe.type?be[_e]:null},removeApp:function De(Pe){delete fe[Pe]},useAsService:function Ve(Pe,j){return"serverAuth"===j?null:j},modularAPIs:k}};function Fe(Pe){if(!(0,h.r3)(fe,Pe=Pe||k._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:Pe});return fe[Pe]}return be.default=be,Object.defineProperty(be,"apps",{get:function ve(){return Object.keys(fe).map(Pe=>fe[Pe])}}),Fe.App=ot,be}(te);return ot.INTERNAL=Object.assign(Object.assign({},ot.INTERNAL),{createFirebaseNamespace:ae,extendNamespace:function fe(be){(0,h.ZB)(ot,be)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),ot}(),G=new ne.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ge=H;!function Ce(ot){(0,k.registerVersion)("@firebase/app-compat","0.2.5",ot)}()},9681:(lt,Ee,F)=>{F.r(Ee),F.d(Ee,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>Jr,_DEFAULT_ENTRY_NAME:()=>ke,_addComponent:()=>un,_addOrOverwriteComponent:()=>wt,_apps:()=>Qe,_clearComponents:()=>jn,_components:()=>Ze,_getProvider:()=>tt,_registerComponent:()=>nn,_removeServiceInstance:()=>xt,deleteApp:()=>Ns,getApp:()=>di,getApps:()=>$r,initializeApp:()=>Rs,onLog:()=>ft,registerVersion:()=>ei,setLogLevel:()=>Ps});var h=F(5861),Q=F(4859),k=F(1877),ne=F(2090),te=F(8766);class re{constructor(we){this.container=we}getPlatformInfoString(){return this.container.getProviders().map(nt=>{if(function he(He){return"VERSION"===He.getComponent()?.type}(nt)){const bt=nt.getImmediate();return`${bt.library}/${bt.version}`}return null}).filter(nt=>nt).join(" ")}}const le="@firebase/app",H=new k.Yd("@firebase/app"),ke="[DEFAULT]",je={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qe=new Map,Ze=new Map;function un(He,we){try{He.container.addComponent(we)}catch(nt){H.debug(`Component ${we.name} failed to register with FirebaseApp ${He.name}`,nt)}}function wt(He,we){He.container.addOrOverwriteComponent(we)}function nn(He){const we=He.name;if(Ze.has(we))return H.debug(`There were multiple attempts to register component ${we}.`),!1;Ze.set(we,He);for(const nt of Qe.values())un(nt,He);return!0}function tt(He,we){const nt=He.container.getProvider("heartbeat").getImmediate({optional:!0});return nt&&nt.triggerHeartbeat(),He.container.getProvider(we)}function xt(He,we,nt=ke){tt(He,we).clearInstance(nt)}function jn(){Ze.clear()}const Cn=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class An{constructor(we,nt,bt){this._isDeleted=!1,this._options=Object.assign({},we),this._config=Object.assign({},nt),this._name=nt.name,this._automaticDataCollectionEnabled=nt.automaticDataCollectionEnabled,this._container=bt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this.checkDestroyed(),this._automaticDataCollectionEnabled=we}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(we){this._isDeleted=we}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}const Jr="9.18.0";function Rs(He,we={}){let nt=He;"object"!=typeof we&&(we={name:we});const bt=Object.assign({name:ke,automaticDataCollectionEnabled:!1},we),Nt=bt.name;if("string"!=typeof Nt||!Nt)throw Cn.create("bad-app-name",{appName:String(Nt)});if(nt||(nt=(0,ne.aH)()),!nt)throw Cn.create("no-options");const jt=Qe.get(Nt);if(jt){if((0,ne.vZ)(nt,jt.options)&&(0,ne.vZ)(bt,jt.config))return jt;throw Cn.create("duplicate-app",{appName:Nt})}const Mr=new Q.H0(Nt);for(const U of Ze.values())Mr.addComponent(U);const $=new An(nt,bt,Mr);return Qe.set(Nt,$),$}function di(He=ke){const we=Qe.get(He);if(!we&&He===ke)return Rs();if(!we)throw Cn.create("no-app",{appName:He});return we}function $r(){return Array.from(Qe.values())}function Ns(He){return wn.apply(this,arguments)}function wn(){return(wn=(0,h.Z)(function*(He){const we=He.name;Qe.has(we)&&(Qe.delete(we),yield Promise.all(He.container.getProviders().map(nt=>nt.delete())),He.isDeleted=!0)})).apply(this,arguments)}function ei(He,we,nt){var bt;let Nt=null!==(bt=je[He])&&void 0!==bt?bt:He;nt&&(Nt+=`-${nt}`);const jt=Nt.match(/\s|\//),Mr=we.match(/\s|\//);if(jt||Mr){const $=[`Unable to register library "${Nt}" with version "${we}":`];return jt&&$.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),jt&&Mr&&$.push("and"),Mr&&$.push(`version name "${we}" contains illegal characters (whitespace or "/")`),void H.warn($.join(" "))}nn(new Q.wA(`${Nt}-version`,()=>({library:Nt,version:we}),"VERSION"))}function ft(He,we){if(null!==He&&"function"!=typeof He)throw Cn.create("invalid-log-argument");(0,k.Am)(He,we)}function Ps(He){(0,k.Ub)(He)}const xi="firebase-heartbeat-database",xn=1,Sr="firebase-heartbeat-store";let Os=null;function Pt(){return Os||(Os=(0,te.X3)(xi,xn,{upgrade:(He,we)=>{0===we&&He.createObjectStore(Sr)}}).catch(He=>{throw Cn.create("idb-open",{originalErrorMessage:He.message})})),Os}function St(){return(St=(0,h.Z)(function*(He){try{return(yield Pt()).transaction(Sr).objectStore(Sr).get($n(He))}catch(we){if(we instanceof ne.ZR)H.warn(we.message);else{const nt=Cn.create("idb-get",{originalErrorMessage:we?.message});H.warn(nt.message)}}})).apply(this,arguments)}function no(He,we){return En.apply(this,arguments)}function En(){return(En=(0,h.Z)(function*(He,we){try{const bt=(yield Pt()).transaction(Sr,"readwrite");return yield bt.objectStore(Sr).put(we,$n(He)),bt.done}catch(nt){if(nt instanceof ne.ZR)H.warn(nt.message);else{const bt=Cn.create("idb-set",{originalErrorMessage:nt?.message});H.warn(bt.message)}}})).apply(this,arguments)}function $n(He){return`${He.name}!${He.options.appId}`}class No{constructor(we){this.container=we,this._heartbeatsCache=null;const nt=this.container.getProvider("app").getImmediate();this._storage=new Qt(nt),this._heartbeatsCachePromise=this._storage.read().then(bt=>(this._heartbeatsCache=bt,bt))}triggerHeartbeat(){var we=this;return(0,h.Z)(function*(){const bt=we.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nt=cn();if(null===we._heartbeatsCache&&(we._heartbeatsCache=yield we._heartbeatsCachePromise),we._heartbeatsCache.lastSentHeartbeatDate!==Nt&&!we._heartbeatsCache.heartbeats.some(jt=>jt.date===Nt))return we._heartbeatsCache.heartbeats.push({date:Nt,agent:bt}),we._heartbeatsCache.heartbeats=we._heartbeatsCache.heartbeats.filter(jt=>{const Mr=new Date(jt.date).valueOf();return Date.now()-Mr<=2592e6}),we._storage.overwrite(we._heartbeatsCache)})()}getHeartbeatsHeader(){var we=this;return(0,h.Z)(function*(){if(null===we._heartbeatsCache&&(yield we._heartbeatsCachePromise),null===we._heartbeatsCache||0===we._heartbeatsCache.heartbeats.length)return"";const nt=cn(),{heartbeatsToSend:bt,unsentEntries:Nt}=function Bi(He,we=1024){const nt=[];let bt=He.slice();for(const Nt of He){const jt=nt.find(Mr=>Mr.agent===Nt.agent);if(jt){if(jt.dates.push(Nt.date),Hr(nt)>we){jt.dates.pop();break}}else if(nt.push({agent:Nt.agent,dates:[Nt.date]}),Hr(nt)>we){nt.pop();break}bt=bt.slice(1)}return{heartbeatsToSend:nt,unsentEntries:bt}}(we._heartbeatsCache.heartbeats),jt=(0,ne.L)(JSON.stringify({version:2,heartbeats:bt}));return we._heartbeatsCache.lastSentHeartbeatDate=nt,Nt.length>0?(we._heartbeatsCache.heartbeats=Nt,yield we._storage.overwrite(we._heartbeatsCache)):(we._heartbeatsCache.heartbeats=[],we._storage.overwrite(we._heartbeatsCache)),jt})()}}function cn(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(we){this.app=we,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var we=this;return(0,h.Z)(function*(){return(yield we._canUseIndexedDBPromise)&&(yield function yt(He){return St.apply(this,arguments)}(we.app))||{heartbeats:[]}})()}overwrite(we){var nt=this;return(0,h.Z)(function*(){var bt;if(yield nt._canUseIndexedDBPromise){const jt=yield nt.read();return no(nt.app,{lastSentHeartbeatDate:null!==(bt=we.lastSentHeartbeatDate)&&void 0!==bt?bt:jt.lastSentHeartbeatDate,heartbeats:we.heartbeats})}})()}add(we){var nt=this;return(0,h.Z)(function*(){var bt;if(yield nt._canUseIndexedDBPromise){const jt=yield nt.read();return no(nt.app,{lastSentHeartbeatDate:null!==(bt=we.lastSentHeartbeatDate)&&void 0!==bt?bt:jt.lastSentHeartbeatDate,heartbeats:[...jt.heartbeats,...we.heartbeats]})}})()}}function Hr(He){return(0,ne.L)(JSON.stringify({version:2,heartbeats:He})).length}!function ji(He){nn(new Q.wA("platform-logger",we=>new re(we),"PRIVATE")),nn(new Q.wA("heartbeat",we=>new No(we),"PRIVATE")),ei(le,"0.9.5",He),ei(le,"0.9.5","esm2017"),ei("fire-js","")}("")},4859:(lt,Ee,F)=>{F.d(Ee,{H0:()=>le,wA:()=>k,zt:()=>te});var h=F(5861),Q=F(2090);class k{constructor(H,G,K){this.name=H,this.instanceFactory=G,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ne="[DEFAULT]";class te{constructor(H,G){this.name=H,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const G=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(G)){const K=new Q.BH;if(this.instancesDeferred.set(G,K),this.isInitialized(G)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:G});Be&&K.resolve(Be)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(H){var G;const K=this.normalizeInstanceIdentifier(H?.identifier),Be=null!==(G=H?.optional)&&void 0!==G&&G;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Ce){if(Be)return null;throw Ce}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function he(ae){return"EAGER"===ae.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[G,K]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(G);try{const Ce=this.getOrInitializeService({instanceIdentifier:Be});K.resolve(Ce)}catch{}}}}clearInstance(H=ne){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,h.Z)(function*(){const G=Array.from(H.instances.values());yield Promise.all([...G.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...G.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ne){return this.instances.has(H)}getOptions(H=ne){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:G={}}=H,K=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:K,options:G});for(const[Ce,Ge]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Ce)&&Ge.resolve(Be);return Be}onInit(H,G){var K;const Be=this.normalizeInstanceIdentifier(G),Ce=null!==(K=this.onInitCallbacks.get(Be))&&void 0!==K?K:new Set;Ce.add(H),this.onInitCallbacks.set(Be,Ce);const Ge=this.instances.get(Be);return Ge&&H(Ge,Be),()=>{Ce.delete(H)}}invokeOnInitCallbacks(H,G){const K=this.onInitCallbacks.get(G);if(K)for(const Be of K)try{Be(H,G)}catch{}}getOrInitializeService({instanceIdentifier:H,options:G={}}){let K=this.instances.get(H);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(ae=H,ae===ne?void 0:ae),options:G}),this.instances.set(H,K),this.instancesOptions.set(H,G),this.invokeOnInitCallbacks(K,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,K)}catch{}var ae;return K||null}normalizeInstanceIdentifier(H=ne){return this.component?this.component.multipleInstances?H:ne:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const G=this.getProvider(H.name);if(G.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);G.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const G=new te(H,this);return this.providers.set(H,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Ee,F)=>{F.d(Ee,{Am:()=>ae,Ub:()=>le,Yd:()=>he,in:()=>Q});const h=[];var Q=(()=>{return(H=Q||(Q={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",Q;var H})();const k={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},ne=Q.INFO,te={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},re=(H,G,...K)=>{if(G<H.logLevel)return;const Be=(new Date).toISOString(),Ce=te[G];if(!Ce)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Ce](`[${Be}]  ${H.name}:`,...K)};class he{constructor(G){this.name=G,this._logLevel=ne,this._logHandler=re,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in Q))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?k[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...G),this._logHandler(this,Q.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...G),this._logHandler(this,Q.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...G),this._logHandler(this,Q.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...G),this._logHandler(this,Q.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...G),this._logHandler(this,Q.ERROR,...G)}}function le(H){h.forEach(G=>{G.setLogLevel(H)})}function ae(H,G){for(const K of h){let Be=null;G&&G.level&&(Be=k[G.level]),K.userLogHandler=null===H?null:(Ce,Ge,...ot)=>{const fe=ot.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch{return null}}).filter(be=>be).join(" ");Ge>=(Be??Ce.logLevel)&&H({level:Q[Ge].toLowerCase(),message:fe,args:ot,type:Ce.name})}}}},259:(lt,Ee,F)=>{F.d(Ee,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=F(9681);(0,h.registerVersion)("firebase","9.18.0","app")},9260:(lt,Ee,F)=>{F.d(Ee,{Z:()=>h.Z});var h=F(3942);h.Z.registerVersion("firebase","9.18.0","app-compat")},8971:(lt,Ee,F)=>{F.r(Ee);var h=F(5861),Q=F(3942),k=F(2090),ne=F(9681),te=F(1877),re=F(655),he=F(4859);const ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},K_EMAIL_SIGNIN="EMAIL_SIGNIN",K_PASSWORD_RESET="PASSWORD_RESET",K_RECOVER_EMAIL="RECOVER_EMAIL",K_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",K_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",K_VERIFY_EMAIL="VERIFY_EMAIL";const Ge=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ot=function Ce(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new te.Yd("@firebase/auth");function Fe(y,...p){De.logLevel<=te.in.ERROR&&De.error(`Auth (${ne.SDK_VERSION}): ${y}`,...p)}function Ie(y,...p){throw Pe(y,...p)}function ve(y,...p){return Pe(y,...p)}function Ae(y,p,m){const E=Object.assign(Object.assign({},ot()),{[p]:m});return new k.LL("auth","Firebase",E).create(p,{appName:y.name})}function Ve(y,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Ie(y,"argument-error"),Ae(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pe(y,...p){if("string"!=typeof y){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(m,...E)}return fe.create(y,...p)}function j(y,p,...m){if(!y)throw Pe(p,...m)}function _e(y){const p="INTERNAL ASSERTION FAILED: "+y;throw Fe(p),new Error(p)}function Ue(y,p){y||_e(p)}const We=new Map;function ct(y){Ue(y instanceof Function,"Expected a class definition");let p=We.get(y);return p?(Ue(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,We.set(y,p),p)}function de(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ye(){return"http:"===xe()||"https:"===xe()}function xe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Qe{constructor(p,m){this.shortDelay=p,this.longDelay=m,Ue(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function ke(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ye()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ze(y,p){Ue(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class un{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new Qe(3e4,6e4);function tt(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function xt(y,p,m,E){return jn.apply(this,arguments)}function jn(){return(jn=(0,h.Z)(function*(y,p,m,E,A={}){return _n(y,A,(0,h.Z)(function*(){let N={},q={};E&&("GET"===p?q=E:N={body:JSON.stringify(E)});const ue=(0,k.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),$e=yield y._getAdditionalHeaders();return $e["Content-Type"]="application/json",y.languageCode&&($e["X-Firebase-Locale"]=y.languageCode),un.fetch()(Rs(y,y.config.apiHost,m,ue),Object.assign({method:p,headers:$e,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function _n(y,p,m){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,h.Z)(function*(y,p,m){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},wt),p);try{const A=new di(y),N=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const q=yield N.json();if("needConfirmation"in q)throw $r(y,"account-exists-with-different-credential",q);if(N.ok&&!("errorMessage"in q))return q;{const ue=N.ok?q.errorMessage:q.error.message,[$e,it]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$e)throw $r(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===$e)throw $r(y,"email-already-in-use",q);if("USER_DISABLED"===$e)throw $r(y,"user-disabled",q);const Dt=E[$e]||$e.toLowerCase().replace(/[_\s]+/g,"-");if(it)throw Ae(y,Dt,it);Ie(y,Dt)}}catch(A){if(A instanceof k.ZR)throw A;Ie(y,"internal-error",{message:String(A)})}})).apply(this,arguments)}function An(y,p,m,E){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,h.Z)(function*(y,p,m,E,A={}){const N=yield xt(y,p,m,E,A);return"mfaPendingCredential"in N&&Ie(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Rs(y,p,m,E){const A=`${p}${m}?${E}`;return y.config.emulator?Ze(y.config,A):`${y.config.apiScheme}://${A}`}class di{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(ve(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $r(y,p,m){const E={appName:y.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const A=ve(y,p,E);return A.customData._tokenResponse=m,A}function wn(){return(wn=(0,h.Z)(function*(y,p){return xt(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(y,p){return xt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function xi(){return(xi=(0,h.Z)(function*(y,p){return xt(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function xn(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Pt(){return(Pt=(0,h.Z)(function*(y,p=!1){const m=(0,k.m9)(y),E=yield m.getIdToken(p),A=St(E);j(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const N="object"==typeof A.firebase?A.firebase:void 0,q=N?.sign_in_provider;return{claims:A,token:E,authTime:xn(yt(A.auth_time)),issuedAtTime:xn(yt(A.iat)),expirationTime:xn(yt(A.exp)),signInProvider:q||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function yt(y){return 1e3*Number(y)}function St(y){const[p,m,E]=y.split(".");if(void 0===p||void 0===m||void 0===E)return Fe("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,k.tV)(m);return A?JSON.parse(A):(Fe("Failed to decode base64 JWT payload"),null)}catch(A){return Fe("Caught error parsing JWT payload as JSON",A?.toString()),null}}function En(y,p){return $n.apply(this,arguments)}function $n(){return($n=(0,h.Z)(function*(y,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof k.ZR&&function Ar({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}class xr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class No{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=xn(this.lastLoginAt),this.creationTime=xn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cn(y){return Bi.apply(this,arguments)}function Bi(){return Bi=(0,h.Z)(function*(y){var p;const m=y.auth,E=yield y.getIdToken(),A=yield En(y,function Ps(y,p){return xi.apply(this,arguments)}(m,{idToken:E}));j(A?.users.length,m,"internal-error");const N=A.users[0];y._notifyReloadListener(N);const q=null!==(p=N.providerUserInfo)&&void 0!==p&&p.length?function He(y){return y.map(p=>{var{providerId:m}=p,E=(0,re._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(N.providerUserInfo):[],ue=function ji(y,p){return[...y.filter(E=>!p.some(A=>A.providerId===E.providerId)),...p]}(y.providerData,q),Dt=!!y.isAnonymous&&!(y.email&&N.passwordHash||ue?.length),Et={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ue,metadata:new No(N.createdAt,N.lastLoginAt),isAnonymous:Dt};Object.assign(y,Et)}),Bi.apply(this,arguments)}function Hr(){return(Hr=(0,h.Z)(function*(y){const p=(0,k.m9)(y);yield cn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function nt(){return(nt=(0,h.Z)(function*(y,p){const m=yield _n(y,{},(0,h.Z)(function*(){const E=(0,k.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:N}=y.config,q=Rs(y,A,"/v1/token",`key=${N}`),ue=yield y._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",un.fetch()(q,{method:"POST",headers:ue,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class bt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){j(p.idToken,"internal-error"),j(typeof p.idToken<"u","internal-error"),j(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function no(y){const p=St(y);return j(p,"internal-error"),j(typeof p.exp<"u","internal-error"),j(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,h.Z)(function*(){return j(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,h.Z)(function*(){const{accessToken:A,refreshToken:N,expiresIn:q}=yield function we(y,p){return nt.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(A,N,Number(q))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:A,expirationTime:N}=m,q=new bt;return E&&(j("string"==typeof E,"internal-error",{appName:p}),q.refreshToken=E),A&&(j("string"==typeof A,"internal-error",{appName:p}),q.accessToken=A),N&&(j("number"==typeof N,"internal-error",{appName:p}),q.expirationTime=N),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new bt,this.toJSON())}_performRefresh(){return _e("not implemented")}}function Nt(y,p){j("string"==typeof y||typeof y>"u","internal-error",{appName:p})}class jt{constructor(p){var{uid:m,auth:E,stsTokenManager:A}=p,N=(0,re._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new No(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const E=yield En(m,m.stsTokenManager.getToken(m.auth,p));return j(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function Os(y){return Pt.apply(this,arguments)}(this,p)}reload(){return function Qt(y){return Hr.apply(this,arguments)}(this)}_assign(p){this!==p&&(j(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new jt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,h.Z)(function*(){let A=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),A=!0),m&&(yield cn(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield En(p,function Ns(y,p){return wn.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,A,N,q,ue,$e,it,Dt;const Et=null!==(E=m.displayName)&&void 0!==E?E:void 0,tr=null!==(A=m.email)&&void 0!==A?A:void 0,ws=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,Zu=null!==(q=m.photoURL)&&void 0!==q?q:void 0,Sm=null!==(ue=m.tenantId)&&void 0!==ue?ue:void 0,dp=null!==($e=m._redirectEventId)&&void 0!==$e?$e:void 0,yc=null!==(it=m.createdAt)&&void 0!==it?it:void 0,Gs=null!==(Dt=m.lastLoginAt)&&void 0!==Dt?Dt:void 0,{uid:Ku,emailVerified:vc,isAnonymous:hp,providerData:wc,stsTokenManager:Am}=m;j(Ku&&Am,p,"internal-error");const Yu=bt.fromJSON(this.name,Am);j("string"==typeof Ku,p,"internal-error"),Nt(Et,p.name),Nt(tr,p.name),j("boolean"==typeof vc,p,"internal-error"),j("boolean"==typeof hp,p,"internal-error"),Nt(ws,p.name),Nt(Zu,p.name),Nt(Sm,p.name),Nt(dp,p.name),Nt(yc,p.name),Nt(Gs,p.name);const xm=new jt({uid:Ku,auth:p,email:tr,emailVerified:vc,displayName:Et,isAnonymous:hp,photoURL:Zu,phoneNumber:ws,tenantId:Sm,stsTokenManager:Yu,createdAt:yc,lastLoginAt:Gs});return wc&&Array.isArray(wc)&&(xm.providerData=wc.map(lh=>Object.assign({},lh))),dp&&(xm._redirectEventId=dp),xm}static _fromIdTokenResponse(p,m,E=!1){return(0,h.Z)(function*(){const A=new bt;A.updateFromServerResponse(m);const N=new jt({uid:m.localId,auth:p,stsTokenManager:A,isAnonymous:E});return yield cn(N),N})()}}const $=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var A=this;return(0,h.Z)(function*(){A.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const A=E.storage[m];return void 0===A?null:A})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return y.type="NONE",y})();function U(y,p,m){return`firebase:${y}:${p}:${m}`}class z{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:A,name:N}=this.auth;this.fullUserKey=U(this.userKey,A.apiKey,N),this.fullPersistenceKey=U("persistence",A.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?jt._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new z(ct($),p,E);const A=(yield Promise.all(m.map(function(){var it=(0,h.Z)(function*(Dt){if(yield Dt._isAvailable())return Dt});return function(Dt){return it.apply(this,arguments)}}()))).filter(it=>it);let N=A[0]||ct($);const q=U(E,p.config.apiKey,p.name);let ue=null;for(const it of m)try{const Dt=yield it._get(q);if(Dt){const Et=jt._fromJSON(p,Dt);it!==N&&(ue=Et),N=it;break}}catch{}const $e=A.filter(it=>it._shouldAllowMigration);return N._shouldAllowMigration&&$e.length?(N=$e[0],ue&&(yield N._set(q,ue.toJSON())),yield Promise.all(m.map(function(){var it=(0,h.Z)(function*(Dt){if(Dt!==N)try{yield Dt._remove(q)}catch{}});return function(Dt){return it.apply(this,arguments)}}())),new z(N,p,E)):new z(N,p,E)})()}}function pe(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(gn(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(ee(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Pn(p))return"Blackberry";if(ir(p))return"Webos";if(Xe(p))return"Safari";if((p.includes("chrome/")||ze(p))&&!p.includes("edge/"))return"Chrome";if(Mn(p))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function ee(y=(0,k.z$)()){return/firefox\//i.test(y)}function Xe(y=(0,k.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ze(y=(0,k.z$)()){return/crios\//i.test(y)}function gn(y=(0,k.z$)()){return/iemobile/i.test(y)}function Mn(y=(0,k.z$)()){return/android/i.test(y)}function Pn(y=(0,k.z$)()){return/blackberry/i.test(y)}function ir(y=(0,k.z$)()){return/webos/i.test(y)}function Ot(y=(0,k.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Af(y=(0,k.z$)()){return Ot(y)||Mn(y)||ir(y)||Pn(y)||/windows phone/i.test(y)||gn(y)}function pu(y,p=[]){let m;switch(y){case"Browser":m=pe((0,k.z$)());break;case"Worker":m=`${pe((0,k.z$)())}-${y}`;break;default:m=y}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${ne.SDK_VERSION}/${E}`}class gu{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=N=>new Promise((q,ue)=>{try{q(p(N))}catch($e){ue($e)}});E.onAbort=m,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const A of m.queue)yield A(p),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const N of E)try{N()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class xf{constructor(p,m,E){this.app=p,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xl(this),this.idTokenSubscription=new xl(this),this.beforeStateQueue=new gu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=ct(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var A,N;if(!E._deleted&&(E.persistenceManager=yield z.create(E,p),!E._deleted)){if(null!==(A=E._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var E;const A=yield m.assertedPersistence.getCurrentUser();let N=A,q=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ue=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,$e=N?._redirectEventId,it=yield m.tryRedirectSignIn(p);(!ue||ue===$e)&&it?.user&&(N=it.user,q=!0)}if(!N)return m.directlySetCurrentUser(null);if(!N._redirectEventId){if(q)try{yield m.beforeStateQueue.runMiddleware(N)}catch(ue){N=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ue))}return N?m.reloadAndSetCurrentUserOrClear(N):m.directlySetCurrentUser(null)}return j(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===N._redirectEventId?m.directlySetCurrentUser(N):m.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){try{yield cn(p)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function je(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const E=p?(0,k.m9)(p):null;return E&&j(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return p&&j(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(ct(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new k.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,h.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(m);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&ct(p)||m._popupRedirectResolver;j(E,m,"argument-error"),m.redirectPersistenceManager=yield z.create(m,[ct(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var E,A;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,A){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),q=this._isInitialized?Promise.resolve():this._initializationPromise;return j(q,this,"internal-error"),q.then(()=>N(this.currentUser)),"function"==typeof m?p.addObserver(m,E,A):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=pu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function On(y){return(0,k.m9)(y)}class xl{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,k.ne)(m=>this.observer=m)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xt(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function lr(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class sr{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return _e("not implemented")}_getIdTokenResponse(p){return _e("not implemented")}_linkToIdToken(p,m){return _e("not implemented")}_getReauthenticationResolver(p){return _e("not implemented")}}function Rr(y,p){return mu.apply(this,arguments)}function mu(){return(mu=(0,h.Z)(function*(y,p){return xt(y,"POST","/v1/accounts:resetPassword",tt(y,p))})).apply(this,arguments)}function ro(y,p){return hi.apply(this,arguments)}function hi(){return(hi=(0,h.Z)(function*(y,p){return xt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function kt(){return(kt=(0,h.Z)(function*(y,p){return xt(y,"POST","/v1/accounts:update",tt(y,p))})).apply(this,arguments)}function ti(){return(ti=(0,h.Z)(function*(y,p){return An(y,"POST","/v1/accounts:signInWithPassword",tt(y,p))})).apply(this,arguments)}function Hi(y,p){return bn.apply(this,arguments)}function bn(){return(bn=(0,h.Z)(function*(y,p){return xt(y,"POST","/v1/accounts:sendOobCode",tt(y,p))})).apply(this,arguments)}function Dn(){return(Dn=(0,h.Z)(function*(y,p){return Hi(y,p)})).apply(this,arguments)}function ma(){return(ma=(0,h.Z)(function*(y,p){return Hi(y,p)})).apply(this,arguments)}function Po(){return(Po=(0,h.Z)(function*(y,p){return Hi(y,p)})).apply(this,arguments)}function oo(){return(oo=(0,h.Z)(function*(y,p){return Hi(y,p)})).apply(this,arguments)}function cr(){return(cr=(0,h.Z)(function*(y,p){return An(y,"POST","/v1/accounts:signInWithEmailLink",tt(y,p))})).apply(this,arguments)}function ao(){return(ao=(0,h.Z)(function*(y,p){return An(y,"POST","/v1/accounts:signInWithEmailLink",tt(y,p))})).apply(this,arguments)}class ni extends sr{constructor(p,m,E,A=null){super("password",E),this._email=p,this._password=m,this._tenantId=A}static _fromEmailAndPassword(p,m){return new ni(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new ni(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function vn(y,p){return ti.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function _a(y,p){return cr.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Ie(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return ro(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function ko(y,p){return ao.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:Ie(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function fi(y,p){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,h.Z)(function*(y,p){return An(y,"POST","/v1/accounts:signInWithIdp",tt(y,p))})).apply(this,arguments)}class ts extends sr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new ts(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Ie("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A}=m,N=(0,re._T)(m,["providerId","signInMethod"]);if(!E||!A)return null;const q=new ts(E,A);return q.idToken=N.idToken||void 0,q.accessToken=N.accessToken||void 0,q.secret=N.secret,q.nonce=N.nonce,q.pendingToken=N.pendingToken||null,q}_getIdTokenResponse(p){return fi(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,fi(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,fi(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,k.xO)(m)}return p}}function _u(){return(_u=(0,h.Z)(function*(y,p){return xt(y,"POST","/v1/accounts:sendVerificationCode",tt(y,p))})).apply(this,arguments)}function pi(){return(pi=(0,h.Z)(function*(y,p){return An(y,"POST","/v1/accounts:signInWithPhoneNumber",tt(y,p))})).apply(this,arguments)}function dr(){return(dr=(0,h.Z)(function*(y,p){const m=yield An(y,"POST","/v1/accounts:signInWithPhoneNumber",tt(y,p));if(m.temporaryProof)throw $r(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Wg={USER_NOT_FOUND:"user-not-found"};function ii(){return(ii=(0,h.Z)(function*(y,p){return An(y,"POST","/v1/accounts:signInWithPhoneNumber",tt(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Wg)})).apply(this,arguments)}class ns extends sr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new ns({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new ns({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function uo(y,p){return pi.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Fo(y,p){return dr.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ri(y,p){return ii.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:A}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:N}=p;return E||m||A||N?new ns({verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:N}):null}}class Nr{constructor(p){var m,E,A,N,q,ue;const $e=(0,k.zd)((0,k.pd)(p)),it=null!==(m=$e.apiKey)&&void 0!==m?m:null,Dt=null!==(E=$e.oobCode)&&void 0!==E?E:null,Et=function yu(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=$e.mode)&&void 0!==A?A:null);j(it&&Dt&&Et,"argument-error"),this.apiKey=it,this.operation=Et,this.code=Dt,this.continueUrl=null!==(N=$e.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(q=$e.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ue=$e.tenantId)&&void 0!==ue?ue:null}static parseLink(p){const m=function Lo(y){const p=(0,k.zd)((0,k.pd)(y)).link,m=p?(0,k.zd)((0,k.pd)(p)).deep_link_id:null,E=(0,k.zd)((0,k.pd)(y)).deep_link_id;return(E?(0,k.zd)((0,k.pd)(E)).link:null)||E||m||p||y}(p);try{return new Nr(m)}catch{return null}}}let Ed=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,E){return ni._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const A=Nr.parseLink(E);return j(A,"argument-error"),ni._fromEmailAndCode(m,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class rs{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class lo extends rs{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ya extends lo{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return j("providerId"in m&&"signInMethod"in m,"argument-error"),ts._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return j(p.idToken||p.accessToken,"argument-error"),ts._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ya.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ya.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:N,nonce:q,providerId:ue}=p;if(!E&&!A&&!m&&!N||!ue)return null;try{return new ya(ue)._credential({idToken:m,accessToken:E,nonce:q,pendingToken:N})}catch{return null}}}let Pl=(()=>{class y extends lo{constructor(){super("facebook.com")}static credential(m){return ts._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Mf=(()=>{class y extends lo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return ts._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:A}=m;if(!E&&!A)return null;try{return y.credential(E,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Rf=(()=>{class y extends lo{constructor(){super("github.com")}static credential(m){return ts._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Vo extends sr{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return fi(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,fi(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,fi(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A,pendingToken:N}=m;return E&&A&&N&&E===A?new Vo(E,N):null}static _create(p,m){return new Vo(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Gi extends rs{constructor(p){j(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Gi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Gi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Vo.fromJSON(p);return j(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return Vo._create(E,m)}catch{return null}}}let qg=(()=>{class y extends lo{constructor(){super("twitter.com")}static credential(m,E){return ts._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=m;if(!E||!A)return null;try{return y.credential(E,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function vu(y,p){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,h.Z)(function*(y,p){return An(y,"POST","/v1/accounts:signUp",tt(y,p))})).apply(this,arguments)}class gi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,A=!1){return(0,h.Z)(function*(){const N=yield jt._fromIdTokenResponse(p,E,A),q=kl(E);return new gi({user:N,providerId:q,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const A=kl(E);return new gi({user:p,providerId:A,_tokenResponse:E,operationType:m})})()}}function kl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Nf(){return(Nf=(0,h.Z)(function*(y){var p;const m=On(y);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new gi({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield vu(m,{returnSecureToken:!0}),A=yield gi._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Eu extends k.ZR{constructor(p,m,E,A){var N;super(m.code,m.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Eu.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,A){return new Eu(p,m,E,A)}}function Zg(y,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Eu._fromErrorAndOperation(y,N,p,E):N})}function si(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function ho(){return ho=(0,h.Z)(function*(y,p){const m=(0,k.m9)(y);yield Bo(!0,m,p);const{providerUserInfo:E}=yield function ei(y,p){return ft.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),A=si(E||[]);return m.providerData=m.providerData.filter(N=>A.has(N.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),ho.apply(this,arguments)}function va(y,p){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,h.Z)(function*(y,p,m=!1){const E=yield En(y,p._linkToIdToken(y.auth,yield y.getIdToken()),m);return gi._forOperation(y,"link",E)})).apply(this,arguments)}function Bo(y,p,m){return wa.apply(this,arguments)}function wa(){return(wa=(0,h.Z)(function*(y,p,m){yield cn(p);const A=!1===y?"provider-already-linked":"no-such-provider";j(si(p.providerData).has(m)===y,p.auth,A)})).apply(this,arguments)}function Fl(y,p){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,h.Z)(function*(y,p,m=!1){const{auth:E}=y,A="reauthenticate";try{const N=yield En(y,Zg(E,A,p,y),m);j(N.idToken,E,"internal-error");const q=St(N.idToken);j(q,E,"internal-error");const{sub:ue}=q;return j(y.uid===ue,E,"user-mismatch"),gi._forOperation(y,A,N)}catch(N){throw"auth/user-not-found"===N?.code&&Ie(E,"user-mismatch"),N}})).apply(this,arguments)}function Fs(y,p){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,h.Z)(function*(y,p,m=!1){const E="signIn",A=yield Zg(y,E,p),N=yield gi._fromIdTokenResponse(y,E,A);return m||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function on(y,p){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,h.Z)(function*(y,p){return Fs(On(y),p)})).apply(this,arguments)}function Ea(y,p){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,h.Z)(function*(y,p){const m=(0,k.m9)(y);return yield Bo(!1,m,p.providerId),va(m,p)})).apply(this,arguments)}function bu(y,p){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(y,p){return Fl((0,k.m9)(y),p)})).apply(this,arguments)}function Ia(){return(Ia=(0,h.Z)(function*(y,p){return An(y,"POST","/v1/accounts:signInWithCustomToken",tt(y,p))})).apply(this,arguments)}function zi(){return zi=(0,h.Z)(function*(y,p){const m=On(y),E=yield function Pr(y,p){return Ia.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),A=yield gi._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(A.user),A}),zi.apply(this,arguments)}class hr{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Vl._fromServerResponse(p,m):Ie(p,"internal-error")}}class Vl extends hr{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Vl(m)}}function fo(y,p,m){var E;j((null===(E=m.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),j(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(j(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(j(m.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Mi(){return Mi=(0,h.Z)(function*(y,p,m){const E=(0,k.m9)(y),A={requestType:"PASSWORD_RESET",email:p};m&&fo(E,A,m),yield function so(y,p){return ma.apply(this,arguments)}(E,A)}),Mi.apply(this,arguments)}function Ca(){return(Ca=(0,h.Z)(function*(y,p,m){yield Rr((0,k.m9)(y),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Tu(){return Tu=(0,h.Z)(function*(y,p){yield function et(y,p){return kt.apply(this,arguments)}((0,k.m9)(y),{oobCode:p})}),Tu.apply(this,arguments)}function Ul(y,p){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,h.Z)(function*(y,p){const m=(0,k.m9)(y),E=yield Rr(m,{oobCode:p}),A=E.requestType;switch(j(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(E.mfaInfo,m,"internal-error");default:j(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=hr._fromServerResponse(On(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:A}})).apply(this,arguments)}function $l(){return($l=(0,h.Z)(function*(y,p){const{data:m}=yield Ul((0,k.m9)(y),p);return m.email})).apply(this,arguments)}function Hl(){return(Hl=(0,h.Z)(function*(y,p,m){const E=On(y),A=yield vu(E,{returnSecureToken:!0,email:p,password:m}),N=yield gi._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function Kt(){return Kt=(0,h.Z)(function*(y,p,m){const E=(0,k.m9)(y),A={requestType:"EMAIL_SIGNIN",email:p};j(m.handleCodeInApp,E,"argument-error"),m&&fo(E,A,m),yield function Ht(y,p){return Po.apply(this,arguments)}(E,A)}),Kt.apply(this,arguments)}function Hn(){return(Hn=(0,h.Z)(function*(y,p,m){const E=(0,k.m9)(y),A=Ed.credentialWithLink(p,m||de());return j(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),on(E,A)})).apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(y,p){return xt(y,"POST","/v1/accounts:createAuthUri",tt(y,p))})).apply(this,arguments)}function Su(){return Su=(0,h.Z)(function*(y,p){const E={identifier:p,continueUri:ye()?de():"http://localhost"},{signinMethods:A}=yield function Of(y,p){return Ls.apply(this,arguments)}((0,k.m9)(y),E);return A||[]}),Su.apply(this,arguments)}function xu(){return xu=(0,h.Z)(function*(y,p){const m=(0,k.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&fo(m.auth,A,p);const{email:N}=yield function io(y,p){return Dn.apply(this,arguments)}(m.auth,A);N!==y.email&&(yield y.reload())}),xu.apply(this,arguments)}function ba(){return ba=(0,h.Z)(function*(y,p,m){const E=(0,k.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};m&&fo(E.auth,N,m);const{email:q}=yield function Oo(y,p){return oo.apply(this,arguments)}(E.auth,N);q!==y.email&&(yield y.reload())}),ba.apply(this,arguments)}function Or(){return(Or=(0,h.Z)(function*(y,p){return xt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function po(){return po=(0,h.Z)(function*(y,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,k.m9)(y),N={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},q=yield En(E,function Xn(y,p){return Or.apply(this,arguments)}(E.auth,N));E.displayName=q.displayName||null,E.photoURL=q.photoUrl||null;const ue=E.providerData.find(({providerId:$e})=>"password"===$e);ue&&(ue.displayName=E.displayName,ue.photoURL=E.photoURL),yield E._updateTokensIfNecessary(q)}),po.apply(this,arguments)}function Wl(y,p,m){return zl.apply(this,arguments)}function zl(){return(zl=(0,h.Z)(function*(y,p,m){const{auth:E}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(N.email=p),m&&(N.password=m);const q=yield En(y,ro(E,N));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class is{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class ql extends is{constructor(p,m,E,A){super(p,m,E),this.username=A}}class Ad extends is{constructor(p,m){super(p,"facebook.com",m)}}class Ru extends ql{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Kg extends is{constructor(p,m){super(p,"google.com",m)}}class Zl extends ql{constructor(p,m,E){super(p,"twitter.com",m,E)}}function xd(y){const{user:p,_tokenResponse:m}=y;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function kf(y){var p,m;if(!y)return null;const{providerId:E}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&y?.idToken){const q=null===(m=null===(p=St(y.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(q)return new is(N,"anonymous"!==q&&"custom"!==q?q:null)}if(!E)return null;switch(E){case"facebook.com":return new Ad(N,A);case"github.com":return new Ru(N,A);case"google.com":return new Kg(N,A);case"twitter.com":return new Zl(N,A,y.screenName||null);case"custom":case"anonymous":return new is(N,null);default:return new is(N,E,A)}}(m)}class pn{constructor(p,m,E){this.type=p,this.credential=m,this.auth=E}static _fromIdtoken(p,m){return new pn("enroll",p,m)}static _fromMfaPendingCredential(p){return new pn("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return pn._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return pn._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Yl{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=On(p),A=m.customData._serverResponse,N=(A.mfaInfo||[]).map(ue=>hr._fromServerResponse(E,ue));j(A.mfaPendingCredential,E,"internal-error");const q=pn._fromMfaPendingCredential(A.mfaPendingCredential);return new Yl(q,N,function(){var ue=(0,h.Z)(function*($e){const it=yield $e._process(E,q);delete A.mfaInfo,delete A.mfaPendingCredential;const Dt=Object.assign(Object.assign({},A),{idToken:it.idToken,refreshToken:it.refreshToken});switch(m.operationType){case"signIn":const Et=yield gi._fromIdTokenResponse(E,m.operationType,Dt);return yield E._updateCurrentUser(Et.user),Et;case"reauthenticate":return j(m.user,E,"internal-error"),gi._forOperation(m.user,m.operationType,Dt);default:Ie(E,"internal-error")}});return function($e){return ue.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}class Rd{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>hr._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Rd(p)}getSession(){var p=this;return(0,h.Z)(function*(){return pn._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var E=this;return(0,h.Z)(function*(){const A=p,N=yield E.getSession(),q=yield En(E.user,A._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(q),E.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){const E="string"==typeof p?p:p.uid,A=yield m.user.getIdToken();try{const N=yield En(m.user,function Jg(y,p){return xt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",tt(y,p))}(m.user.auth,{idToken:A,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:q})=>q!==E),yield m.user._updateTokensIfNecessary(N),yield m.user.reload()}catch(N){throw N}})()}}const go=new WeakMap,ss="__sak";class jo{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(ss,"1"),this.storage.removeItem(ss),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Da=(()=>{class y extends jo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $o(){const y=(0,k.z$)();return Xe(y)||Ot(y)}()&&function Al(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Af(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),N=this.localCache[E];A!==N&&m(E,N,A)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((ue,$e,it)=>{this.notifyListeners(ue,it)});const A=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(A);if(m.newValue!==ue)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!E)return}const N=()=>{const ue=this.storage.getItem(A);!E&&this.localCache[A]===ue||this.notifyListeners(A,ue)},q=this.storage.getItem(A);!function fu(){return(0,k.w1)()&&10===document.documentMode}()||q===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const N of Array.from(A))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var A=()=>super._set,N=this;return(0,h.Z)(function*(){yield A().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,A=this;return(0,h.Z)(function*(){const N=yield E().call(A,m);return A.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,A=this;return(0,h.Z)(function*(){yield E().call(A,m),delete A.localCache[m]})()}}return y.type="LOCAL",y})(),Zi=(()=>{class y extends jo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return y.type="SESSION",y})();let Bf=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const A=new y(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const A=m,{eventId:N,eventType:q,data:ue}=A.data,$e=E.handlersMap[q];if(!$e?.size)return;A.ports[0].postMessage({status:"ack",eventId:N,eventType:q});const it=Array.from($e).map(function(){var Et=(0,h.Z)(function*(tr){return tr(A.origin,ue)});return function(tr){return Et.apply(this,arguments)}}()),Dt=yield function Uf(y){return Promise.all(y.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(it);A.ports[0].postMessage({status:"done",eventId:N,eventType:q,response:Dt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Us(y="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return y+m}class Ta{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var A=this;return(0,h.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let q,ue;return new Promise(($e,it)=>{const Dt=Us("",20);N.port1.start();const Et=setTimeout(()=>{it(new Error("unsupported_event"))},E);ue={messageChannel:N,onMessage(tr){const ws=tr;if(ws.data.eventId===Dt)switch(ws.data.status){case"ack":clearTimeout(Et),q=setTimeout(()=>{it(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),$e(ws.data.response);break;default:clearTimeout(Et),clearTimeout(q),it(new Error("invalid_response"))}}},A.handlers.add(ue),N.port1.addEventListener("message",ue.onMessage),A.target.postMessage({eventType:p,eventId:Dt,data:m},[N.port2])}).finally(()=>{ue&&A.removeMessageHandler(ue)})})()}}function Jn(){return window}function as(){return typeof Jn().WorkerGlobalScope<"u"&&"function"==typeof Jn().importScripts}function us(){return(us=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const mo="firebaseLocalStorageDb",jf=1,ls="firebaseLocalStorage",Sa="fbase_key";class Ki{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ec(y,p){return y.transaction([ls],p?"readwrite":"readonly").objectStore(ls)}function xa(){const y=indexedDB.open(mo,jf);return new Promise((p,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(ls,{keyPath:Sa})}catch(A){m(A)}}),y.addEventListener("success",(0,h.Z)(function*(){const E=y.result;E.objectStoreNames.contains(ls)?p(E):(E.close(),yield function Aa(){const y=indexedDB.deleteDatabase(mo);return new Ki(y).toPromise()}(),p(yield xa()))}))})}function Wo(y,p,m){return zr.apply(this,arguments)}function zr(){return(zr=(0,h.Z)(function*(y,p,m){const E=ec(y,!0).put({[Sa]:p,value:m});return new Ki(E).toPromise()})).apply(this,arguments)}function cs(){return(cs=(0,h.Z)(function*(y,p){const m=ec(y,!1).get(p),E=yield new Ki(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function zo(y,p){const m=ec(y,!0).delete(p);return new Ki(m).toPromise()}const qo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield xa()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let A=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(A++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return as()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=Bf._getInstance(function Jl(){return as()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(A,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(A,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(A,N){return["keyChanged"]});return function(A,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,A;if(m.activeServiceWorker=yield function Go(){return us.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ta(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);N&&null!==(E=N[0])&&void 0!==E&&E.fulfilled&&null!==(A=N[0])&&void 0!==A&&A.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Xl(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield xa();return yield Wo(m,ss,"1"),yield zo(m,ss),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var A=this;return(0,h.Z)(function*(){return A._withPendingWrite((0,h.Z)(function*(){return yield A._withRetries(N=>Wo(N,m,E)),A.localCache[m]=E,A.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const A=yield E._withRetries(N=>function tc(y,p){return cs.apply(this,arguments)}(N,m));return E.localCache[m]=A,A})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(A=>zo(A,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries(q=>{const ue=ec(q,!1).getAll();return new Ki(ue).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const A=[],N=new Set;for(const{fbase_key:q,value:ue}of E)N.add(q),JSON.stringify(m.localCache[q])!==JSON.stringify(ue)&&(m.notifyListeners(q,ue),A.push(q));for(const q of Object.keys(m.localCache))m.localCache[q]&&!N.has(q)&&(m.notifyListeners(q,null),A.push(q));return A})()}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const N of Array.from(A))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Pa(){return(Pa=(0,h.Z)(function*(y){return(yield xt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _o(y){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=p,E.onerror=A=>{const N=ve("internal-error");N.customData=A,m(N)},E.type="text/javascript",E.charset="UTF-8",function Nu(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(E)})}function Bs(y){return`__${y}${Math.floor(1e6*Math.random())}`}const yo=1e12;class Oa{constructor(p){this.auth=p,this.counter=yo,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new $f(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||yo;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||yo))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(p||yo))||void 0===E||E.execute(),""})()}}class $f{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;j(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ic(y){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Pu=Bs("rcb"),Pd=new Qe(3e4,6e4);class Zo{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Jn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return j(function ka(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Jn().grecaptcha):new Promise((E,A)=>{const N=Jn().setTimeout(()=>{A(ve(p,"network-request-failed"))},Pd.get());Jn()[Pu]=()=>{Jn().clearTimeout(N),delete Jn()[Pu];const ue=Jn().grecaptcha;if(!ue)return void A(ve(p,"internal-error"));const $e=ue.render;ue.render=(it,Dt)=>{const Et=$e(it,Dt);return this.counter++,Et},this.hostLanguage=m,E(ue)},_o(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Pu,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),A(ve(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Jn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ou{load(p){return(0,h.Z)(function*(){return new Oa(p)})()}clearedOneInstance(){}}const Ko="recaptcha",em={theme:"light",type:"image"};class Od{constructor(p,m=Object.assign({},em),E){this.parameters=m,this.type=Ko,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=On(E),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;j(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ou:new Zo,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const q=ue=>{ue&&(p.tokenChangeListeners.delete(q),N(ue))};p.tokenChangeListeners.add(q),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Jn()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){j(ye()&&!as(),p.auth,"internal-error"),yield function vo(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function Yi(y){return Pa.apply(this,arguments)}(p.auth);j(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class kd{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=ns._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function dn(){return(dn=(0,h.Z)(function*(y,p,m){const E=On(y),A=yield Fd(E,p,(0,k.m9)(m));return new kd(A,N=>on(E,N))})).apply(this,arguments)}function ku(){return(ku=(0,h.Z)(function*(y,p,m){const E=(0,k.m9)(y);yield Bo(!1,E,"phone");const A=yield Fd(E.auth,p,(0,k.m9)(m));return new kd(A,N=>Ea(E,N))})).apply(this,arguments)}function Gf(){return(Gf=(0,h.Z)(function*(y,p,m){const E=(0,k.m9)(y),A=yield Fd(E.auth,p,(0,k.m9)(m));return new kd(A,N=>bu(E,N))})).apply(this,arguments)}function Fd(y,p,m){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,h.Z)(function*(y,p,m){var E;const A=yield m.verify();try{let N;if(j("string"==typeof A,y,"argument-error"),j(m.type===Ko,y,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const q=N.session;if("phoneNumber"in N)return j("enroll"===q.type,y,"internal-error"),(yield function Lf(y,p){return xt(y,"POST","/v2/accounts/mfaEnrollment:start",tt(y,p))}(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{j("signin"===q.type,y,"internal-error");const ue=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return j(ue,y,"missing-multi-factor-info"),(yield function Na(y,p){return xt(y,"POST","/v2/accounts/mfaSignIn:start",tt(y,p))}(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield function Nl(y,p){return _u.apply(this,arguments)}(y,{phoneNumber:N.phoneNumber,recaptchaToken:A});return q}}finally{m._reset()}}),Wf.apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(y,p){yield va((0,k.m9)(y),p)})).apply(this,arguments)}let oc=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=On(m)}verifyPhoneNumber(m,E){return Fd(this.auth,m,(0,k.m9)(E))}static credential(m,E){return ns._fromVerification(m,E)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:A}=m;return E&&A?ns._fromTokenResponse(E,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Fa(y,p){return p?ct(p):(j(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Gn extends sr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return fi(p,this._buildIdpRequest())}_linkToIdToken(p,m){return fi(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return fi(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Ld(y){return Fs(y.auth,new Gn(y),y.bypassAuthState)}function wo(y){const{auth:p,user:m}=y;return j(m,p,"internal-error"),Fl(m,new Gn(y),y.bypassAuthState)}function Vd(y){return kr.apply(this,arguments)}function kr(){return(kr=(0,h.Z)(function*(y){const{auth:p,user:m}=y;return j(m,p,"internal-error"),va(m,new Gn(y),y.bypassAuthState)})).apply(this,arguments)}class fs{constructor(p,m,E,A,N=!1){this.auth=p,this.resolver=E,this.user=A,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(E,A){p.pendingPromise={resolve:E,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(E,A){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:N,tenantId:q,error:ue,type:$e}=p;if(ue)return void m.reject(ue);const it={auth:m.auth,requestUri:E,sessionId:A,tenantId:q||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask($e)(it))}catch(Dt){m.reject(Dt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Ld;case"linkViaPopup":case"linkViaRedirect":return Vd;case"reauthViaPopup":case"reauthViaRedirect":return wo;default:Ie(this.auth,"internal-error")}}resolve(p){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ac=new Qe(2e3,1e4);function js(){return(js=(0,h.Z)(function*(y,p,m){const E=On(y);Ve(y,p,rs);const A=Fa(E,m);return new Wt(E,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function nm(){return(nm=(0,h.Z)(function*(y,p,m){const E=(0,k.m9)(y);Ve(E.auth,p,rs);const A=Fa(E.auth,m);return new Wt(E.auth,"reauthViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}function zf(){return(zf=(0,h.Z)(function*(y,p,m){const E=(0,k.m9)(y);Ve(E.auth,p,rs);const A=Fa(E.auth,m);return new Wt(E.auth,"linkViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}let Wt=(()=>{class y extends fs{constructor(m,E,A,N,q){super(m,E,N,q),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return j(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){Ue(1===m.filter.length,"Popup operations only handle one event");const E=Us();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(ve(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,A;this.pollId=null!==(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ac.get())};m()}}return y.currentPopupAction=null,y})();const fr="pendingRedirect",Ni=new Map;class im extends fs{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=Ni.get(m.auth._key());if(!E){try{const N=(yield function Ud(y,p){return ps.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(N)}catch(A){E=()=>Promise.reject(A)}Ni.set(m.auth._key(),E)}return m.bypassAuthState||Ni.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const A=yield E.auth._redirectUserForId(p.eventId);if(A)return E.user=A,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function ps(){return(ps=(0,h.Z)(function*(y,p){const m=dt(p),E=Fn(y);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(m));return yield E._remove(m),A})).apply(this,arguments)}function Fu(y,p){return gs.apply(this,arguments)}function gs(){return(gs=(0,h.Z)(function*(y,p){return Fn(y)._set(dt(p),"true")})).apply(this,arguments)}function $s(y,p){Ni.set(y._key(),p)}function Fn(y){return ct(y._redirectPersistence)}function dt(y){return U(fr,y.config.apiKey,y.name)}function Vu(y,p,m){return function Bd(y,p,m){return b.apply(this,arguments)}(y,p,m)}function b(){return(b=(0,h.Z)(function*(y,p,m){const E=On(y);Ve(y,p,rs),yield E._initializationPromise;const A=Fa(E,m);return yield Fu(A,E),A._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function T(y,p,m){return function M(y,p,m){return V.apply(this,arguments)}(y,p,m)}function V(){return(V=(0,h.Z)(function*(y,p,m){const E=(0,k.m9)(y);Ve(E.auth,p,rs),yield E.auth._initializationPromise;const A=Fa(E.auth,m);yield Fu(A,E.auth);const N=yield vt(E);return A._openRedirect(E.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function Y(y,p,m){return function X(y,p,m){return Te.apply(this,arguments)}(y,p,m)}function Te(){return(Te=(0,h.Z)(function*(y,p,m){const E=(0,k.m9)(y);Ve(E.auth,p,rs),yield E.auth._initializationPromise;const A=Fa(E.auth,m);yield Bo(!1,E,p.providerId),yield Fu(A,E.auth);const N=yield vt(E);return A._openRedirect(E.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function ut(){return(ut=(0,h.Z)(function*(y,p){return yield On(y)._initializationPromise,gt(y,p,!1)})).apply(this,arguments)}function gt(y,p){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,h.Z)(function*(y,p,m=!1){const E=On(y),A=Fa(E,p),q=yield new im(E,A,m).execute();return q&&!m&&(delete q.user._redirectEventId,yield E._persistUserIfCurrent(q.user),yield E._setRedirectUser(null,p)),q})).apply(this,arguments)}function vt(y){return qr.apply(this,arguments)}function qr(){return(qr=(0,h.Z)(function*(y){const p=Us(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class Eo{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Pi(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mi(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!mi(p)){const A=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(ve(this.auth,A))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(er(p))}saveEventToCache(p){this.cachedEventUids.add(er(p)),this.lastProcessedEventTime=Date.now()}}function er(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function mi({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===p?.code}function Hs(y){return Va.apply(this,arguments)}function Va(){return(Va=(0,h.Z)(function*(y,p={}){return xt(y,"GET","/v1/projects",p)})).apply(this,arguments)}const uc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qf=/^https?/;function lc(){return(lc=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield Hs(y);for(const m of p)try{if(Qy(m))return}catch{}Ie(y,"unauthorized-domain")})).apply(this,arguments)}function Qy(y){const p=de(),{protocol:m,hostname:E}=new URL(p);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===E?"chrome-extension:"===m&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&q.hostname===E}if(!qf.test(m))return!1;if(uc.test(y))return E===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const Zf=new Qe(3e4,6e4);function om(){const y=Jn().___jsl;if(y?.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let cc=null;const Xy=new Qe(5e3,15e3),Jy="__/auth/iframe",Kf="emulator/auth/iframe",ev={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function am(y){const p=y.config;j(p.authDomain,y,"auth-domain-config-required");const m=p.emulator?Ze(p,Kf):`https://${y.config.authDomain}/${Jy}`,E={apiKey:p.apiKey,appName:y.name,v:ne.SDK_VERSION},A=tv.get(y.config.apiHost);A&&(E.eid=A);const N=y._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,k.xO)(E).slice(1)}`}function Hd(){return Hd=(0,h.Z)(function*(y){const p=yield function $d(y){return cc=cc||function jd(y){return new Promise((p,m)=>{var E,A,N;function q(){om(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{om(),m(ve(y,"network-request-failed"))},timeout:Zf.get()})}if(null!==(A=null===(E=Jn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==A&&A.Iframe)p(gapi.iframes.getContext());else{if(null===(N=Jn().gapi)||void 0===N||!N.load){const ue=Bs("iframefcb");return Jn()[ue]=()=>{gapi.load?q():m(ve(y,"network-request-failed"))},_o(`https://apis.google.com/js/api.js?onload=${ue}`).catch($e=>m($e))}q()}}).catch(p=>{throw cc=null,p})}(y),cc}(y),m=Jn().gapi;return j(m,y,"internal-error"),p.open({where:document.body,url:am(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ev,dontclear:!0},E=>new Promise(function(){var A=(0,h.Z)(function*(N,q){yield E.restyle({setHideOnLeave:!1});const ue=ve(y,"network-request-failed"),$e=Jn().setTimeout(()=>{q(ue)},Xy.get());function it(){Jn().clearTimeout($e),N(E)}E.ping(it).then(it,()=>{q(ue)})});return function(N,q){return A.apply(this,arguments)}}()))}),Hd.apply(this,arguments)}const um={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Yf=500,Gd=600,Wd="_blank",dc="http://localhost";class zd{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const oi="__/auth/handler",Qo="emulator/auth/handler";function hc(y,p,m,E,A,N){j(y.config.authDomain,y,"auth-domain-config-required"),j(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:E,v:ne.SDK_VERSION,eventId:A};if(p instanceof rs){p.setDefaultLanguage(y.languageCode),q.providerId=p.providerId||"",(0,k.xb)(p.getCustomParameters())||(q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[$e,it]of Object.entries(N||{}))q[$e]=it}if(p instanceof lo){const $e=p.getScopes().filter(it=>""!==it);$e.length>0&&(q.scopes=$e.join(","))}y.tenantId&&(q.tid=y.tenantId);const ue=q;for(const $e of Object.keys(ue))void 0===ue[$e]&&delete ue[$e];return`${function cm({config:y}){return y.emulator?Ze(y,Qo):`https://${y.authDomain}/${oi}`}(y)}?${(0,k.xO)(ue).slice(1)}`}const dm="webStorageSupport",Xf=class Qf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zi,this._completeRedirectFn=gt,this._overrideRedirectResult=$s}_openPopup(p,m,E,A){var N=this;return(0,h.Z)(function*(){var q;Ue(null===(q=N.eventManagers[p._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ue=hc(p,m,E,de(),A);return function ms(y,p,m,E=Yf,A=Gd){const N=Math.max((window.screen.availHeight-A)/2,0).toString(),q=Math.max((window.screen.availWidth-E)/2,0).toString();let ue="";const $e=Object.assign(Object.assign({},um),{width:E.toString(),height:A.toString(),top:N,left:q}),it=(0,k.z$)().toLowerCase();m&&(ue=ze(it)?Wd:m),ee(it)&&(p=p||dc,$e.scrollbars="yes");const Dt=Object.entries($e).reduce((tr,[ws,Zu])=>`${tr}${ws}=${Zu},`,"");if(function $i(y=(0,k.z$)()){var p;return Ot(y)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(it)&&"_self"!==ue)return function lm(y,p){const m=document.createElement("a");m.href=y,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",ue),new zd(null);const Et=window.open(p||"",ue,Dt);j(Et,y,"popup-blocked");try{Et.focus()}catch{}return new zd(Et)}(p,ue,Us())})()}_openRedirect(p,m,E,A){var N=this;return(0,h.Z)(function*(){return yield N._originValidation(p),function Ho(y){Jn().location.href=y}(hc(p,m,E,de(),A)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:A,promise:N}=this.eventManagers[m];return A?Promise.resolve(A):(Ue(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const E=yield function nv(y){return Hd.apply(this,arguments)}(p),A=new Eo(p);return E.register("authEvent",N=>(j(N?.authEvent,p,"invalid-auth-event"),{status:A.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:A},m.iframes[p._key()]=E,A})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(dm,{type:dm},A=>{var N;const q=null===(N=A?.[0])||void 0===N?void 0:N[dm];void 0!==q&&m(!!q),Ie(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function sm(y){return lc.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Af()||Xe()||Ot()}};class qd{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return _e("unexpected MultiFactorSessionType")}}}class Uu extends qd{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Uu(p)}_finalizeEnroll(p,m,E){return function Xg(y,p){return xt(y,"POST","/v2/accounts/mfaEnrollment:finalize",tt(y,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Nd(y,p){return xt(y,"POST","/v2/accounts/mfaSignIn:finalize",tt(y,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rv=(()=>{class y{constructor(){}static assertion(m){return Uu._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var Fr="@firebase/auth";class iv{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Xo(){return window}(0,k.Pz)("authIdTokenMaxAge"),function ai(y){(0,ne._registerComponent)(new he.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),{apiKey:N,authDomain:q}=E.options;return((ue,$e)=>{j(N&&!N.includes(":"),"invalid-api-key",{appName:ue.name}),j(!q?.includes(":"),"argument-error",{appName:ue.name});const it={apiKey:N,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pu(y)},Dt=new xf(ue,$e,it);return function se(y,p){const m=p?.persistence||[],E=(Array.isArray(m)?m:[m]).map(ct);p?.errorMap&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(E,p?.popupRedirectResolver)}(Dt,m),Dt})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,ne._registerComponent)(new he.wA("auth-internal",p=>{const m=On(p.getProvider("auth").getImmediate());return new iv(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)(Fr,"0.21.5",function hm(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ne.registerVersion)(Fr,"0.21.5","esm2017")}("Browser");const pm=2e3;function Yd(){return Yd=(0,h.Z)(function*(y,p,m){var E;const{BuildInfo:A}=Xo();Ue(p.sessionId,"AuthEvent did not contain a session ID");const N=yield function uv(y){return fc.apply(this,arguments)}(p.sessionId),q={};return Ot()?q.ibi=A.packageName:Mn()?q.apn=A.packageName:Ie(y,"operation-not-supported-in-this-environment"),A.displayName&&(q.appDisplayName=A.displayName),q.sessionId=N,hc(y,m,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,q)}),Yd.apply(this,arguments)}function Ua(){return(Ua=(0,h.Z)(function*(y){const{BuildInfo:p}=Xo(),m={};Ot()?m.iosBundleId=p.packageName:Mn()?m.androidPackageName=p.packageName:Ie(y,"operation-not-supported-in-this-environment"),yield Hs(y,m)})).apply(this,arguments)}function Ba(){return(Ba=(0,h.Z)(function*(y,p,m){const{cordova:E}=Xo();let A=()=>{};try{yield new Promise((N,q)=>{let ue=null;function $e(){var Et;N();const tr=null===(Et=E.plugins.browsertab)||void 0===Et?void 0:Et.close;"function"==typeof tr&&tr(),"function"==typeof m?.close&&m.close()}function it(){ue||(ue=window.setTimeout(()=>{q(ve(y,"redirect-cancelled-by-user"))},pm))}function Dt(){"visible"===document?.visibilityState&&it()}p.addPassiveListener($e),document.addEventListener("resume",it,!1),Mn()&&document.addEventListener("visibilitychange",Dt,!1),A=()=>{p.removePassiveListener($e),document.removeEventListener("resume",it,!1),document.removeEventListener("visibilitychange",Dt,!1),ue&&window.clearTimeout(ue)}})}finally{A()}})).apply(this,arguments)}function fc(){return(fc=(0,h.Z)(function*(y){const p=function ep(y){if(Ue(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),m=new Uint8Array(p);for(let E=0;E<y.length;E++)m[E]=y.charCodeAt(E);return m}(y),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const ju=20;class tp extends Eo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,h.Z)(function*(){yield p.initPromise})()}}function pc(y){return gm.apply(this,arguments)}function gm(){return(gm=(0,h.Z)(function*(y){const p=yield _m()._get(ea(y));return p&&(yield _m()._remove(ea(y))),p})).apply(this,arguments)}function lv(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<ju;m++){const E=Math.floor(Math.random()*p.length);y.push(p.charAt(E))}return y.join("")}function _m(){return ct(Da)}function ea(y){return U("authEvent",y.config.apiKey,y.name)}function ta(y){if(!y?.includes("?"))return{};const[p,...m]=y.split("?");return(0,k.zd)(m.join("?"))}const ym=class $u{constructor(){this._redirectPersistence=Zi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=gt,this._overrideRedirectResult=$s}_initialize(p){var m=this;return(0,h.Z)(function*(){const E=p._key();let A=m.eventManagers.get(E);return A||(A=new tp(p),m.eventManagers.set(E,A),m.attachCallbackListeners(p,A)),A})()}_openPopup(p){Ie(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,E,A){var N=this;return(0,h.Z)(function*(){!function ja(y){var p,m,E,A,N,q,ue,$e,it,Dt;const Et=Xo();j("function"==typeof(null===(p=Et?.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof(null===(m=Et?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(N=null===(A=null===(E=Et?.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===($e=null===(ue=null===(q=Et?.cordova)||void 0===q?void 0:q.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===$e?void 0:$e.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Dt=null===(it=Et?.cordova)||void 0===it?void 0:it.InAppBrowser)||void 0===Dt?void 0:Dt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const q=yield N._initialize(p);yield q.initialized(),q.resetRedirect(),function Lu(){Ni.clear()}(),yield N._originValidation(p);const ue=function $a(y,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:lv(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(p,E,A);yield function Qd(y,p){return _m()._set(ea(y),p)}(p,ue);const $e=yield function av(y,p,m){return Yd.apply(this,arguments)}(p,ue,m),it=yield function Bu(y){const{cordova:p}=Xo();return new Promise(m=>{p.plugins.browsertab.isAvailable(E=>{let A=null;E?p.plugins.browsertab.openUrl(y):A=p.InAppBrowser.open(y,function Gr(y=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(A)})})}($e);return function Jo(y,p,m){return Ba.apply(this,arguments)}(p,q,it)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Jf(y){return Ua.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:E,handleOpenURL:A,BuildInfo:N}=Xo(),q=setTimeout((0,h.Z)(function*(){yield pc(p),m.onEvent(Hu())}),500),ue=function(){var Dt=(0,h.Z)(function*(Et){clearTimeout(q);const tr=yield pc(p);let ws=null;tr&&Et?.url&&(ws=function mm(y,p){var m,E;const A=function Jd(y){const p=ta(y),m=p.link?decodeURIComponent(p.link):void 0,E=ta(m).link,A=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return ta(A).link||A||E||m||y}(p);if(A.includes("/__/auth/callback")){const N=ta(A),q=N.firebaseError?function Xd(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ue=null===(E=null===(m=q?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],$e=ue?ve(ue):null;return $e?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:$e,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(tr,Et.url)),m.onEvent(ws||Hu())});return function(tr){return Dt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,ue);const $e=A,it=`${N.packageName.toLowerCase()}://`;Xo().handleOpenURL=function(){var Dt=(0,h.Z)(function*(Et){if(Et.toLowerCase().startsWith(it)&&ue({url:Et}),"function"==typeof $e)try{$e(Et)}catch(tr){console.error(tr)}});return function(Et){return Dt.apply(this,arguments)}}()}};function Hu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}const np=1e3;function _s(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function ip(y=(0,k.z$)()){return!("file:"!==_s()&&"ionic:"!==_s()&&"capacitor:"!==_s()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function wm(){try{const y=self.localStorage,p=Us();if(y)return y.setItem(p,"1"),y.removeItem(p),!function SE(y=(0,k.z$)()){return function TE(){return(0,k.w1)()&&11===document?.documentMode}()||function Gu(y=(0,k.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,k.hl)()}catch{return Wu()&&(0,k.hl)()}return!1}function Wu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function th(){return(function rp(){return"http:"===_s()||"https:"===_s()}()||(0,k.ru)()||ip())&&!function DE(){return(0,k.b$)()||(0,k.UG)()}()&&wm()&&!Wu()}function mc(){return ip()&&typeof document<"u"}function zu(){return(zu=(0,h.Z)(function*(){return!!mc()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},np);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const _i={LOCAL:"local",NONE:"none",SESSION:"session"},ys=j,Ha="persistence";function na(y){return ih.apply(this,arguments)}function ih(){return(ih=(0,h.Z)(function*(y){yield y._initializationPromise;const p=Em(),m=U(Ha,y.config.apiKey,y.name);p&&p.setItem(m,y._getPersistence())})).apply(this,arguments)}function Em(){var y;try{return(null===(y=function sp(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Im=j;class Ga{constructor(){this.browserResolver=ct(Xf),this.cordovaResolver=ct(ym),this.underlyingResolver=null,this._redirectPersistence=Zi,this._completeRedirectFn=gt,this._overrideRedirectResult=$s}_initialize(p){var m=this;return(0,h.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,E,A){var N=this;return(0,h.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(p,m,E,A)})()}_openRedirect(p,m,E,A){var N=this;return(0,h.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(p,m,E,A)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return mc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Im(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,h.Z)(function*(){if(p.underlyingResolver)return;const m=yield function nh(){return zu.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function Cm(y){return y.unwrap()}function op(y){return ra(y)}function ra(y){const{_tokenResponse:p}=y instanceof k.ZR?y.customData:y;if(!p)return null;if(!(y instanceof k.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return oc.credentialFromResult(y);const m=p.providerId;if(!m||m===ae.PASSWORD)return null;let E;switch(m){case ae.GOOGLE:E=Mf;break;case ae.FACEBOOK:E=Pl;break;case ae.GITHUB:E=Rf;break;case ae.TWITTER:E=qg;break;default:const{oauthIdToken:A,oauthAccessToken:N,oauthTokenSecret:q,pendingToken:ue,nonce:$e}=p;return N||q||A||ue?ue?m.startsWith("saml.")?Vo._create(m,ue):ts._fromParams({providerId:m,signInMethod:m,pendingToken:ue,idToken:A,accessToken:N}):new ya(m).credential({idToken:A,accessToken:N,rawNonce:$e}):null}return y instanceof k.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function yi(y,p){return p.catch(m=>{throw m instanceof k.ZR&&function ap(y,p){var m;const E=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new bm(y,function Ir(y,p){var m;const E=(0,k.m9)(y),A=p;return j(p.customData.operationType,E,"argument-error"),j(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Yl._fromError(E,A)}(y,p));else if(E){const A=ra(p),N=p;A&&(N.credential=A,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(y,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:op(m),additionalUserInfo:xd(m),user:vs.getOrCreate(A)}})}function sh(y,p){return _c.apply(this,arguments)}function _c(){return(_c=(0,h.Z)(function*(y,p){const m=yield p;return{verificationId:m.verificationId,confirm:E=>yi(y,m.confirm(E))}})).apply(this,arguments)}class bm{constructor(p,m){this.resolver=m,this.auth=function hv(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return yi(Cm(this.auth),this.resolver.resolveSignIn(p))}}class vs{constructor(p){this._delegate=p,this.multiFactor=function Ql(y){const p=(0,k.m9)(y);return go.has(p)||go.set(p,Rd._fromUser(p)),go.get(p)}(p)}static getOrCreate(p){return vs.USER_MAP.has(p)||vs.USER_MAP.set(p,new vs(p)),vs.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,h.Z)(function*(){return yi(m.auth,Ea(m._delegate,p))})()}linkWithPhoneNumber(p,m){var E=this;return(0,h.Z)(function*(){return sh(E.auth,function tm(y,p,m){return ku.apply(this,arguments)}(E._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,h.Z)(function*(){return yi(m.auth,function rm(y,p,m){return zf.apply(this,arguments)}(m._delegate,p,Ga))})()}linkWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield na(On(m.auth)),Y(m._delegate,p,Ga)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,h.Z)(function*(){return yi(m.auth,bu(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return sh(this.auth,function Hf(y,p,m){return Gf.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return yi(this.auth,function Yy(y,p,m){return nm.apply(this,arguments)}(this._delegate,p,Ga))}reauthenticateWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield na(On(m.auth)),T(m._delegate,p,Ga)})()}sendEmailVerification(p){return function Au(y,p){return xu.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,h.Z)(function*(){return yield function Id(y,p){return ho.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function qi(y,p){return Wl((0,k.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function Mu(y,p){return Wl((0,k.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Ky(y,p){return Yo.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Gl(y,p){return po.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function Sd(y,p,m){return ba.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}vs.USER_MAP=new WeakMap;const qu=j;let up=(()=>{class y{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;qu(A,"invalid-api-key",{appName:m.name}),qu(A,"invalid-api-key",{appName:m.name});const N=typeof window<"u"?Ga:void 0;this._delegate=E.initialize({options:{persistence:ah(A,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ge),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?vs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Ml(y,p,m){const E=On(y);j(E._canInitEmulator,E,"emulator-config-failed"),j(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const A=!!m?.disableWarnings,N=Xt(p),{host:q,port:ue}=function Qn(y){const p=Xt(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const N=A[1];return{host:N,port:lr(E.substr(N.length+1))}}{const[N,q]=E.split(":");return{host:N,port:lr(q)}}}(p);E.config.emulator={url:`${N}//${q}${null===ue?"":`:${ue}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:q,port:ue,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function ks(){function y(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,E)}applyActionCode(m){return function Mt(y,p){return Tu.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Ul(this._delegate,m)}confirmPasswordReset(m,E){return function Du(y,p,m){return Ca.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var A=this;return(0,h.Z)(function*(){return yi(A._delegate,function Dd(y,p,m){return Hl.apply(this,arguments)}(A._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Ri(y,p){return Su.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Td(y,p){return"EMAIL_SIGNIN"===Nr.parseLink(p)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,h.Z)(function*(){qu(th(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function rt(y,p){return ut.apply(this,arguments)}(m._delegate,Ga);return E?yi(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function eh(y,p){On(y)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,E,A){const{next:N,error:q,complete:ue}=oh(m,E,A);return this._delegate.onAuthStateChanged(N,q,ue)}onIdTokenChanged(m,E,A){const{next:N,error:q,complete:ue}=oh(m,E,A);return this._delegate.onIdTokenChanged(N,q,ue)}sendSignInLinkToEmail(m,E){return function Se(y,p,m){return Kt.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function bd(y,p,m){return Mi.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,h.Z)(function*(){let A;switch(function rh(y,p){ys(Object.values(_i).includes(p),y,"invalid-persistence-type"),(0,k.b$)()?ys(p!==_i.SESSION,y,"unsupported-persistence-type"):(0,k.UG)()?ys(p===_i.NONE,y,"unsupported-persistence-type"):Wu()?ys(p===_i.NONE||p===_i.LOCAL&&(0,k.hl)(),y,"unsupported-persistence-type"):ys(p===_i.NONE||wm(),y,"unsupported-persistence-type")}(E._delegate,m),m){case _i.SESSION:A=Zi;break;case _i.LOCAL:A=(yield ct(qo)._isAvailable())?qo:Da;break;case _i.NONE:A=$;break;default:return Ie("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return yi(this._delegate,function wu(y){return Nf.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return yi(this._delegate,on(this._delegate,m))}signInWithCustomToken(m){return yi(this._delegate,function Ll(y,p){return zi.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return yi(this._delegate,function kn(y,p,m){return on((0,k.m9)(y),Ed.credential(p,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return yi(this._delegate,function Pf(y,p,m){return Hn.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return sh(this._delegate,function hs(y,p,m){return dn.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,h.Z)(function*(){return qu(th(),E._delegate,"operation-not-supported-in-this-environment"),yi(E._delegate,function La(y,p,m){return js.apply(this,arguments)}(E._delegate,m,Ga))})()}signInWithRedirect(m){var E=this;return(0,h.Z)(function*(){return qu(th(),E._delegate,"operation-not-supported-in-this-environment"),yield na(E._delegate),Vu(E._delegate,m,Ga)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function jl(y,p){return $l.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=_i,y})();function oh(y,p,m){let E=y;"function"!=typeof y&&({next:E,error:p,complete:m}=y);const A=E;return{next:q=>A(q&&vs.getOrCreate(q)),error:p,complete:m}}function ah(y,p){const m=function dv(y,p){const m=Em();if(!m)return[];const E=U(Ha,y,p);switch(m.getItem(E)){case _i.NONE:return[$];case _i.LOCAL:return[qo,Zi];case _i.SESSION:return[Zi];default:return[]}}(y,p);if(typeof self<"u"&&!m.includes(qo)&&m.push(qo),typeof window<"u")for(const E of[Da,Zi])m.includes(E)||m.push(E);return m.includes($)||m.push($),m}class uh{constructor(){this.providerId="phone",this._delegate=new oc(Cm(Q.Z.auth()))}static credential(p,m){return oc.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}uh.PHONE_SIGN_IN_METHOD=oc.PHONE_SIGN_IN_METHOD,uh.PROVIDER_ID=oc.PROVIDER_ID;const lp=j;class Dm{constructor(p,m,E=Q.Z.app()){var A;lp(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Od(p,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Tm(y){y.INTERNAL.registerComponent(new he.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new up(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:K_EMAIL_SIGNIN,PASSWORD_RESET:K_PASSWORD_RESET,RECOVER_EMAIL:K_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:K_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:K_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:K_VERIFY_EMAIL}},EmailAuthProvider:Ed,FacebookAuthProvider:Pl,GithubAuthProvider:Rf,GoogleAuthProvider:Mf,OAuthProvider:ya,SAMLAuthProvider:Gi,PhoneAuthProvider:uh,PhoneMultiFactorGenerator:rv,RecaptchaVerifier:Dm,TwitterAuthProvider:qg,Auth:up,AuthCredential:sr,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.5")}(Q.Z)},8766:(lt,Ee,F)=>{F.d(Ee,{Lj:()=>Ie,X3:()=>Fe});var h=F(5861);const Q=(j,_e)=>_e.some(Ue=>j instanceof Ue);let k,ne;const he=new WeakMap,le=new WeakMap,ae=new WeakMap,H=new WeakMap,G=new WeakMap;let Ce={get(j,_e,Ue){if(j instanceof IDBTransaction){if("done"===_e)return le.get(j);if("objectStoreNames"===_e)return j.objectStoreNames||ae.get(j);if("store"===_e)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return be(j[_e])},set:(j,_e,Ue)=>(j[_e]=Ue,!0),has:(j,_e)=>j instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in j};function fe(j){return"function"==typeof j?function ot(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function re(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(..._e){return j.apply(De(this),_e),be(he.get(this))}:function(..._e){return be(j.apply(De(this),_e))}:function(_e,...Ue){const We=j.call(De(this),_e,...Ue);return ae.set(We,_e.sort?_e.sort():[_e]),be(We)}}(j):(j instanceof IDBTransaction&&function Be(j){if(le.has(j))return;const _e=new Promise((Ue,We)=>{const ct=()=>{j.removeEventListener("complete",Je),j.removeEventListener("error",se),j.removeEventListener("abort",se)},Je=()=>{Ue(),ct()},se=()=>{We(j.error||new DOMException("AbortError","AbortError")),ct()};j.addEventListener("complete",Je),j.addEventListener("error",se),j.addEventListener("abort",se)});le.set(j,_e)}(j),Q(j,function te(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Ce):j)}function be(j){if(j instanceof IDBRequest)return function K(j){const _e=new Promise((Ue,We)=>{const ct=()=>{j.removeEventListener("success",Je),j.removeEventListener("error",se)},Je=()=>{Ue(be(j.result)),ct()},se=()=>{We(j.error),ct()};j.addEventListener("success",Je),j.addEventListener("error",se)});return _e.then(Ue=>{Ue instanceof IDBCursor&&he.set(Ue,j)}).catch(()=>{}),G.set(_e,j),_e}(j);if(H.has(j))return H.get(j);const _e=fe(j);return _e!==j&&(H.set(j,_e),G.set(_e,j)),_e}const De=j=>G.get(j);function Fe(j,_e,{blocked:Ue,upgrade:We,blocking:ct,terminated:Je}={}){const se=indexedDB.open(j,_e),de=be(se);return We&&se.addEventListener("upgradeneeded",ye=>{We(be(se.result),ye.oldVersion,ye.newVersion,be(se.transaction))}),Ue&&se.addEventListener("blocked",()=>Ue()),de.then(ye=>{Je&&ye.addEventListener("close",()=>Je()),ct&&ye.addEventListener("versionchange",()=>ct())}).catch(()=>{}),de}function Ie(j,{blocked:_e}={}){const Ue=indexedDB.deleteDatabase(j);return _e&&Ue.addEventListener("blocked",()=>_e()),be(Ue).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],Ve=new Map;function Pe(j,_e){if(!(j instanceof IDBDatabase)||_e in j||"string"!=typeof _e)return;if(Ve.get(_e))return Ve.get(_e);const Ue=_e.replace(/FromIndex$/,""),We=_e!==Ue,ct=Ae.includes(Ue);if(!(Ue in(We?IDBIndex:IDBObjectStore).prototype)||!ct&&!ve.includes(Ue))return;const Je=function(){var se=(0,h.Z)(function*(de,...ye){const xe=this.transaction(de,ct?"readwrite":"readonly");let ke=xe.store;return We&&(ke=ke.index(ye.shift())),(yield Promise.all([ke[Ue](...ye),ct&&xe.done]))[0]});return function(ye){return se.apply(this,arguments)}}();return Ve.set(_e,Je),Je}!function Ge(j){Ce=j(Ce)}(j=>({...j,get:(_e,Ue,We)=>Pe(_e,Ue)||j.get(_e,Ue,We),has:(_e,Ue)=>!!Pe(_e,Ue)||j.has(_e,Ue)}))},5861:(lt,Ee,F)=>{function h(k,ne,te,re,he,le,ae){try{var H=k[le](ae),G=H.value}catch(K){return void te(K)}H.done?ne(G):Promise.resolve(G).then(re,he)}function Q(k){return function(){var ne=this,te=arguments;return new Promise(function(re,he){var le=k.apply(ne,te);function ae(G){h(le,re,he,ae,H,"next",G)}function H(G){h(le,re,he,ae,H,"throw",G)}ae(void 0)})}}F.d(Ee,{Z:()=>Q})}},lt=>{lt(lt.s=4856)}]);